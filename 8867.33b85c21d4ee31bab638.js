"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8867],{9771:(R,p,t)=>{var n,E=t(71600);n={value:!0},p.Z=void 0;var i=E(t(68671)),d=t(52322),g=(0,i.default)((0,d.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"}),"PushPin");p.Z=g},48867:(R,p,t)=>{t.r(p),t.d(p,{default:()=>ce});var n=t(52322),E=t(9771),i=t(65992),d=t(14117),g=t(14875),y=t(15400),l=t(66198),f=t(82056),m=t(80078),A=t(8640),T=t(76665),D=t(76635),e=t(2784),s=t(80252),u=t(667),r=t(59506),a=t(29268),O=t(14075),I=t(82044),j=t(76479),S=t(93812),H=t(99549),G=t(39367);function ee(L,x,c=P=>P===x){const P=(0,D.reject)(L,c);return P.length===L.length&&P.push(x),P}var te=t(30165),M=t(39192),ne=t(2784);const Y={ok:"success.main",warn:"warning.main",error:"error.main",stale:"text.secondary"},se=(0,i.ZP)(d.Z,{shouldForwardProp:L=>L!=="isPinned"})(({isPinned:L,theme:x})=>({padding:0,".MuiIconButton-root":{visibility:L?"visibile":"hidden","&:hover":{backgroundColor:"transparent"}},".MuiListItemText-root":{gap:x.spacing(1),display:"flex"},"&:hover .MuiIconButton-root":{visibility:"visible"}})),oe=(0,i.ZP)(g.Z)(()=>({".MuiInputBase-input.MuiSelect-select.MuiInputBase-inputSizeSmall":{paddingTop:0,paddingBottom:0,minWidth:40},".MuiListItemText-root":{marginTop:0,marginBottom:0}})),ae=ne.memo(function(x){const{info:c,isPinned:P,onClick:B,onClickPin:v}=x,C=(0,e.useCallback)(()=>{B(c)},[B,c]),Z=(0,e.useCallback)(()=>{v(c)},[v,c]),z=M.KD[c.status.level];return(0,n.jsx)(y.ZP,{dense:!0,disablePadding:!0,"data-testid-diagnostic-row":!0,children:(0,n.jsxs)(se,{disableGutters:!0,isPinned:P,onClick:C,children:[(0,n.jsx)(l.Z,{size:"small",onClick:W=>{Z(),W.stopPropagation()},children:(0,n.jsx)(E.Z,{fontSize:"small",color:P?"inherit":"disabled"})}),(0,n.jsx)(f.Z,{primary:c.displayName,secondary:c.status.message,secondaryTypographyProps:{color:Y[z??"stale"]}})]})})}),ie=["diagnostic_msgs/DiagnosticArray","diagnostic_msgs/msg/DiagnosticArray","ros.diagnostic_msgs.DiagnosticArray"];function le(L){const{config:x,saveConfig:c}=L,{topics:P}=(0,r.Ui)(),{minLevel:B,topicToRender:v,pinnedIds:C,hardwareIdFilter:Z,sortByLevel:z=!0}=x,{openSiblingPanel:W}=(0,I.R)(),w=(0,G.W0)(),X=(0,e.useCallback)(o=>{c({pinnedIds:ee(C,o.id)})},[C,c]),J=(0,e.useCallback)(o=>{W({panelType:"DiagnosticStatusPanel",siblingConfigCreator:()=>({selectedHardwareId:o.status.hardware_id,selectedName:o.status.name,topicToRender:v,collapsedSections:[]}),updateIfExists:!0})},[v,W]),Q=(0,e.useCallback)(({item:o,key:h})=>(0,n.jsx)(ae,{info:o,isPinned:C.includes(o.id),onClick:J,onClickPin:X},h),[C,J,X]),K=(0,e.useMemo)(()=>{const o=P.filter(h=>h.schemaName!=null&&ie.includes(h.schemaName)).map(h=>h.name);return(0,D.uniq)([...o])},[P]),de=(0,e.useMemo)(()=>K.includes(v)?v:void 0,[K,v]),$=(0,H.Z)(de),ue=(0,e.useMemo)(()=>{if($.size===0)return(0,n.jsxs)(a.Z,{children:["Waiting for ",(0,n.jsx)("code",{children:v})," messages"]});const o=(0,u.DZ)(C,N=>{const[q,b,_]=N.split("|");return _==null||b==null?void 0:$.get(b)?.get(_)}),h=(0,M.ep)($),F=Array.from(h.keys()).sort().reverse(),U=z?[].concat(...F.map(N=>(0,M.uE)(h.get(N)??[],Z,C))):(0,M.uE)([].concat(...h.values()),Z,C),V=[...(0,D.compact)(o),...U].filter(({status:N})=>N.level>=B);return V.length===0?null:(0,n.jsx)(s.qj,{children:({height:N,width:q})=>(0,n.jsx)(s.aV,{width:q,height:N,style:{outline:"none"},rowHeight:30,rowRenderer:b=>Q({...b,item:V[b.index]}),rowCount:V.length,overscanRowCount:10})})},[$,Z,C,Q,z,B,v]),k=(0,e.useCallback)(o=>{if(o.action!=="update")return;const{path:h,value:F}=o.payload;c((0,T.ZP)(U=>(0,D.set)(U,h.slice(1),F)))},[c]);return(0,e.useEffect)(()=>{w({actionHandler:k,nodes:(0,te.Y)(x,v,K)})},[k,K,x,v,w]),(0,n.jsxs)(S.Z,{flex:"auto",children:[(0,n.jsx)(j.Z,{children:(0,n.jsxs)(S.Z,{flex:"auto",direction:"row",gap:1,children:[(0,n.jsx)(oe,{value:B,id:"status-filter-menu",color:"secondary",size:"small",onChange:o=>c({minLevel:o.target.value}),MenuProps:{MenuListProps:{dense:!0}},children:M.ON.map(o=>(0,n.jsx)(m.Z,{value:o,children:(0,n.jsx)(f.Z,{primary:M.KD[o]?.toUpperCase(),primaryTypographyProps:{variant:"inherit",color:Y[M.KD[o]??"stale"]}})},o))}),(0,n.jsx)(A.ZP,{value:Z,placeholder:"Filter",onChange:o=>c({hardwareIdFilter:o.target.value}),style:{flex:"auto",font:"inherit"}})]})}),(0,n.jsx)(S.Z,{flex:"auto",children:ue})]})}const re={minLevel:0,pinnedIds:[],hardwareIdFilter:"",topicToRender:"/diagnostics",sortByLevel:!0},ce=(0,O.Z)(Object.assign(le,{panelType:"DiagnosticSummary",defaultConfig:re}))},30165:(R,p,t)=>{t.d(p,{N:()=>E,Y:()=>n});function n(i,d,g){const y=g.map(m=>({label:m,value:m})),l=g.includes(d);l||y.unshift({value:d,label:d});const f=l?void 0:`Topic ${d} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:d,error:f,options:y},sortByLevel:{label:"Sort by level",input:"boolean",value:i.sortByLevel}}}}}function E(i,d,g){const y=g.map(m=>({label:m,value:m})),l=g.includes(i);l||y.unshift({value:i,label:i});const f=l?void 0:`Topic ${i} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:i,error:f,options:y},numericPrecision:{label:"Numeric precision",input:"number",min:0,max:17,precision:0,step:1,placeholder:"auto",value:d}}}}}},99549:(R,p,t)=>{t.d(p,{Z:()=>y});var n=t(2784),E=t(59506),i=t(39192);function d(l,f){let m=!1;for(const A of f){const{header:T,status:D}=A.message;for(const e of D){const s=(0,i.HE)(e,T.stamp),u=e.hardware_id,r=l.get(u);r==null?(m=!0,l.set(u,new Map([[e.name,s]]))):(m=!0,r.set(e.name,s))}}return m?new Map(l):l}const g=()=>new Map;function y(l){const f=(0,n.useMemo)(()=>l?[l]:[],[l]);return(0,E.CC)({topics:f,restore:g,addMessages:d})}},39192:(R,p,t)=>{t.d(p,{ON:()=>y,zq:()=>d,KD:()=>g,HE:()=>A,uE:()=>D,ep:()=>T,Gf:()=>m});var n=t(76635);function E({options:e,filter:s,getText:u,sort:r=!0}){if(s==null||s==="")return e;const a=s.toLowerCase().replace(/[^a-z0-9]/g,"");if(a.length===0)return e;const O=[];for(const I of e){const j=u(I).toLowerCase();let S=-1,H=0;for(const G of a){if(S=j.indexOf(G,S+1),S===-1)break;H+=S}S!==-1&&O.push({option:I,score:H*j.length})}return r&&O.sort((I,j)=>I.score-j.score),O.map(I=>I.option)}const i=5e3,d={OK:0,WARN:1,ERROR:2,STALE:3},g={0:"ok",1:"warn",2:"error",3:"stale"},y=[0,1,2,3];function l(e){return e.startsWith("/")?e.slice(1):e}function f(e,s){const u=l(e);return s!=null?`|${u}|${s}|`:`|${u}|`}function m(e,s){return s.length>0?e.length>0?`${e}: ${s}`:`${s}`:e.length>0?`${e}`:"(empty)"}function A(e,s){const u=m(e.hardware_id,e.name);let r=e;return e.values.some(({value:a})=>a.length>i)&&(r={...e,values:e.values.map(a=>a.value.length>i?{key:a.key,value:(0,n.truncate)(a.value,{length:i})}:a)}),{status:r,stamp:s,id:f(e.hardware_id,e.name),displayName:u}}function T(e){const s=new Map;for(const u of e.values())for(const r of u.values()){const a=s.get(r.status.level);a?a.push(r):s.set(r.status.level,[r])}return s}const D=(e,s,u)=>{const r=e.filter(({id:a})=>!u.includes(a));return s.length===0?(0,n.sortBy)(r,a=>a.displayName.replace(/^\//,"")):E({options:r,filter:s,getText:({displayName:a})=>a})}}}]);

//# sourceMappingURL=8867.33b85c21d4ee31bab638.js.map