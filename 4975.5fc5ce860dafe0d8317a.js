(()=>{var k={85909:(e,n,s)=>{"use strict";var m=s(90758);const o={canHandle:f=>f instanceof AbortSignal,deserialize:([f,r])=>{const a=new AbortController;return f?a.abort():r.onmessage=()=>{a.abort()},a.signal},serialize:f=>{const{port1:r,port2:a}=new MessageChannel;return f.addEventListener("abort",()=>{r.postMessage("aborted")}),[[f.aborted,a],[a]]}};var c=s(44668);const h=Object.freeze({sec:0,nsec:0});class g{constructor(r,a){this._iter=r,this._abort=a}async next(){return this._abort?.aborted===!0?void 0:(await this._iter.next()).value}async nextBatch(r){const a=await this.next();if(!a)return;if(a.type==="problem")return[a];const u=[a];let d=h;switch(a.type){case"stamp":d=(0,c.add)(a.stamp,{sec:0,nsec:r*1e6});break;case"message-event":d=(0,c.add)(a.msgEvent.receiveTime,{sec:0,nsec:r*1e6});break}for(;;){const i=await this.next();if(!i)return u;if(u.push(i),i.type==="problem"||i.type==="stamp"&&(0,c.compare)(i.stamp,d)>0||i.type==="message-event"&&(0,c.compare)(i.msgEvent.receiveTime,d)>0)break}return u}async readUntil(r){if(this._abort?.aborted===!0)return;const u=[];if(this._lastIteratorResult?.type==="stamp"&&(0,c.compare)(this._lastIteratorResult.stamp,r)>=0||this._lastIteratorResult?.type==="message-event"&&(0,c.compare)(this._lastIteratorResult.msgEvent.receiveTime,r)>0)return u;for(this._lastIteratorResult&&(u.push(this._lastIteratorResult),this._lastIteratorResult=void 0);;){const d=await this._iter.next();if(this._abort?.aborted===!0)return;if(d.done===!0)break;const i=d.value;if(i.type==="stamp"&&(0,c.compare)(i.stamp,r)>=0){this._lastIteratorResult=i;break}if(i.type==="message-event"&&(0,c.compare)(i.msgEvent.receiveTime,r)>0){this._lastIteratorResult=i;break}u.push(i)}return u}async end(){await this._iter.return?.()}}class v{constructor(r){this._source=r}async initialize(){return await this._source.initialize()}messageIterator(r){return m.sj(this._source.messageIterator(r))}async getBackfillMessages(r,a){return await this._source.getBackfillMessages({...r,abortSignal:a})}getMessageCursor(r,a){const u=this._source.messageIterator(r),d=new g(u,a);return m.sj(d)}}m.Y6.set("abortsignal",o);var w=s(67784),B=s(17417);class C{constructor(r){this.start={sec:0,nsec:0},this.end={sec:0,nsec:0},this.files=r}async initialize(){const a=await(await(await fetch(new URL(s(67460),s.b).toString())).blob()).arrayBuffer();await w.SqliteSqljs.Initialize({wasmBinary:a});const u=this.files.map(p=>new w.SqliteSqljs(p)),d=new w.Rosbag2(u);await d.open(),this.bag=d;const[i,_]=await this.bag.timeRange(),b=await this.bag.readTopics(),S=await this.bag.messageCounts();let x=!1;for(const p of S.values())if(p>0){x=!0;break}if(!x)throw new Error("Bag contains no messages");const M=[],O=[],R=new Map,I=new Map,P={},z={};for(const p of b){const E=S.get(p.name);O.push({name:p.name,schemaName:p.type}),E!=null&&R.set(p.name,{numMessages:E});const y=w.ROS2_TO_DEFINITIONS.get(p.type);if(y==null){M.push({severity:"warn",message:`Topic "${p.name}" has unsupported datatype "${p.type}"`,tip:"ROS 2 .db3 files do not contain message definitions, so only well-known ROS types are supported in Foxglove Studio. As a workaround, you can convert the db3 file to mcap using the mcap CLI. For more information, see: https://foxglove.dev/docs/studio/connection/ros2"});continue}const j=[y],D=(0,B.stringify)(j);I.set(p.type,{name:p.type,definitions:y.definitions}),P[p.name]=D,z[p.name]=j}return this.start=i,this.end=_,{topics:Array.from(O.values()),topicStats:R,start:i,end:_,problems:M,profile:"ros2",datatypes:I,publishersByTopic:new Map}}async*messageIterator(r){if(this.bag==null)throw new Error("Rosbag2DataProvider is not initialized");const a=r.topics;if(a.length===0)return;const u=r.start??this.start,d=r.end??this.end,i=(0,c.add)(d,{sec:0,nsec:1}),_=this.bag.readMessages({startTime:u,endTime:i,topics:a});for await(const b of _)yield{type:"message-event",msgEvent:{topic:b.topic.name,receiveTime:b.timestamp,message:b.value,sizeInBytes:b.data.byteLength,schemaName:b.topic.type}}}async getBackfillMessages(r){return[]}}function A(f){const r=f.file?[f.file]:f.files;if(!r)throw new Error("files required");const a=new C(r),u=new v(a);return m.sj(u)}m.Jj(A)},63136:(e,n,s)=>{"use strict";s.d(n,{Z:()=>l});const l={nextTick:(o,...c)=>{queueMicrotask(()=>{o(...c)})},title:"browser",browser:!0,env:{},argv:[]}},28016:()=>{},33196:()=>{},38087:()=>{},8092:()=>{},50936:()=>{},27464:()=>{},39415:()=>{},87374:()=>{},29285:()=>{}},T={};function t(e){var n=T[e];if(n!==void 0)return n.exports;var s=T[e]={id:e,loaded:!1,exports:{}};return k[e].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}t.m=k,t.x=()=>{var e=t.O(void 0,[8953,3005,2098,3082,5346],()=>t(85909));return e=t.O(e),e},(()=>{var e=[];t.O=(n,s,m,l)=>{if(s){l=l||0;for(var o=e.length;o>0&&e[o-1][2]>l;o--)e[o]=e[o-1];e[o]=[s,m,l];return}for(var c=1/0,o=0;o<e.length;o++){for(var[s,m,l]=e[o],h=!0,g=0;g<s.length;g++)(l&!1||c>=l)&&Object.keys(t.O).every(f=>t.O[f](s[g]))?s.splice(g--,1):(h=!1,l<c&&(c=l));if(h){e.splice(o--,1);var v=m();v!==void 0&&(n=v)}}return n}})(),t.d=(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce((n,s)=>(t.f[s](e,n),n),[])),t.u=e=>""+e+"."+{2098:"0491e97896e712d6f183",3005:"4a7ae5f4422d544b7fca",3082:"00b30feae128156dc550",5346:"fa8b27017510718ceec8",8953:"e4b4427fe714c235cf10"}[e]+".js",t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var s=n.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),(()=>{t.b=self.location+"";var e={4975:1},n=l=>{var[o,c,h]=l;for(var g in c)t.o(c,g)&&(t.m[g]=c[g]);for(h&&h(t);o.length;)e[o.pop()]=1;m(l)};t.f.i=(l,o)=>{e[l]||importScripts(t.p+t.u(l))};var s=self.webpackChunk=self.webpackChunk||[],m=s.push.bind(s);s.push=n})(),(()=>{var e=t.x;t.x=()=>Promise.all([8953,3005,2098,3082,5346].map(t.e,t)).then(e)})();var F=t.x()})();

//# sourceMappingURL=4975.5fc5ce860dafe0d8317a.js.map