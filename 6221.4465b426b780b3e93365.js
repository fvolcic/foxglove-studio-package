(self.webpackChunk=self.webpackChunk||[]).push([[6221],{45415:A=>{A.exports=function(u){const O=u||typeof window<"u"&&window;return!!(O&&(O.navigator.userAgent.match(/Chromatic/)||O.location.href.match(/chromatic=true/)))}},76221:(A,j,u)=>{"use strict";u.r(j),u.d(j,{default:()=>ie});var O=u(52322),L=u(47746),i=u(34651),Z=u(5649),I=u(21023),o=u(2784);function B(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function P(){}var x=function(){return x=Object.assign||function(e){for(var t,f=1,r=arguments.length;f<r;f++){t=arguments[f];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},x.apply(this,arguments)};function G(e){var t=e.width,f=e.height,r=e.value,l=e.defaultValue,k=e.language,y=e.theme,m=e.options,W=e.overrideServices,U=e.editorWillMount,w=e.editorDidMount,T=e.editorWillUnmount,N=e.onChange,p=e.className,E=e.original,d=(0,o.useRef)(null),a=(0,o.useRef)(null),S=(0,o.useRef)(null),D=(0,o.useRef)(null),n=B(t),c=B(f),v=(0,o.useMemo)(function(){return{width:n,height:c}},[n,c]),b=function(){var s=U(i);return s||{}},h=function(){w(a.current,i);var s=a.current.getModel().modified;S.current=s.onDidChangeContent(function(F){D.current||N(s.getValue(),F)})},R=function(){T(a.current,i)},g=function(){var s=r??l,F=i.editor.createModel(E,k),V=i.editor.createModel(s,k);a.current.setModel({original:F,modified:V})};return(0,o.useEffect)(function(){d.current&&(b(),a.current=i.editor.createDiffEditor(d.current,x(x(x({},p?{extraEditorClassName:p}:{}),m),y?{theme:y}:{}),W),g(),h())},[]),(0,o.useEffect)(function(){a.current&&a.current.updateOptions(x(x({},p?{extraEditorClassName:p}:{}),m))},[p,m]),(0,o.useEffect)(function(){a.current&&a.current.layout()},[t,f]),(0,o.useEffect)(function(){if(a.current){var s=a.current.getModel(),F=s.original,V=s.modified;i.editor.setModelLanguage(F,k),i.editor.setModelLanguage(V,k)}},[k]),(0,o.useEffect)(function(){if(a.current){var s=a.current.getModel().modified;D.current=!0,a.current.getModifiedEditor().pushUndoStop(),s.pushEditOperations([],[{range:s.getFullModelRange(),text:r}]),a.current.getModifiedEditor().pushUndoStop(),D.current=!1}},[r]),(0,o.useEffect)(function(){i.editor.setTheme(y)},[y]),(0,o.useEffect)(function(){if(a.current){var s=a.current.getModel().original;E!==s.getValue()&&s.setValue(E)}},[E]),(0,o.useEffect)(function(){return function(){if(a.current){R(),a.current.dispose();var s=a.current.getModel(),F=s.original,V=s.modified;F&&F.dispose(),V&&V.dispose()}S.current&&S.current.dispose()}},[]),o.createElement("div",{ref:d,style:v,className:"react-monaco-editor-container"})}G.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:P,editorDidMount:P,editorWillUnmount:P,onChange:P,className:null};const ue=null;var C=function(){return C=Object.assign||function(e){for(var t,f=1,r=arguments.length;f<r;f++){t=arguments[f];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},C.apply(this,arguments)},J=function(e,t){var f={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(f[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(f[r[l]]=e[r[l]]);return f};function K(e){var t=e.width,f=e.height,r=e.value,l=e.defaultValue,k=e.language,y=e.theme,m=e.options,W=e.overrideServices,U=e.editorWillMount,w=e.editorDidMount,T=e.editorWillUnmount,N=e.onChange,p=e.className,E=(0,o.useRef)(null),d=(0,o.useRef)(null),a=(0,o.useRef)(null),S=(0,o.useRef)(null),D=B(t),n=B(f),c=(0,o.useMemo)(function(){return{width:D,height:n}},[D,n]),v=function(){var g=U(i);return g||{}},b=function(){w(d.current,i),a.current=d.current.onDidChangeModelContent(function(g){S.current||N(d.current.getValue(),g)})},h=function(){T(d.current,i)},R=function(){var g=r!==null?r:l;if(E.current){var s=C(C({},m),v());d.current=i.editor.create(E.current,C(C(C({value:g,language:k},p?{extraEditorClassName:p}:{}),s),y?{theme:y}:{}),W),b()}};return(0,o.useEffect)(R,[]),(0,o.useEffect)(function(){if(d.current){var g=d.current.getModel();S.current=!0,d.current.pushUndoStop(),g.pushEditOperations([],[{range:g.getFullModelRange(),text:r}],void 0),d.current.pushUndoStop(),S.current=!1}},[r]),(0,o.useEffect)(function(){if(d.current){var g=d.current.getModel();i.editor.setModelLanguage(g,k)}},[k]),(0,o.useEffect)(function(){if(d.current){var g=m.model,s=J(m,["model"]);d.current.updateOptions(C(C({},p?{extraEditorClassName:p}:{}),s))}},[p,m]),(0,o.useEffect)(function(){d.current&&d.current.layout()},[t,f]),(0,o.useEffect)(function(){i.editor.setTheme(y)},[y]),(0,o.useEffect)(function(){return function(){if(d.current){h(),d.current.dispose();var g=d.current.getModel();g&&g.dispose()}a.current&&a.current.dispose()}},[]),o.createElement("div",{ref:E,style:c,className:"react-monaco-editor-container"})}K.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:P,editorDidMount:P,editorWillUnmount:P,onChange:P,className:null};const Q=K;var X=u(62515),Y=u(16003);async function q(e){const t=await u.e(9691).then(u.t.bind(u,29691,23)),f=await u.e(4048).then(u.t.bind(u,44048,23));return t.format(e,{parser:"typescript",plugins:[f]})}const _=q;var ee=u(64942),te=u(29176),z=u(11701),ne=u(36537);const oe=[{name:"vs-studio-dark",theme:{base:"vs-dark",inherit:!0,rules:[{foreground:"6c6783",token:"comment"},{foreground:"eba800",token:"string"},{foreground:"9987ff",token:"constant.numeric"},{foreground:"9987ff",token:"constant.language"},{foreground:"9987ff",token:"constant.character"},{foreground:"9987ff",token:"constant.other"},{foreground:"e05ffa",token:"keyword"},{foreground:"e05ffa",token:"storage"},{foreground:"45a5ff",fontStyle:"italic",token:"storage.type"},{foreground:"6bd66f",fontStyle:"underline",token:"entity.name.class"},{foreground:"6bd66f",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"6bd66f",token:"entity.name.function"},{foreground:"fc8942",fontStyle:"italic",token:"variable.parameter"},{foreground:"db3553",token:"entity.name.tag"},{foreground:"6bd66f",token:"entity.other.attribute-name"},{foreground:"45a5ff",token:"support.function"},{foreground:"45a5ff",token:"support.constant"},{foreground:"45a5ff",fontStyle:"italic",token:"support.type"},{foreground:"45a5ff",fontStyle:"italic",token:"support.class"},{foreground:"f0f0f0",background:"ff6b82",token:"invalid"},{foreground:"f0f0f0",background:"6858f5",token:"invalid.deprecated"}],colors:{"editor.foreground":"#F7F7F3C4","editor.background":"#08080A","editor.selectionBackground":"#F7F7F326","editor.lineHighlightBackground":"#F7F7F31A","editorCursor.foreground":"#F7F7F3C4","editorWhitespace.foreground":"#3B3A32"}}},{name:"vs-studio-light",theme:{base:"vs",inherit:!0,rules:[{foreground:"eefff8",background:"2f8963",token:"markup.inserted.diff"},{foreground:"eefff8",background:"2f8963",token:"meta.diff.header.to-file"},{foreground:"fff3ee",background:"c86a44",token:"markup.deleted.diff"},{foreground:"fff3ee",background:"c86a44",token:"meta.diff.header.from-file"},{foreground:"008000",token:"comment"},{foreground:"000000",token:"variable"},{foreground:"0000ff",token:"keyword"},{foreground:"a31515",token:"constant.numeric"},{foreground:"000000",token:"constant"},{foreground:"000000",token:"constant.language"},{foreground:"0000ff",token:"constant.language.boolean"},{foreground:"a31515",token:"string"},{foreground:"26b31a",token:"constant.character.escape"},{foreground:"26b31a",token:"string source"},{foreground:"0000ff",token:"meta.preprocessor"},{foreground:"0000ff",token:"keyword.control.import"},{foreground:"000000",token:"entity.name.function"},{foreground:"000000",token:"keyword.other.name-of-parameter.objc"},{foreground:"000000",token:"entity.name.type"},{foreground:"0000ff",token:"storage.type"},{foreground:"0000ff",token:"storage.modifier"},{foreground:"70727e",token:"storage.type.method"},{foreground:"000000",token:"support.function"},{foreground:"000000",token:"support.class"},{foreground:"000000",token:"support.type"},{foreground:"000000",token:"support.constant"},{foreground:"000000",token:"support.variable"},{foreground:"687687",token:"keyword.operator.js"},{background:"e1a09f",token:"invalid"},{background:"ffd0d0",token:"invalid.deprecated.trailing-whitespace"},{background:"427ff530",token:"text source"},{background:"427ff530",token:"string.unquoted"},{foreground:"68685b",token:"meta.xml-processing"},{foreground:"68685b",token:"declaration.xml-processing"},{foreground:"a31515",token:"meta.doctype"},{foreground:"a31515",token:"declaration.doctype"},{foreground:"0000ff",token:"meta.tag"},{foreground:"0000ff",token:"declaration.tag"},{foreground:"a31515",token:"entity.name.tag"},{foreground:"ff0000",token:"entity.other.attribute-name"},{foreground:"0000ff",token:"string.quoted.double.xml"},{foreground:"0000ff",token:"string.quoted.double.html"},{foreground:"0c07ff",token:"markup.heading"},{foreground:"000000",token:"markup.quote"},{foreground:"b90690",token:"markup.list"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#9DA7C3","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}}}];var M=u(2784);const re=Z.T.codeEditorService.get(),H=(e,t)=>{if(t){const f=(0,ne.N)(t);if(f.endLineNumber!=null&&f.endColumn!=null)e.setSelection(t),e.revealRangeInCenter(t,1);else{const r={lineNumber:t.startLineNumber,column:t.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}}},$=(0,ee.v)(),ie=({autoFormatOnSave:e,script:t,setScriptCode:f,save:r,setScriptOverride:l,rosLib:k,typesLib:y})=>{const m=M.useRef(null),W=M.useRef(e);W.current=e;const U=(0,L.Z)().palette.mode==="dark"?"vs-studio-dark":"vs-studio-light";M.useEffect(()=>{const n=i.languages.typescript.typescriptDefaults.addExtraLib(k,`file:///node_modules/@types/${$.rosLib.fileName}`);return()=>{n.dispose()}},[k]),M.useEffect(()=>{const n=i.Uri.parse("file:///studio_script/generatedTypes.ts"),c=i.editor.getModel(n)??i.editor.createModel(y,"typescript",n);c.setValue(y),c.updateOptions({tabSize:2})},[y]),re.doOpenEditor=M.useCallback((n,c)=>{const v=i.editor.getModel(c.resource);if(!v)return n;if(v.uri.path===t?.filePath){H(n,c.options.selection);return}return l({filePath:v.uri.path,code:v.getValue(),readOnly:!0,selection:c.options?.selection}),n},[t,l]),M.useEffect(()=>{const n=m.current;if(!n||!t)return;const c=I.basename(t.filePath),v=i.Uri.parse(`file://${z.wd}${c}`),b=i.editor.getModel(v)??i.editor.createModel(t.code,"typescript",v);b.getValue()!==t.code&&b.setValue(t.code),n.setModel(b),H(n,t.selection)},[t]);const w=M.useMemo(()=>({wordWrap:"on",minimap:{enabled:!1},readOnly:t?.readOnly}),[t]),T=M.useCallback(n=>{if(!t)return;for(const h of oe)n.editor.defineTheme(h.name,h.theme);n.languages.typescript.typescriptDefaults.setEagerModelSync(!0),n.languages.typescript.javascriptDefaults.setEagerModelSync(!0),n.languages.registerDocumentFormattingEditProvider("typescript",{provideDocumentFormattingEdits:async h=>{try{return[{range:h.getFullModelRange(),text:await _(h.getValue())}]}catch{return[]}}}),(0,te.Z)()&&n.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0}),$.declarations.forEach(h=>n.languages.typescript.typescriptDefaults.addExtraLib(h.sourceCode,`file:///node_modules/@types/${h.fileName}`)),$.utilityFiles.forEach(h=>{const R=i.Uri.parse(`file://${h.filePath}`);(n.editor.getModel(R)??n.editor.createModel(h.sourceCode,"typescript",R)).updateOptions({tabSize:2})});const c=I.basename(t.filePath),v=i.Uri.parse(`file://${z.wd}${c}`),b=n.editor.getModel(v)??n.editor.createModel(t.code,"typescript",v);return b.updateOptions({tabSize:2}),{model:b}},[t]),N=M.useCallback(async()=>{const n=m.current?.getModel();n&&t&&!t.readOnly&&(W.current&&await m.current?.getAction("editor.action.formatDocument").run(),r(n.getValue()))},[r,t]),p=(0,o.useRef)(N);p.current=N;const E=M.useCallback(n=>{m.current=n,n.addAction({id:"ctrl-s",label:"Save current node",keybindings:[i.KeyMod.CtrlCmd|i.KeyCode.KeyS],run:async()=>await p.current()})},[]),d=(0,Y.Z)(f),a=(0,o.useCallback)(n=>d.current(n),[d]),S=(0,o.useCallback)((n,c)=>{n!=null&&c!=null&&m.current?.layout({width:n,height:c})},[]),{ref:D}=(0,X.NB)({refreshRate:0,refreshMode:"debounce",onResize:S});return t?(0,O.jsx)("div",{ref:D,style:{width:"100%",height:"100%"},children:(0,O.jsx)(Q,{language:"typescript",theme:U,editorWillMount:T,editorDidMount:E,options:w,onChange:a})}):null}},29176:(A,j,u)=>{"use strict";u.d(j,{Z:()=>i});var O=u(45415),L=u.n(O);function i(){return navigator.userAgent.includes("PuppeteerTestingChrome")||L()()}}}]);

//# sourceMappingURL=6221.4465b426b780b3e93365.js.map