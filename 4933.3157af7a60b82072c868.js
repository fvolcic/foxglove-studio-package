"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4933],{96133:(te,I,e)=>{e.d(I,{J:()=>n});function n(j,O){if(typeof j.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(j.value==null)return!1;let R=O;for(const z of j.path)if(typeof R!="object"||R==null||(R=R[z],R==null))return!1;return R!=null&&R==j.value}},81187:(te,I,e)=>{e.d(I,{Iq:()=>V,wm:()=>_});var n=e(76635),j=e(2784),O=e(57051),R=e(59506),z=e(88665),X=e.n(z);function W(f,{initiallyTrue:l}){const o=(0,j.useRef)(l?void 0:f),g=!X()(o.current,f);return o.current=f,g}var J=e(51668),Q=e(36423),H=e(35528),K=e(96133),F=e(60351),Y=e(94670),B=e(1012);function V(f){const{topics:l,datatypes:o}=R.Ui(),{globalVariables:g}=(0,Q.Z)(),u=(0,O.O4)(f),Z=(0,j.useMemo)(()=>{const a={};for(const s of u){const i=(0,B.ZP)(s);i&&(a[s]=k(i,g))}return a},[g,u]),b=(0,J.Z)(Z),T=(0,j.useMemo)(()=>{const a=(0,H.N_)(l),s=new Set,i=[];for(const M of u){const r=(0,B.ZP)(M);if(r){if(s.has(r.topicName))continue;s.add(r.topicName);const h=a[r.topicName];h&&i.push(h)}}return i},[l,u]),N=(0,J.Z)(T),m=(0,j.useMemo)(()=>{const a=new Map;function s(i,M){if(M.includes(i))return;const r=o.get(i);if(r){a.set(i,r);for(const h of r.definitions)(h.isComplex===!0||(0,H.bV)(h.name)!=null)&&s(h.type,[...M,i])}}for(const{schemaName:i}of N.values())i!=null&&s(i,[]);return a},[o,N]),y=(0,J.Z)(m),v=(0,j.useRef)({});if(W([N,y],{initiallyTrue:!0})&&(v.current={}),W([b],{initiallyTrue:!1}))for(const[a,s]of Object.entries(v.current)){const i=b[a];(!i||!(0,n.isEqual)(s.filledInPath,i))&&delete v.current[a]}return(0,j.useCallback)((a,s)=>{if(!u.includes(a))throw new Error(`path (${a}) was not in the list of cached paths`);const i=b[a];if(!i)return;const M=v.current[a]=v.current[a]??{filledInPath:i,weakMap:new WeakMap},{weakMap:r}=M;if(!r.has(s)){const S=q(s,i,N,y);return r.set(s,S),S}return r.get(s)},[y,b,u,N])}function k(f,l){return{...f,messagePath:f.messagePath.map(o=>{if(o.type==="slice"){const g=typeof o.start=="object"?Number(l[o.start.variableName]):o.start,u=typeof o.end=="object"?Number(l[o.end.variableName]):o.end;return{...o,start:isNaN(g)?0:g,end:isNaN(u)?1/0:u}}else if(o.type==="filter"&&typeof o.value=="object"){let g;const u=l[o.value.variableName];return(typeof u=="number"||typeof u=="string")&&(g=u),{...o,value:g}}return o})}}function q(f,l,o,g){const u=(0,Y.pb)(g),Z=(0,H.N_)(o)[l.topicName];if(!Z||f.topic!==l.topicName)return;for(const m of l.messagePath)if(m.type==="filter"){if(!(0,K.J)(m,f.message))return[]}else break;const b=[];function T(m,y,v,a){if(m==null||a==null)return;const s=l.messagePath[y],i=l.messagePath[y+1],M=a.structureType==="primitive"&&a.primitiveType==="json";if(s)if(s.type==="name"&&a.structureType==="message"){const r=a.nextByName[s.name],S=!(r?.structureType==="primitive"&&r.primitiveType==="json")&&r?r:{structureType:"primitive",primitiveType:"json",datatype:""};T(m[s.name],y+1,`${v}.${s.repr}`,S)}else if(s.type==="slice"&&(a.structureType==="array"||M)){const{start:r,end:h}=s;if(typeof r=="object"||typeof h=="object")throw new Error("getMessagePathDataItems  only works on paths where global variables have been filled in");const S=r,L=h;if(typeof S!="number"||typeof L!="number")return;const t=m.length;for(let c=S;c<=Math.min(L,t-1);c++){const d=c>=0?c:t+c,p=m[d];if(p==null)continue;let P;if(i&&i.type==="filter")P=`${v}[:]`;else if(typeof p=="object"){const $=F.H.find(x=>x in p);$!=null?P=`${v}[:]{${$}==${p[$]}}`:P=`${v}[${c}]`}else P=`${v}[${c}]`;T(p,y+1,P,!M&&a.structureType==="array"?a.next:a)}}else s.type==="filter"?(0,K.J)(s,m)&&T(m,y+1,`${v}{${s.repr}}`,a):M&&s.type==="name"?T(m[s.name],y+1,`${v}.${s.repr}`,{structureType:"primitive",primitiveType:"json",datatype:""}):console.warn(`Unknown pathItem.type ${s.type} for structureType: ${a.structureType}`);else{let r;const h=l.messagePath[y-1];if(h&&h.type==="name"){const S=h.name;r=(0,H.Hh)(g)[a.datatype]?.[S]?.[m]}b.push({value:m,path:v,constantName:r})}}const N=Z.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:u[Z.schemaName];return N&&T(f.message,0,(0,B.dH)(l.topicName),N),b}function _(f){const l=(0,O.O4)(f),o=V(l);return(0,j.useCallback)(g=>{const u={};for(const Z of l){const b=(0,B.ZP)(Z);if(!b){u[Z]=[];continue}const T=g[b.topicName];if(!T)continue;const N=[];u[Z]=N;for(const m of T){const y=o(Z,m);y&&N.push({messageEvent:m,queriedData:y})}}return u},[l,o])}},44933:(te,I,e)=>{e.r(I),e.d(I,{default:()=>L});var n=e(52322),j=e(73868),O=e(83422),R=e(59506),z=e(29268),X=e(35870),W=e(1012),J=e(81187),Q=e(14075),H=e(76479),K=e(77075),F=e(2784),Y=e(71963),B=e(59169),V=e(23468),k=e(31373),q=e(36673),_=e(24544),f=e(66198),l=e(41939),o=e(68434),g=e(14875),u=e(80078),Z=e(76635),b=e(87274),T=e(8740),N=e(93812);function m(t){return t.replace(/\./g,"-")}var y=e(2784);const v=(0,T.ZL)()(t=>({objectCell:{fontStyle:"italic",cursor:"pointer"},iconButton:{marginTop:t.spacing(-.5),marginLeft:t.spacing(-.5),"&:hover":{backgroundColor:"transparent"}}}));function a({row:t,accessorPath:c,children:d}){const{classes:p}=v(),[P,$]=y.useState(!1),x=y.useCallback(()=>$(E=>!E),[]);return t.isExpanded||P?(0,n.jsxs)("div",{children:[P&&(0,n.jsx)(f.Z,{size:"small",onClick:x,className:p.iconButton,children:(0,n.jsx)(B.Z,{fontSize:"small"})}),d]}):(0,n.jsx)("span",{className:p.objectCell,"data-testid":`expand-cell-${m(c)}-${t.index}`,onClick:x,children:"Object"})}var s=e(2784);const i=(0,T.ZL)()((t,c,d)=>({table:{border:"none",width:"100%",borderCollapse:"collapse",borderSpacing:0},tableRow:{svg:{opacity:.6},"&:nth-child(even)":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.focus,[`.${d.tableData}`]:{backgroundColor:t.palette.action.hover,cursor:"pointer"},svg:{opacity:.8}},[`.${d.tableHeader}:first-of-type`]:{paddingTop:t.spacing(.5),paddingBottom:t.spacing(.5)}},tableData:{padding:`${t.spacing(.5)} !important`,whiteSpace:"nowrap",textOverflow:"ellipsis",verticalAlign:"top",border:`1px solid ${t.palette.divider}`,lineHeight:"1.3em"},tableHeader:{color:t.palette.text.primary,verticalAlign:"top",border:`1px solid ${t.palette.divider}`,lineHeight:"1.3em",borderLeftColor:"transparent",borderRightColor:"transparent",padding:t.spacing(.5),fontWeight:"bold !important",cursor:"pointer",width:"auto",textAlign:"left","&#expander":{width:28}},sortAsc:{borderBottomColor:t.palette.primary.main},sortDesc:{borderTopColor:t.palette.primary.main},iconButton:{margin:t.spacing(-.5),"&:hover":{backgroundColor:"transparent"}}}));function M(t,c,d){const p=t.toJSON?.()??t,P=[...Object.keys(p).map(x=>{const E=c.length!==0?`${c}.${x}`:x;return{Header:x,accessor:x,id:E,Cell({value:D,row:G}){return Array.isArray(D)&&typeof D[0]!="object"?JSON.stringify(D):typeof D=="object"&&D!=null?(0,n.jsx)(a,{row:G,accessorPath:E,children:(0,n.jsx)(r,{value:D,accessorPath:c})}):`${D}`}}})],$=({row:x})=>(0,n.jsx)(f.Z,{className:d,...x.getToggleRowExpandedProps(),size:"small","data-testid":`expand-row-${x.index}`,children:x.isExpanded?(0,n.jsx)(B.Z,{fontSize:"small"}):(0,n.jsx)(Y.Z,{fontSize:"small"})});return c.length===0&&P.unshift({id:"expander",Cell:$}),P}function r({value:t,accessorPath:c}){const d=c.length>0,{classes:p,cx:P}=i(),$=s.useMemo(()=>{if(t==null||typeof t!="object"||Array.isArray(t)&&typeof t[0]!="object"&&t[0]!=null)return[];const C=Array.isArray(t)?t[0]??{}:t;return M(C,c,p.iconButton)},[c,p.iconButton,t]),x=s.useMemo(()=>Array.isArray(t)?t:[t],[t]),E=(0,b.useTable)({columns:$,data:x,autoResetExpanded:!1,initialState:{pageSize:30}},b.useSortBy,b.useExpanded,d?Z.noop:b.usePagination);if(typeof t!="object"||t==null||!d&&Array.isArray(t)&&typeof t[0]!="object")return(0,n.jsx)(z.Z,{children:"Cannot render primitive values in a table. Try using the Raw Messages panel instead."});const{getTableProps:D,getTableBodyProps:G,headerGroups:w,page:ee,prepareRow:oe,rows:re,canPreviousPage:ne,canNextPage:se,pageOptions:ie,pageCount:le,gotoPage:ae,nextPage:ce,previousPage:de,setPageSize:pe,state:{pageIndex:fe,pageSize:ue}}=E;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("table",{className:p.table,...D(),children:[(0,n.jsx)("thead",{children:w.map((C,U)=>(0,F.createElement)("tr",{className:p.tableRow,...C.getHeaderGroupProps(),key:U},C.headers.map(A=>(0,F.createElement)("th",{className:P(p.tableHeader,{[p.sortAsc]:A.isSorted&&!(A.isSortedDesc??!1),[p.sortDesc]:A.isSorted&&(A.isSortedDesc??!1)}),id:A.id,...A.getHeaderProps(A.getSortByToggleProps()),key:A.id,"data-testid":`column-header-${m(A.id)}`},A.render("Header")))))}),(0,n.jsx)("tbody",{...G(),children:(d?re:ee).map(C=>(oe(C),(0,F.createElement)("tr",{className:p.tableRow,...C.getRowProps(),key:C.index},C.cells.map((U,A)=>(0,F.createElement)("td",{className:p.tableData,...U.getCellProps(),key:A},U.render("Cell"))))))})]}),!d&&(0,n.jsx)(l.Z,{maxWidth:"xs",disableGutters:!0,children:(0,n.jsxs)(N.Z,{direction:"row",flexWrap:"wrap",gap:1,paddingX:.5,paddingTop:.5,alignItems:"center",children:[(0,n.jsx)(f.Z,{onClick:()=>ae(0),disabled:!ne,children:(0,n.jsx)(q.Z,{fontSize:"small"})}),(0,n.jsx)(f.Z,{onClick:()=>de(),disabled:!ne,children:(0,n.jsx)(V.Z,{fontSize:"small"})}),(0,n.jsxs)(o.Z,{flex:"auto",variant:"inherit",align:"center",noWrap:!0,children:["Page"," ",(0,n.jsxs)("strong",{children:[fe+1," of ",ie.length]})]}),(0,n.jsx)(f.Z,{onClick:()=>ce(),disabled:!se,children:(0,n.jsx)(k.Z,{fontSize:"small"})}),(0,n.jsx)(f.Z,{onClick:()=>ae(le-1),disabled:!se,children:(0,n.jsx)(_.Z,{fontSize:"small"})}),(0,n.jsx)(g.Z,{value:ue,size:"small",onChange:C=>pe(Number(C.target.value)),MenuProps:{MenuListProps:{dense:!0}},children:[10,20,30,40,50].map(C=>(0,n.jsx)(u.Z,{value:C,children:`Show ${C}`},C))})]})})]})}var h=e(2784);function S({config:t,saveConfig:c}){const{topicPath:d}=t,p=h.useCallback(ee=>{c({topicPath:ee})},[c]),$=h.useMemo(()=>(0,W.ZP)(d),[d])?.topicName??"",x=(0,R.V7)({topics:[$],historySize:1})[$],E=(0,J.Iq)([d]),D=x?.[0],G=D?E(d,D)??[]:[],w=G[0];return(0,n.jsxs)(j.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,n.jsx)(H.Z,{children:(0,n.jsx)(O.Z,{width:"100%",lineHeight:"20px",children:(0,n.jsx)(X.ZP,{index:0,path:d,onChange:p,inputStyle:{height:20}})})}),d.length===0&&(0,n.jsx)(z.Z,{children:"No topic selected"}),d.length!==0&&G.length===0&&(0,n.jsx)(z.Z,{children:"Waiting for next message"}),d.length!==0&&w&&(0,n.jsx)(j.Z,{overflow:"auto",fontFamily:K.R.MONOSPACE,children:(0,n.jsx)(r,{value:w.value,accessorPath:""})})]})}S.panelType="Table",S.defaultConfig={topicPath:""};const L=(0,Q.Z)(S)}}]);

//# sourceMappingURL=4933.3157af7a60b82072c868.js.map