(self.webpackChunk=self.webpackChunk||[]).push([[1194],{97287:(k,L,t)=>{"use strict";t.r(L),t.d(L,{default:()=>Te});var e=t(52322),A=t(75109),m=t(68234),v=t(76665),g=t(76635),o=t(2784),u=t(59506),P=t(29268),p=t(14075),V=t(82044),G=t(76479),Z=t(93812),s=t(39367),a=t(21580),h=t(96511),c=t(65992),d=t(6281),I=t(83533),x=t(98214),F=t(66198),w=t(74073),X=t(20379),$=t(68434),oe=t(60985),ae=t(24330),ie=t.n(ae),le=t(36721),_=t(11234),B=t(39192);const ee=.1,te=["b","br","center","code","em","font","i","strong","table","td","th","tr","tt","u","h1","h2","h3","h4","h5","h6","H1","H2","H3","H4","H5","H6"];function ne(n){return{__html:ie()(n,{allowedTags:te,allowedAttributes:{font:["color","size"],td:["colspan"],th:["colspan"]}})}}const re=(0,c.ZP)("div",{shouldForwardProp:n=>n!=="splitFraction"})(({theme:n,splitFraction:f})=>({position:"absolute",top:0,bottom:0,width:12,marginLeft:-6,cursor:"col-resize",left:`${100*f}%`,"&:hover, &:active, &:focus":{outline:"none","&::after":{content:'""',position:"absolute",top:0,bottom:0,left:6,marginLeft:-2,width:4,backgroundColor:n.palette.action.focus}}})),ce=(0,c.ZP)(d.Z)({"@media (pointer: fine)":{".MuiTableRow-root .MuiIconButton-root":{visibility:"hidden"},".MuiTableRow-root:hover .MuiIconButton-root":{visibility:"visible"}}}),de=(0,c.ZP)(I.Z)(({theme:n})=>({backgroundColor:n.palette.background.paper})),ue=(0,c.ZP)(x.Z)(({theme:n})=>({"h1, h2, h3, h4, h5, h6":{...n.typography.subtitle2,fontWeight:800,margin:0}})),q=(0,c.ZP)(F.Z)({"&:hover, &:active, &:focus":{backgroundColor:"transparent"}}),se=new RegExp(`<(${te.join("|")})`),fe=(0,oe.P1)(n=>n,n=>n.values.map(({key:f,value:r})=>({key:f,keyHtml:se.test(f)?ne(f):void 0,value:r,valueHtml:se.test(r)?ne(r):void 0})));function me(n){const{onChangeSplitFraction:f,info:r,topicToRender:D,numericPrecision:O,openSiblingPanel:S,splitFraction:b=.5}=n,C=(0,o.useRef)(null),j=(0,o.useCallback)(y=>{U(!0),y.preventDefault()},[]),H=(0,o.useCallback)(()=>U(!1),[]),W=(0,o.useCallback)(y=>{if(!C.current)return;const{left:T,right:E}=C.current.getBoundingClientRect(),M=(0,g.clamp)((y.clientX-T)/(E-T),ee,1-ee);f(M)},[f]),[R,U]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(R)return window.addEventListener("mousemove",W),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",H)}},[W,H,R]);const K=(0,o.useCallback)((y,T,E)=>{if(y)return(0,e.jsx)(ue,{dangerouslySetInnerHTML:y});let M=T;return O!=null&&he(T)&&(M=parseFloat(T).toFixed(O)),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(x.Z,{padding:"checkbox",children:(0,e.jsxs)(Z.Z,{direction:"row",gap:1,alignItems:"center",flex:"auto",justifyContent:"space-between",children:[M||"\xA0",E]})})})},[O]),J=(0,o.useCallback)(()=>fe(r.status).map(({key:T,value:E,keyHtml:M,valueHtml:Q},i)=>{const l=`${D}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.values[:]{key=="${T}"}.value`;let N;return E.length>0&&(N=isNaN(Number(E))?(0,e.jsx)(q,{title:"Open in State Transitions panel",color:"inherit",size:"small",onClick:()=>(0,_.openSiblingStateTransitionsPanel)(S,l),children:(0,e.jsx)(a.Z,{fontSize:"inherit"})}):(0,e.jsx)(q,{title:"Open in Plot panel",color:"inherit",size:"small","data-testid":"open-plot-icon",onClick:()=>(0,le.openSiblingPlotPanel)(S,l),children:(0,e.jsx)(h.Z,{fontSize:"inherit"})})),(0,e.jsxs)(I.Z,{hover:!0,children:[K(M,T),K(Q,E,N)]},i)}),[r.status,S,K,D]),z={[B.zq.OK]:"success.main",[B.zq.ERROR]:"error.main",[B.zq.WARN]:"warning.main",[B.zq.STALE]:"info.main"};return(0,e.jsxs)("div",{children:[(0,e.jsx)(re,{splitFraction:b,onMouseDown:j,"data-testid-resizehandle":!0}),(0,e.jsx)(ce,{size:"small",ref:C,children:(0,e.jsxs)(w.Z,{children:[(0,e.jsxs)(I.Z,{style:{height:0},children:[(0,e.jsx)(x.Z,{padding:"none",style:{width:`${100*b}%`,borderRight:"none"}}),(0,e.jsx)(x.Z,{padding:"none",style:{borderLeft:"none"}})]}),(0,e.jsx)(de,{children:(0,e.jsx)(x.Z,{variant:"head","data-testid":"DiagnosticStatus-display-name",colSpan:2,children:(0,e.jsx)(X.Z,{arrow:!0,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($.Z,{variant:"body2",children:["Hardware ID: ",(0,e.jsx)("code",{children:r.status.hardware_id})]}),(0,e.jsxs)($.Z,{variant:"body2",children:["Name: ",(0,e.jsx)("code",{children:r.status.name})]})]}),children:(0,e.jsx)($.Z,{color:z[r.status.level],variant:"subtitle1",fontWeight:800,children:r.displayName})})})}),(0,e.jsx)(I.Z,{hover:!0,children:(0,e.jsx)(x.Z,{colSpan:2,padding:"checkbox",children:(0,e.jsxs)(Z.Z,{direction:"row",flex:"auto",alignItems:"center",justifyContent:"space-between",gap:1,children:[(0,e.jsx)($.Z,{flex:"auto",color:z[r.status.level],variant:"inherit",fontWeight:800,children:r.status.message}),(0,e.jsx)(Z.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:1,children:(0,e.jsx)(q,{title:"Open in State Transitions panel",size:"small",onClick:()=>(0,_.openSiblingStateTransitionsPanel)(S,`${D}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.message`),children:(0,e.jsx)(a.Z,{fontSize:"inherit"})})})]})})}),J()]})})]})}function he(n){return n[0]==="0"&&n.length>1&&(n[1]==="x"||n[1]==="X"||n[1]==="o"||n[1]==="O")?!1:!isNaN(parseFloat(n))&&isFinite(Number(n))}var ge=t(30165),pe=t(36537);function ve(n,f){let r=!1;for(const D of f){const{status:O}=D.message;if(O.length!==0)for(const S of O){const b=(0,pe.N)(S).hardware_id??"",C=S.name,j=n.get(b);j?!j.has(C)&&C&&(r=!0,j.add(C)):(r=!0,n.set(b,new Set([C])))}}return r?new Map(n):n}const xe=()=>new Map;function Se(n){const f=(0,o.useMemo)(()=>n?[n]:[],[n]);return(0,u.CC)({topics:f,restore:xe,addMessages:ve})}var ye=t(99549);const Pe=["diagnostic_msgs/DiagnosticArray","diagnostic_msgs/msg/DiagnosticArray","ros.diagnostic_msgs.DiagnosticArray"];function je(n){const{saveConfig:f,config:r}=n,{topics:D}=(0,u.Ui)(),{openSiblingPanel:O}=(0,V.R)(),{selectedHardwareId:S,selectedName:b,splitFraction:C,topicToRender:j,numericPrecision:H}=r,W=(0,s.W0)(),R=(0,o.useMemo)(()=>{const i=D.filter(l=>l.schemaName!=null&&Pe.includes(l.schemaName)).map(l=>l.name);return(0,g.uniq)([...i])},[D]),U=(0,o.useMemo)(()=>R.includes(j)?j:void 0,[R,j]),K=(0,ye.Z)(U),J=Se(U),z=(0,o.useMemo)(()=>{const i=[];for(const[l,N]of J){l&&i.push({label:l,hardwareId:l,name:void 0});for(const Y of N)if(Y){const Ce=(0,B.Gf)(l,Y);i.push({label:Ce,hardwareId:l,name:Y})}}return i},[J]),y=(0,o.useMemo)(()=>S!=null?(0,B.Gf)(S,b??""):void 0,[S,b]),T=(0,o.useMemo)(()=>z.find(i=>i.label===y)??null,[z,y]),E=(0,o.useMemo)(()=>{const i=K.get(S??""),l=[];if(i!=null)for(const N of i.values())(b==null||b===N.status.name)&&l.push(N);return l},[K,S,b]),M=z.length>0?"No matches":"Waiting for diagnostics...",Q=(0,o.useCallback)(i=>{if(i.action!=="update")return;const{path:l,value:N}=i.payload;f((0,v.ZP)(Y=>(0,g.set)(Y,l.slice(1),N)))},[f]);return(0,o.useEffect)(()=>{W({actionHandler:Q,nodes:(0,ge.N)(j,H,R)})},[Q,R,j,H,W]),(0,e.jsxs)(Z.Z,{flex:"auto",overflow:"hidden",children:[(0,e.jsx)(G.Z,{children:(0,e.jsx)(A.Z,{disablePortal:!0,blurOnSelect:!0,disabled:z.length===0,options:z,value:T??null,noOptionsText:M,onChange:(i,l)=>{if(!l){f({selectedHardwareId:void 0,selectedName:void 0});return}f({selectedHardwareId:l.hardwareId,selectedName:l.name})},fullWidth:!0,size:"small",renderInput:i=>(0,e.jsx)(m.Z,{variant:"standard",...i,InputProps:{...i.InputProps,disableUnderline:!0},placeholder:y??"Filter"})})}),E.length>0?(0,e.jsx)(Z.Z,{flex:"auto",overflowY:"auto",children:(0,g.sortBy)(E,({status:i})=>i.name.toLowerCase()).map(i=>(0,e.jsx)(me,{info:i,splitFraction:C,onChangeSplitFraction:l=>n.saveConfig({splitFraction:l}),topicToRender:j,numericPrecision:H,openSiblingPanel:O},i.id))}):y?(0,e.jsxs)(P.Z,{children:["Waiting for diagnostics from ",(0,e.jsx)("code",{children:y})]}):(0,e.jsx)(P.Z,{children:"No diagnostic node selected"})]})}const be={topicToRender:"/diagnostics"},Te=(0,p.Z)(Object.assign(je,{panelType:"DiagnosticStatusPanel",defaultConfig:be}))},30165:(k,L,t)=>{"use strict";t.d(L,{N:()=>A,Y:()=>e});function e(m,v,g){const o=g.map(p=>({label:p,value:p})),u=g.includes(v);u||o.unshift({value:v,label:v});const P=u?void 0:`Topic ${v} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:v,error:P,options:o},sortByLevel:{label:"Sort by level",input:"boolean",value:m.sortByLevel}}}}}function A(m,v,g){const o=g.map(p=>({label:p,value:p})),u=g.includes(m);u||o.unshift({value:m,label:m});const P=u?void 0:`Topic ${m} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:m,error:P,options:o},numericPrecision:{label:"Numeric precision",input:"number",min:0,max:17,precision:0,step:1,placeholder:"auto",value:v}}}}}},99549:(k,L,t)=>{"use strict";t.d(L,{Z:()=>o});var e=t(2784),A=t(59506),m=t(39192);function v(u,P){let p=!1;for(const V of P){const{header:G,status:Z}=V.message;for(const s of Z){const a=(0,m.HE)(s,G.stamp),h=s.hardware_id,c=u.get(h);c==null?(p=!0,u.set(h,new Map([[s.name,a]]))):(p=!0,c.set(s.name,a))}}return p?new Map(u):u}const g=()=>new Map;function o(u){const P=(0,e.useMemo)(()=>u?[u]:[],[u]);return(0,A.CC)({topics:P,restore:g,addMessages:v})}},39192:(k,L,t)=>{"use strict";t.d(L,{ON:()=>o,zq:()=>v,KD:()=>g,HE:()=>V,uE:()=>Z,ep:()=>G,Gf:()=>p});var e=t(76635);function A({options:s,filter:a,getText:h,sort:c=!0}){if(a==null||a==="")return s;const d=a.toLowerCase().replace(/[^a-z0-9]/g,"");if(d.length===0)return s;const I=[];for(const x of s){const F=h(x).toLowerCase();let w=-1,X=0;for(const $ of d){if(w=F.indexOf($,w+1),w===-1)break;X+=w}w!==-1&&I.push({option:x,score:X*F.length})}return c&&I.sort((x,F)=>x.score-F.score),I.map(x=>x.option)}const m=5e3,v={OK:0,WARN:1,ERROR:2,STALE:3},g={0:"ok",1:"warn",2:"error",3:"stale"},o=[0,1,2,3];function u(s){return s.startsWith("/")?s.slice(1):s}function P(s,a){const h=u(s);return a!=null?`|${h}|${a}|`:`|${h}|`}function p(s,a){return a.length>0?s.length>0?`${s}: ${a}`:`${a}`:s.length>0?`${s}`:"(empty)"}function V(s,a){const h=p(s.hardware_id,s.name);let c=s;return s.values.some(({value:d})=>d.length>m)&&(c={...s,values:s.values.map(d=>d.value.length>m?{key:d.key,value:(0,e.truncate)(d.value,{length:m})}:d)}),{status:c,stamp:a,id:P(s.hardware_id,s.name),displayName:h}}function G(s){const a=new Map;for(const h of s.values())for(const c of h.values()){const d=a.get(c.status.level);d?d.push(c):a.set(c.status.level,[c])}return a}const Z=(s,a,h)=>{const c=s.filter(({id:d})=>!h.includes(d));return a.length===0?(0,e.sortBy)(c,d=>d.displayName.replace(/^\//,"")):A({options:c,filter:a,getText:({displayName:d})=>d})}},70764:()=>{},45158:()=>{},58635:()=>{},30139:()=>{},63653:()=>{}}]);

//# sourceMappingURL=1194.77f20b0fb3988783f6e2.js.map