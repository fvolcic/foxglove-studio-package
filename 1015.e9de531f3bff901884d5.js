"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1015],{89820:(st,A,t)=>{t.d(A,{CW:()=>B,KV:()=>Y,ZP:()=>Z});var e=t(52322),N=t(71092),j=t(65992),K=t(66198),F=t(70943),H=t(45434),E=t(72283),L=t(93812),P=t(2784);const w=240,o=(0,j.ZP)(K.Z)({fontSize:"1rem !important","& svg:not(.MuiSvgIcon-root)":{fontSize:"1rem !important"}}),V=(0,j.ZP)(F.Z)(({theme:r})=>({minHeight:"auto",minWidth:"auto",padding:r.spacing(1,1.5,1.125),color:r.palette.text.secondary,"&.Mui-selected":{color:r.palette.text.primary}})),k=(0,j.ZP)(H.Z)({minHeight:"auto",".MuiTabs-indicator":{transform:"scaleX(0.75)",height:2}}),X=(0,j.ZP)("div")(({theme:r})=>({position:"relative",backgroundColor:r.palette.background.default,width:280}));function Y({children:r}){return r}function B({children:r}){return(0,e.jsx)(L.Z,{padding:1,overflowX:"hidden",overflowY:"auto",style:{maxHeight:w},children:r})}function Z({children:r,checked:M,icon:J,onSelectTab:D,selectedTab:g,tooltip:W,dataTest:Q}){if(!(g!=null)){let u=g;return P.Children.forEach(r,S=>{u==null&&(u=S.props.name)}),(0,e.jsx)(E.Z,{square:!1,elevation:4,style:{pointerEvents:"auto"},children:(0,e.jsx)(o,{color:M===!0?"info":"default",title:W,"data-testid":`ExpandingToolbar-${W}`,onClick:()=>D(u),children:J})})}let R;P.Children.forEach(r,u=>{(!R||u.props.name===g)&&(R=u)});const $=(u,S)=>{S!=null&&D(S)};return(0,e.jsxs)(E.Z,{"data-testid":Q,square:!1,elevation:4,style:{pointerEvents:"auto"},children:[(0,e.jsx)(E.Z,{children:(0,e.jsxs)(L.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,e.jsx)(k,{textColor:"inherit",value:g,onChange:$,children:P.Children.map(r,u=>(0,e.jsx)(V,{label:u.props.name,value:u.props.name}))}),(0,e.jsx)(o,{onClick:()=>D(void 0),children:(0,e.jsx)(N.iRs,{})})]})}),(0,e.jsx)(X,{children:R})]})}},71015:(st,A,t)=>{t.r(A),t.d(A,{default:()=>it});var e=t(52322),N=t(8821),j=t(2043),K=t(81476),F=t(29022),H=t(72283),E=t(66198),L=t(96758),P=t(2940),w=t(31692),o=t(2784),V=t(14786),k=t.n(V),X=t(8740),Y=t(29268),B=t(89820),Z=t(61187),r=t(14075),M=t(76479),J=t(93812),D=t(93218),g=t.n(D),W=t(81368),Q=t.n(W);g().use(Q()),g().warnings(!1);const et={name:"dagre",fit:!1,nodesep:20,rankDir:"TB",ranker:"longest-path"};function R(i){const c=(0,o.useRef)(),y=(0,o.useRef)(null),x=(0,o.useRef)(!1);(0,o.useEffect)(()=>{if(!y.current)throw new Error("Graph ref must be available on first render");return c.current=g()({container:y.current,zoom:.7}),c.current.on("viewport",()=>{x.current=!0}),i.graphRef.current={fit:()=>{x.current=!1,c.current?.fit()},resetUserPanZoom:()=>{x.current=!1}},()=>{c.current?.destroy()}},[i.graphRef]);const{elements:d,rankDir:p}=i;return(0,o.useEffect)(()=>{c.current&&(c.current.batch(()=>{c.current?.elements().remove(),c.current?.add(d),c.current?.elements().makeLayout({...et,rankDir:p}).run()}),x.current||c.current.fit())},[d,p]),(0,o.useEffect)(()=>{c.current?.style(i.style)},[i.style]),(0,e.jsx)("div",{ref:y,style:{width:"100%",height:"100%"}})}const $=200,u=[{selector:"edge",style:{"target-arrow-shape":"triangle","line-color":"rgb(190, 190, 187)","target-arrow-color":"rgb(190, 190, 187)","curve-style":"bezier"}},{selector:'node[type="node"]',style:{content:"data(label)",shape:"round-rectangle",height:"20px","background-color":"#000","border-color":"rgb(69, 165, 255)","border-width":"1px","padding-top":"4px","padding-right":"4px","padding-bottom":"4px","padding-left":"4px","font-size":"16px","text-max-width":`${$}px`,"text-wrap":"ellipsis","text-valign":"center","text-halign":"center",color:"rgb(69, 165, 255)"}},{selector:'node[type="topic"]',style:{content:"data(label)",shape:"diamond",width:"40px",height:"40px","background-color":"rgb(183, 157, 202)","font-size":"16px","text-outline-color":"#000","text-outline-width":"2px",color:"#fff"}},{selector:'node[type="service"]',style:{content:"data(label)",shape:"round-rectangle",height:"20px","background-color":"#000","border-color":"rgb(255, 107, 130)","border-width":"1px","padding-top":"4px","padding-right":"4px","padding-bottom":"4px","padding-left":"4px","font-size":"16px","text-max-width":"200px","text-wrap":"ellipsis","text-valign":"center","text-halign":"center",color:"rgb(255, 107, 130)"}}],S=(0,X.ZL)()(i=>({root:{display:"flex",flexDirection:"column",alignItems:"flex-end",position:"absolute",top:`calc(${M.B}px + ${i.spacing(1)})`,right:i.spacing(1),zIndex:101,gap:i.spacing(1),pointerEvents:"none"},stack:{"& > .MuiIconButton-root":{"&:not(:first-of-type)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},icon:{fontSize:"1rem !important","& svg:not(.MuiSvgIcon-root)":{fontSize:"1rem !important"}},pointerEventsAuto:{pointerEvents:"auto"},toolbarContent:{padding:i.spacing(1)}})),nt={all:"All topics",none:"No topics",published:"Published topics",subscribed:"Subscribed topics",connected:"Connected topics","disconnected-pub":"Disconnected published topics","disconnected-sub":"Disconnected subscribed topics"};function q(i,...c){for(const y of c)for(const x of y)i.add(x)}function _(){const{classes:i,cx:c}=S(),[y,x]=(0,o.useState)(void 0),d=(0,Z.An)((0,o.useCallback)(s=>s.playerState.activeData?.publishedTopics,[])),p=(0,Z.An)((0,o.useCallback)(s=>s.playerState.activeData?.subscribedTopics,[])),I=(0,Z.An)((0,o.useCallback)(s=>s.playerState.activeData?.services,[])),[U,at]=(0,o.useState)(!1),[C,rt]=(0,o.useState)(!0),[l,ct]=(0,o.useState)("all"),tt=(0,o.useMemo)(()=>k().init({fontFamily:"Arial",fontSize:"16px"}),[]),z=(0,o.useCallback)(({topicIdWithSubscriptions:s,topic:f})=>{const h=(d??new Map([])).has(f),T=s.has(f);return l==="none"?!1:l==="all"||l==="published"&&h||l==="subscribed"&&T||l==="connected"&&h&&T||l==="disconnected-pub"&&h&&!T||l==="disconnected-sub"&&T&&!h},[d,l]),lt=(0,o.useMemo)(()=>{const s=[],f=new Set,G=new Set,h=new Set,T=new Set;d?.forEach((n,a)=>{q(f,n),G.add(a)}),p?.forEach((n,a)=>{q(f,n),G.add(a),h.add(a)}),I?.forEach((n,a)=>{q(f,n),T.add(a)});for(const n of f){const a=Math.min($,tt.width(n));s.push({style:{width:`${a}px`},data:{id:`n:${n}`,label:n,type:"node"}})}if(l!=="none")for(const n of G)z({topicIdWithSubscriptions:h,topic:n})&&s.push({data:{id:`t:${n}`,label:n,type:"topic"}});if(C)for(const n of T){const a=Math.min($,tt.width(n));s.push({style:{width:`${a}px`},data:{id:`s:${n}`,label:n,type:"service"}})}switch(l){case"none":if(d==null||p==null)break;for(const[n,a]of d.entries())for(const m of a)for(const v of p.get(n)??[]){if(v===m)continue;const b=`n:${m}`,ot=`n:${v}`;s.push({data:{id:`${b}-${ot}`,source:b,target:ot}})}break;default:if(d!=null){for(const[n,a]of d.entries())if(z({topicIdWithSubscriptions:h,topic:n}))for(const m of a){const v=`n:${m}`,b=`t:${n}`;s.push({data:{id:`${v}-${b}`,source:v,target:b}})}}if(p!=null){for(const[n,a]of p.entries())if(z({topicIdWithSubscriptions:h,topic:n}))for(const m of a){const v=`t:${n}`,b=`n:${m}`;s.push({data:{id:`${v}-${b}`,source:v,target:b}})}}}if(C&&I!=null)for(const[n,a]of I.entries())for(const m of a)s.push({data:{source:`n:${m}`,target:`s:${n}`}});return s},[tt,d,p,I,l,z,C]),O=(0,o.useRef)(),dt=(0,o.useCallback)(()=>{O.current?.fit()},[]),ut=(0,o.useCallback)(()=>{O.current?.resetUserPanZoom(),at(!U)},[U]),ft=(0,o.useMemo)(()=>`Showing ${nt[l].toLowerCase()}`,[l]),pt=(0,o.useCallback)(()=>{O.current?.resetUserPanZoom(),rt(!C)},[C]);return d==null?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.Z,{}),(0,e.jsx)(Y.Z,{children:"Waiting for data..."})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.Z,{}),(0,e.jsxs)("div",{className:i.root,children:[(0,e.jsx)(H.Z,{square:!1,elevation:4,className:i.pointerEventsAuto,children:(0,e.jsxs)(J.Z,{flex:"0 0",className:c(i.stack,i.pointerEventsAuto),children:[(0,e.jsx)(E.Z,{title:"Zoom fit",onClick:dt,className:i.icon,children:(0,e.jsx)(N.SD4,{})}),(0,e.jsx)(E.Z,{title:"Orientation",onClick:ut,className:i.icon,children:(0,e.jsx)(j.O9A,{style:{transform:`rotate(${U?90:0}deg)`}})}),(0,e.jsx)(E.Z,{color:C?"info":"inherit",className:i.icon,title:C?"Showing services":"Hiding services",onClick:pt,children:(0,e.jsx)(K.feG,{})})]})}),(0,e.jsx)(B.ZP,{checked:l!=="none",dataTest:"set-topic-visibility",tooltip:ft,icon:(0,e.jsx)(F._f9,{}),selectedTab:y,onSelectTab:s=>{x(s)},children:(0,e.jsx)(B.KV,{name:"Topics",children:(0,e.jsx)("div",{className:i.toolbarContent,children:(0,e.jsx)(L.Z,{defaultValue:l,onChange:(s,f)=>{O.current?.resetUserPanZoom(),ct(f)},children:Object.entries(nt).map(([s,f])=>(0,e.jsx)(P.Z,{value:s,control:(0,e.jsx)(w.Z,{}),label:f},s))})})})})]}),(0,e.jsx)(R,{style:u,elements:lt,rankDir:U?"LR":"TB",graphRef:O})]})}_.panelType="TopicGraph",_.defaultConfig={};const it=(0,r.Z)(_)}}]);

//# sourceMappingURL=1015.e9de531f3bff901884d5.js.map