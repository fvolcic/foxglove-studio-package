"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8586,9839],{42861:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)((0,m.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z"}),"Difference");x.Z=T},56317:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)((0,m.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM14.5 7V5h-2v2h-2v2h2v2h2V9h2V7h-2zm2 6h-6v2h6v-2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm4 16H8V3h6.17L19 7.83V17z"}),"DifferenceOutlined");x.Z=T},27147:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)((0,m.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");x.Z=T},21580:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)((0,m.jsx)("path",{d:"M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z"}),"PowerInput");x.Z=T},42012:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)([(0,m.jsx)("circle",{cx:"7",cy:"14",r:"3"},"0"),(0,m.jsx)("circle",{cx:"11",cy:"6",r:"3"},"1"),(0,m.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot");x.Z=T},96511:(L,x,n)=>{var t,S=n(71600);t={value:!0},x.Z=void 0;var b=S(n(68671)),m=n(52322),T=(0,b.default)((0,m.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");x.Z=T},98558:L=>{/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */L.exports=function(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1}},13e3:(L,x,n)=>{/*!
 * object.omit <https://github.com/jonschlinkert/object.omit>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t=n(88919);L.exports=function(b,m,T){if(!t(b))return{};typeof m=="function"&&(T=m,m=[]),typeof m=="string"&&(m=[m]);for(var D=typeof T=="function",z=Object.keys(b),N={},U=0;U<z.length;U++){var G=z[U],K=b[G];(!m||m.indexOf(G)===-1&&(!D||T(K,G,b)))&&(N[G]=K)}return N}},88919:(L,x,n)=>{/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t=n(86982);L.exports=function(b){return t(b)||typeof b=="function"||Array.isArray(b)}},86982:(L,x,n)=>{/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t=n(98558);function S(b){return t(b)===!0&&Object.prototype.toString.call(b)==="[object Object]"}L.exports=function(m){var T,D;return!(S(m)===!1||(T=m.constructor,typeof T!="function")||(D=T.prototype,S(D)===!1)||D.hasOwnProperty("isPrototypeOf")===!1)}},9839:L=>{function x(n){for(var t=5381,S=n.length;S;)t=t*33^n.charCodeAt(--S);return t>>>0}L.exports=x},62506:(L,x,n)=>{n.d(x,{s:()=>T});var t=n(2784),S=n(59506),b=n(1012),m=n(81187);function T(D,z){const{historySize:N=1}=z??{},U=(0,t.useMemo)(()=>(0,b.ZP)(D),[D]),G=(0,t.useMemo)(()=>U?[U.topicName]:[],[U]),K=(0,m.Iq)([D]),ue=(0,t.useCallback)((Z,g)=>{if(g.length===0)return Z;const $=[];for(let ae=g.length-1;ae>=0&&$.length<N;--ae){const F=g[ae],oe=K(D,F);oe&&oe.length>0&&$.push({messageEvent:F,queriedData:oe})}const k=$.reverse();return $.length===N?{matches:k,messageEvents:g,path:D}:{matches:Z.matches.concat(k).slice(-N),messageEvents:g,path:D}},[K,N,D]),M=(0,t.useCallback)(Z=>{if(!Z)return{matches:[],messageEvents:[],path:D};const g=[];for(const $ of Z.messageEvents){const k=K(D,$);k&&k.length>0&&g.push({messageEvent:$,queriedData:k})}return g.length>0||D!==Z.path?{matches:g.slice(-N),messageEvents:Z.messageEvents,path:D}:Z},[K,N,D]);return(0,S.CC)({topics:G,addMessages:ue,restore:M}).matches}},66194:(L,x,n)=>{n.r(x),n.d(x,{CUSTOM_METHOD:()=>ve,PREV_MSG_METHOD:()=>Ee,default:()=>wt});var t=n(52322),S=n(42861),b=n(56317),m=n(26029),T=n(6377),D=n(47746),z=n(68434),N=n(2940),U=n(41518),G=n(66198),K=n(14875),ue=n(80078),M=n(76635),h=n(2784),Z=n(13980),g=n.n(Z),$=n(37320),k=n.n($),Le=n(13e3),ae=n.n(Le);const F=function(){};var oe=function(){function e(s,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,i,o){return i&&e(s.prototype,i),o&&e(s,o),s}}();function O(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function P(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:e}function J(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}var ee=function(e){J(s,e);function s(i){O(this,s);var o=P(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,i));return o.state={isHovering:!1},o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseOver=o.onMouseOver.bind(o),o.onMouseOut=o.onMouseOut.bind(o),o.setIsHovering=o.setIsHovering.bind(o),o.unsetIsHovering=o.unsetIsHovering.bind(o),o.componentWillUnmount=o.componentWillUnmount.bind(o),o.timerIds=[],o}return oe(s,[{key:"onMouseEnter",value:function(o){this.props.onMouseEnter({e:o,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseLeave",value:function(o){this.props.onMouseLeave({e:o,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOver",value:function(o){this.props.onMouseOver({e:o,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOut",value:function(o){this.props.onMouseOut({e:o,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"componentWillUnmount",value:function(){this.clearTimers()}},{key:"setIsHovering",value:function(){var o=this;this.clearTimers();var a=setTimeout(function(){var l={isHovering:!0};o.setState(l,function(){o.props.onHoverChanged(l)})},this.props.hoverDelayInMs);this.timerIds.push(a)}},{key:"unsetIsHovering",value:function(){var o=this;this.clearTimers();var a=setTimeout(function(){var l={isHovering:!1};o.setState(l,function(){o.props.onHoverChanged(l)})},this.props.hoverOffDelayInMs);this.timerIds.push(a)}},{key:"clearTimers",value:function(){for(var o=this.timerIds;o.length;)clearTimeout(o.pop())}},{key:"getIsReactComponent",value:function(o){return typeof o.type=="function"}},{key:"shouldDecorateChild",value:function(o){return!!o&&this.getIsReactComponent(o)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(o,a){return(0,h.cloneElement)(o,a)}},{key:"renderChildrenWithProps",value:function(o,a){var l=this;return typeof o=="function"?o(a):h.Children.map(o,function(r){return l.shouldDecorateChild(r)?l.decorateChild(r,a):r})}},{key:"render",value:function(){var o=this.props,a=o.children,l=o.className,r=k()({},{isHovering:this.state.isHovering},ae()(this.props,["children","className","hoverDelayInMs","hoverOffDelayInMs","onHoverChanged","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","shouldDecorateChildren"]));return h.createElement("div",{className:l,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},this.renderChildrenWithProps(a,r))}}]),s}(h.Component);ee.displayName="ReactHoverObserver",ee.defaultProps={hoverDelayInMs:0,hoverOffDelayInMs:0,onHoverChanged:F,onMouseEnter:function(s){var i=s.setIsHovering;return i()},onMouseLeave:function(s){var i=s.unsetIsHovering;return i()},onMouseOver:F,onMouseOut:F,shouldDecorateChildren:!0},ee.propTypes={className:g().string,hoverDelayInMs:g().number,hoverOffDelayInMs:g().number,onHoverChanged:g().func,onMouseEnter:g().func,onMouseLeave:g().func,onMouseOver:g().func,onMouseOut:g().func,shouldDecorateChildren:g().bool};const Te=ee;var De=n(30650),se=n(8740),je=n(59506),fe=n(29268),Ze=n(93455),He=n(27803),lt=n(84803);function ct(){const[e]=(0,He.b)(Ze.o.TIMEZONE);return(0,h.useCallback)((s,i,o,a)=>(0,lt.D)(s,i,o,a,[],e),[e])}var Ue=n(35870),Ge=n(94670),ut=n(1012),Ke=n(62506),ft=n(14075),dt=n(82044),ht=n(76479),ie=n(93812),Je=n(60351);const Qe="->",C={ADDED:{labelText:"STUDIO_DIFF___ADDED",color:"#404047",backgroundColor:"#daffe7",invertedBackgroundColor:"#182924",indicator:"+"},DELETED:{labelText:"STUDIO_DIFF___DELETED",color:"#404047",backgroundColor:"#ffdee3",invertedBackgroundColor:"#3d2327",indicator:"-"},CHANGED:{labelText:"STUDIO_DIFF___CHANGED",color:"#eba800"},ID:{labelText:"STUDIO_DIFF___ID"}},te=(0,M.keyBy)(Object.values(C),"labelText");function Se({before:e,after:s,idLabel:i,showFullMessageForDiff:o=!1}){if(Array.isArray(e)&&Array.isArray(s)){let r;const c=e.concat(s);if(typeof c[0]=="object"&&c[0]!=null){let u={};c[0].id!=null&&(u.id={before:[],after:[]});for(const f in c[0])(0,Je.Q)(f)&&(u[f]={before:[],after:[]});(0,M.every)(c,f=>typeof f=="object"&&f)||(u={});for(const[f,d]of Object.entries(u))for(const I of e)I[f]!=null&&d.before.push(I[f]);for(const[f,d]of Object.entries(u))for(const I of s)I[f]!=null&&d.after.push(I[f]);for(const[f,{before:d,after:I}]of Object.entries(u))if((0,M.uniq)(d).length===e.length&&(0,M.uniq)(I).length===s.length){r=f;break}}if(r!=null){const u=(0,M.keyBy)(s,r),f=[];for(const d of e){if(d==null||typeof d!="object")throw new Error("beforeItem is invalid; should have checked this earlier");const I=d[r],Q=Se({before:d,after:u[I],idLabel:r,showFullMessageForDiff:o});if(delete u[I],!(0,M.isEmpty)(Q)){const ne=Object.keys(Q).length===1&&Object.keys(Q)[0]===C.DELETED.labelText;f.push(ne?Q:{[C.ID.labelText]:{[r]:I},...Q})}}for(const d of Object.values(u)){const I=Se({before:void 0,after:d,idLabel:r,showFullMessageForDiff:o});(0,M.isEmpty)(I)||f.push(I)}return f}}if(typeof e=="object"&&typeof s=="object"&&e&&s){const r={},c=Object.keys(e).concat(Object.keys(s));for(const u of(0,M.uniq)(c)){const f=Se({before:e[u],after:s[u],idLabel:void 0,showFullMessageForDiff:o});(0,M.isEmpty)(f)?o&&(r[u]=e[u]):r[u]=f}return r}if(e===s)return;if(e==null){const r=Array.isArray(s)||typeof s!="object";if(!i||r)return{[C.ADDED.labelText]:s};const c={[C.ID.labelText]:{[i]:{...s}[i]}};return{[C.ADDED.labelText]:{...c,...s}}}if(s==null){const r=Array.isArray(e)||typeof e!="object";if(!i||r)return{[C.DELETED.labelText]:e};const c={[C.ID.labelText]:{[i]:{...e}[i]}};return{[C.DELETED.labelText]:{...c,...e}}}const a=typeof e=="bigint"?e.toString():JSON.stringify(e),l=typeof s=="bigint"?s.toString():JSON.stringify(s);return{[C.CHANGED.labelText]:`${a} ${Qe} ${l}`}}var pt=n(11701),gt=n(35528),vt=n(77075),yt=n(65992);const Ne=(0,yt.ZP)("span")(({theme:e})=>({padding:e.spacing(0,.5),textDecoration:"inherit",whiteSpace:"pre-line"}));var mt=n(13900),xt=n(87472);const Xe=20,Ye=new Set(Object.keys(mt.ros1).map(e=>e.split("/")[0]));Ye.add("turtlesim");function bt(e){return Boolean(e!=null&&typeof e=="object"&&ArrayBuffer.isView(e)&&!(e instanceof DataView))}function Tt(e,s){const i=new Set,o=(a,l)=>{if(l!=null&&!(typeof l!="object"&&typeof l!="function")&&!(Array.isArray(l)&&l.length>s)&&!bt(l)){a.length>0&&i.add(a.join("~"));for(const r of Object.getOwnPropertyNames(l)){const c=[r,...a],u=l[r];o(c,u)}}};return o([],e),i}function we(e,s){for(const i in e)i===C.ADDED.labelText||i===C.CHANGED.labelText||i===C.DELETED.labelText?s[i]++:typeof e[i]=="object"&&e[i]!=null&&we(e[i],s);return s}const Ie=new Map;for(const e of Object.values(xt.foxgloveMessageSchemas)){const s=`https://foxglove.dev/docs/studio/messages/${(0,M.kebabCase)(e.name)}`;Ie.set(`foxglove_msgs/${e.name}`,s),Ie.set(`foxglove_msgs/msg/${e.name}`,s),Ie.set(`foxglove.${e.name}`,s)}function Dt(e){const s=e.split(/[/.]/),i=(0,M.first)(s),o=(0,M.last)(s);if(i!=null&&Ye.has(i))return`https://docs.ros.org/api/${i}/html/msg/${o}.html`;const a=Ie.get(e);if(a!=null)return a}const jt=(0,se.ZL)()(e=>({diff:{float:"right",display:"flex",alignItems:"center",gap:e.spacing(.75),marginRight:e.spacing(.75)},badge:{display:"inline-flex",alignItems:"center",gap:e.spacing(.25),padding:e.spacing(0,.75),borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper},changeIndicator:{display:"inline-block",width:e.spacing(.75),height:e.spacing(.75),borderRadius:"50%",backgroundColor:e.palette.warning.main}}));function St({data:e,itemType:s}){const{classes:i}=jt(),{ADDED:o,DELETED:a,CHANGED:l,ID:r}=C,c=e[r.labelText],u=c?Object.keys(c).map(d=>`${d}: ${c[d]}`).join(", "):void 0,f=we(e,{[o.labelText]:0,[l.labelText]:0,[a.labelText]:0});return(0,t.jsxs)(t.Fragment,{children:[c&&(0,t.jsxs)(t.Fragment,{children:[s," ",u]}),(0,t.jsxs)("div",{className:i.diff,children:[(f[o.labelText]!==0||f[a.labelText]!==0)&&(0,t.jsxs)("div",{className:i.badge,children:[f[o.labelText]!==0&&(0,t.jsx)(z.Z,{variant:"caption",color:"success.main",children:`${C.ADDED.indicator}${f[o.labelText]}`}),f[a.labelText]!==0&&(0,t.jsx)(z.Z,{variant:"caption",color:"error.main",children:`${C.DELETED.indicator}${f[a.labelText]}`})]}),f[l.labelText]!==0&&(0,t.jsx)("div",{className:i.changeIndicator})]})]})}var Re=n(20379);const qe=512;function Me({itemLabel:e}){const s=e.length>=qe,[i,o]=(0,h.useState)(!s),a=(0,h.useCallback)(()=>o(!0),[]),l=i?e:e.slice(0,qe);return(0,t.jsx)(Re.Z,{title:i?"":"Text was truncated, click to see all",placement:"top",children:(0,t.jsx)("span",{onClick:a,style:{cursor:i?"inherit":"pointer"},children:`${l}${i?"":"..."}`})})}var It=n(63249),$e=n(90546),_e=n(27999);function Mt(e){return(0,M.isTypedArray)(e)}function Ce(e,s){if(s!=null)return typeof s=="bigint"?s.toString():Mt(s)?Array.from(s):s}const Ct=(0,se.ZL)()(e=>({button:{padding:e.spacing(.125),".MuiSvgIcon-root":{fontSize:`${e.typography.pxToRem(16)} !important`},".MuiButton-startIcon":{marginRight:e.spacing(.5)},"&:hover":{backgroundColor:"transparent"}}}));function Et({data:e,diffData:s,diff:i,datatype:o,message:a,diffMessage:l}){const{classes:r}=Ct(),c=o?Dt(o):void 0,u=(0,h.useCallback)(()=>JSON.stringify(e,Ce,2)??"",[e]),f=(0,h.useCallback)(()=>JSON.stringify(s,Ce,2)??"",[s]),d=(0,h.useCallback)(()=>JSON.stringify(i,Ce,2)??"",[i]);return(0,t.jsxs)(ie.Z,{alignItems:"flex-start",padding:.25,children:[(0,t.jsxs)(ie.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,t.jsxs)(z.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:[l?"base":c?(0,t.jsx)(It.Z,{target:"_blank",color:"inherit",variant:"caption",underline:"hover",rel:"noopener noreferrer",href:c,children:o}):o,` @ ${(0,_e.Eo)(a.receiveTime)} sec`]}),(0,t.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:u})]}),l?.receiveTime&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ie.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,t.jsx)(z.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:`diff @ ${(0,_e.Eo)(l.receiveTime)} sec `}),(0,t.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:f})]}),(0,t.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:d,children:"Copy diff of msgs"})]})]})}var Ot=n(42713),Pt=n(98967),At=n(85321),Lt=n(27147),Zt=n(21580),Ht=n(42012),Nt=n(96511),Rt=n(76217),et=n(36721),tt=n(11234),$t=n(28e3);function zt({itemLabel:e}){const s=` ${Qe} `,i=`${e}`.split(s);if(i.length===2){const[a,l]=i,r=JSON.parse(JSON.stringify(a)??""),c=JSON.parse(JSON.stringify(l)??"");return(0,t.jsxs)(Ne,{style:{color:C.CHANGED.color},children:[(0,t.jsx)(Me,{itemLabel:r}),s,(0,t.jsx)(Me,{itemLabel:c})]})}return(0,t.jsx)(Ne,{children:(0,t.jsx)(Me,{itemLabel:e})})}var kt=n(2784);const nt=(0,se.D2)(Rt.Z,e=>({root:{"&.MuiIconButton-root":{fontSize:e.typography.pxToRem(16),padding:0,"&:hover":{backgroundColor:"transparent"},"&:not(:hover)":{opacity:.6}}}})),Ft=(0,se.ZL)()({placeholderActionContainer:{alignItems:"inherit",display:"inherit",gap:"inherit",visibility:"hidden"}}),Bt={key:"",tooltip:"",icon:(0,t.jsx)(At.Z,{fontSize:"inherit"})},Wt=4;function Vt(e){const s=(0,h.useRef)(void 0),{arrLabel:i,basePath:o,itemLabel:a,itemValue:l,valueAction:r,onTopicPathChange:c,openSiblingPanel:u}=e,[f,d]=(0,h.useState)(!1),I=(0,h.useCallback)(p=>()=>(0,et.openSiblingPlotPanel)(u,`${o}${p}`),[o,u]),Q=(0,h.useCallback)(p=>()=>(0,tt.openSiblingStateTransitionsPanel)(u,`${o}${p}`),[o,u]),ne=(0,h.useCallback)(()=>c(`${o}${r?.filterPath}`),[o,r,c]),ye=(0,h.useCallback)(p=>{$t.Z.copy(p).then(()=>{d(!0),s.current=setTimeout(()=>d(!1),1500)}).catch(B=>console.warn(B))},[]),de=(0,h.useMemo)(()=>{const p=[];if(i.length>0&&p.push({key:"Copy",activeColor:f?"success":"primary",tooltip:f?"Copied":"Copy to Clipboard",icon:f?(0,t.jsx)(Ot.Z,{fontSize:"inherit"}):(0,t.jsx)(Pt.Z,{fontSize:"inherit"}),onClick:()=>ye(JSON.stringify(l,Ce,2)??"")}),r!=null){const B=et.plotableRosTypes.includes(r.primitiveType),he=tt.transitionableRosTypes.includes(r.primitiveType),Fe=r.multiSlicePath===r.singleSlicePath;r.filterPath.length>0&&p.push({key:"Filter",tooltip:"Filter on this value",icon:(0,t.jsx)(Lt.Z,{fontSize:"inherit"}),onClick:ne}),B&&p.push({key:"line",tooltip:"Plot this value on a line chart",icon:(0,t.jsx)(Nt.Z,{fontSize:"inherit"}),onClick:I(r.singleSlicePath)}),B&&!Fe&&p.push({key:"scatter",tooltip:"Plot this value on a scatter plot",icon:(0,t.jsx)(Ht.Z,{fontSize:"inherit"}),onClick:I(r.multiSlicePath)}),he&&Fe&&p.push({key:"stateTransitions",tooltip:"View state transitions for this value",icon:(0,t.jsx)(Zt.Z,{fontSize:"inherit"}),onClick:Q(r.singleSlicePath)})}return p},[i.length,f,ye,l,ne,I,Q,r]),re=(0,h.useMemo)(()=>{const p=[];for(let B=de.length;B<Wt;B++)p.push({...Bt,key:`empty-${B}`});return p},[de.length]),{classes:X,cx:me}=Ft();return(0,h.useEffect)(()=>()=>{s.current!=null&&clearTimeout(s.current)},[]),(0,t.jsxs)(ie.Z,{inline:!0,flexWrap:"wrap",direction:"row",alignItems:"center",gap:.25,children:[(0,t.jsx)(zt,{itemLabel:a}),i,de.map(p=>(0,t.jsx)(Re.Z,{arrow:!0,title:p.tooltip,placement:"top",children:(0,t.jsx)(nt,{size:"small",activeColor:p.activeColor,onClick:p.onClick,color:"inherit",icon:p.icon})},p.key)),(0,t.jsx)("span",{className:me(X.placeholderActionContainer),children:re.map(p=>(0,t.jsx)(Re.Z,{arrow:!0,title:p.tooltip,placement:"top",children:(0,t.jsx)(nt,{size:"small",color:"inherit",icon:p.icon})},p.key))})]})}const ot=kt.memo(Vt),Ut=(e,s,i)=>typeof s=="string"&&(i.structureType==="message"&&typeof e=="object"||i.structureType==="primitive"&&i.primitiveType==="json"),Gt=(e,s,i)=>typeof s=="number"&&(i.structureType==="array"&&Array.isArray(e)||i.structureType==="primitive"&&i.primitiveType==="json");function Kt(e,s,i){let o="",a="",l="",r=e,c=s;for(const u of i){if(c==null||r==null)break;if(Ut(r,u,c))c=c.structureType==="message"&&typeof u=="string"?c.nextByName[u]:{structureType:"primitive",primitiveType:"json",datatype:""},r=r[u],a.endsWith("[:]")&&c?.structureType==="primitive"?typeof r=="bigint"?l=`${a}{${u}==${r.toString()}}`:l=`${a}{${u}==${JSON.stringify(r)??""}}`:l="",o+=`.${u}`,a+=`.${u}`;else if(Gt(r,u,c)){r=r[u],c=c.structureType==="array"?c.next:{structureType:"primitive",primitiveType:"json",datatype:""},a=`${o}[:]`;let f;if(c.structureType==="message"&&(f=Object.entries(c.nextByName).find(([d,I])=>I.structureType==="primitive"&&(0,Je.Q)(d))?.[0]),typeof r=="object"&&r!=null&&typeof f=="string"){const d=r[f];o+=`[:]{${f}==${typeof d=="bigint"?d.toString():JSON.stringify(d)??""}}`}else o+=`[${u}]`}else{if(c.structureType==="primitive")return;throw new Error(`Invalid structureType: ${c.structureType} for value/pathItem.`)}}if(c&&c.structureType==="primitive"&&r!=null)return{singleSlicePath:o,multiSlicePath:a,primitiveType:c.primitiveType,filterPath:l}}const Jt=(e,s)=>{let i=e;for(const o of s){if(i==null)break;if(i.structureType==="message"&&typeof o=="string")i=i.nextByName[o];else if(i.structureType==="array"&&typeof o=="number")i=i.next;else{if(i.structureType==="primitive")return i;throw new Error(`Invalid structureType: ${i.structureType} for value/pathItem.`)}}return i},ve="custom",Ee="previous message",ze=e=>Array.isArray(e)?e.filter(s=>s!=null).length===1:!1,ke=e=>ze(e)&&typeof e[0]=="object"?e[0]:e;function Oe(e){return typeof e=="object"&&e!=null&&"toJSON"in e?e.toJSON():e}const Qt=(0,se.ZL)()(e=>({iconButton:{"&.MuiIconButton-root":{padding:e.spacing(.25)}},topic:{fontFamily:vt.R.SANS_SERIF,fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`},big:{"&.MuiTypography-root":{fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`}},hoverObserver:{display:"inline-flex",alignItems:"center"}}));function Xt(e){const{palette:{mode:s}}=(0,D.Z)(),{classes:i}=Qt(),o=(0,pt.lk)(),{config:a,saveConfig:l}=e,{openSiblingPanel:r}=(0,dt.R)(),{topicPath:c,diffMethod:u,diffTopicPath:f,diffEnabled:d,showFullMessageForDiff:I}=a,{topics:Q,datatypes:ne}=(0,je.Ui)(),ye=ct(),de=(0,h.useMemo)(()=>d?(j,v,A)=>(0,t.jsx)(St,{data:v,itemType:A}):ye,[ye,d]),re=(0,h.useMemo)(()=>(0,ut.ZP)(c),[c]),X=(0,h.useMemo)(()=>re&&Q.find(({name:j})=>j===re.topicName),[re,Q]),me=(0,h.useMemo)(()=>{if(!(!X||!re||X.schemaName==null))return(0,Ge.eT)((0,Ge.pb)(ne)[X.schemaName],re.messagePath).structureItem},[ne,X,re]),[p,B]=(0,h.useState)(a.expansion),he=(0,Ke.s)(c,{historySize:2}),qt=(0,Ke.s)(d?f:"")[0],st=he[he.length-1],_t=he[he.length-2],it=d&&u===Ee,W=it?_t:st,pe=it?st:qt,xe=(0,h.useMemo)(()=>{if(W){const j=ke(W.queriedData.map(({value:v})=>v));return Tt(Oe(j),5)}else return new Set},[W]),Pe=(0,h.useMemo)(()=>p==="none"?!0:p==="all"?!1:!!(typeof p=="object"&&Object.values(p).some(j=>j==="c")),[p]),be=(0,h.useCallback)(j=>{B(void 0),l({topicPath:j})},[l]),en=(0,h.useCallback)(j=>{l({diffTopicPath:j})},[l]),tn=(0,h.useCallback)(()=>{l({diffEnabled:!d})},[d,l]),nn=(0,h.useCallback)(()=>{B(Pe?"all":"none")},[Pe]),Be=(0,h.useCallback)(j=>{const v=j.join("~");B(A=>A==="all"?{[v]:"c"}:A==="none"?{[v]:"e"}:A==null?{[v]:xe.has(v)?"c":"e"}:A[v]?{...A,[v]:A[v]==="c"?"e":"c"}:{...A,[v]:xe.has(v)?"c":"e"})},[xe]);(0,h.useEffect)(()=>{l({expansion:p})},[p,l]);const Ae=(0,h.useCallback)(({constantName:j,label:v,itemValue:A,keyPath:le})=>{let R=v;typeof A=="bigint"&&(R=A.toString());let V="";if(ArrayBuffer.isView(A)){const q=A,y=q.slice(0,Xe).join(", "),E=q.length;V=`(${E}) [${y}${E>=Xe?", ...":""}] `,R=A.constructor.name}return j!=null&&(R=`${R} (${j})`),le[0]==="nsec"&&typeof A=="number"&&(R=(0,M.padStart)(R,9,"0")),{arrLabel:V,itemLabel:R}},[]),rt=(0,h.useCallback)((j,v)=>{let A;const{arrLabel:le,itemLabel:R}=Ae({constantName:A,label:j,itemValue:v,keyPath:[]});return(0,t.jsx)(ot,{arrLabel:le,basePath:"",itemLabel:R,itemValue:v,valueAction:void 0,onTopicPathChange:be,openSiblingPanel:r})},[Ae,be,r]),We=(0,h.useCallback)((j,v,A,le,R,...V)=>(0,t.jsx)(Te,{className:i.hoverObserver,children:({isHovering:q})=>{const y=(0,M.last)(V);let E;q&&j&&(E=Kt(v[y],j,V.slice(0,-1).reverse()));let H;if(j){const _=Jt(j,V.slice(0,-1).reverse());if(_){const ce=V.findIndex(Ve=>typeof Ve=="string"),at=V[ce];if(typeof at=="string"){const Ve=(0,gt.Hh)(ne),sn=_.datatype;H=Ve[sn]?.[at]?.[String(R)]}}}const Y=A[y]?.path??"",{arrLabel:w,itemLabel:ge}=Ae({constantName:H,label:le,itemValue:R,keyPath:V});return(0,t.jsx)(ot,{arrLabel:w,basePath:Y,itemLabel:ge,itemValue:R,valueAction:E,onTopicPathChange:be,openSiblingPanel:r})}}),[i.hoverObserver,ne,Ae,be,r]),on=(0,h.useCallback)(()=>{const j=y=>{if(p==="all")return!0;if(p==="none")return!1;const E=y.join("~");return p&&p[E]==="c"?!1:p&&p[E]==="e"?!0:xe.has(E)};if(c.length===0)return(0,t.jsx)(fe.Z,{children:"No topic selected"});if(d&&u===ve&&(!W||!pe))return(0,t.jsx)(fe.Z,{children:`Waiting to diff next messages from "${c}" and "${f}"`});if(!W)return(0,t.jsx)(fe.Z,{children:"Waiting for next message"});const v=ke(W.queriedData.map(({value:y})=>y)),A=W.queriedData.length===1&&typeof W.queriedData[0]?.value=="object",le=v!=null&&typeof v!="object"||ze(v)&&v[0]!=null&&typeof v[0]!="object",R=ze(v)?v[0]:v,V=pe&&ke(pe.queriedData.map(({value:y})=>y)),q=d?Se({before:Oe(v),after:Oe(V),idLabel:void 0,showFullMessageForDiff:I}):{};return(0,t.jsxs)(ie.Z,{className:i.topic,flex:"auto",overflowX:"hidden",paddingLeft:.75,children:[(0,t.jsx)(Et,{data:v,diffData:V,diff:q,message:W.messageEvent,...X?{datatype:X.schemaName}:void 0,...pe?{diffMessage:pe.messageEvent}:void 0}),le?(0,t.jsx)(z.Z,{className:i.big,variant:"h1",fontWeight:"bold",whiteSpace:"pre-line",style:{wordWrap:"break-word"},children:(0,t.jsx)(Me,{itemLabel:String(R)})}):d&&(0,M.isEqual)({},q)?(0,t.jsx)(fe.Z,{children:"No difference found"}):(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)(N.Z,{disableTypography:!0,checked:I,control:(0,t.jsx)(U.Z,{size:"small",defaultChecked:!0,onChange:()=>l({showFullMessageForDiff:!I})}),label:"Show full msg"}),(0,t.jsx)(De.ZP,{labelRenderer:y=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ne,{children:(0,M.first)(y)}),(0,t.jsx)("span",{style:{fontSize:0},children:"\xA0"})]}),shouldExpandNode:j,onExpand:(y,E,H)=>{Be(H)},onCollapse:(y,E,H)=>{Be(H)},hideRoot:!0,invertTheme:!1,getItemString:de,valueRenderer:(y,E,...H)=>d?rt(y,E):A?We(me,[v],W.queriedData,y,E,...H,0):We(me,v,W.queriedData,y,E,...H),postprocessValue:y=>{if(y==null)return y;const E=y[C.ID.labelText],H=y[C.ADDED.labelText],Y=y[C.CHANGED.labelText],w=y[C.DELETED.labelText];return(H!=null?1:0)+(Y!=null?1:0)+(w!=null?1:0)==1&&E==null?H??Y??w:Oe(y)},theme:{...o,tree:{margin:0},nestedNode:({style:y},E)=>{const H={...y,paddingTop:2,paddingBottom:2,marginTop:2,textDecoration:"inherit"};if(!d)return{style:H};let Y,w;te[E[0]]&&(Y=s==="dark"?te[E[0]].invertedBackgroundColor:te[E[0]].backgroundColor,w=E[0]===C.DELETED.labelText?"line-through":"none");const ge=(0,M.get)(q,E.slice().reverse(),{}),_=Object.keys(ge)[0];return _!=null&&te[_]&&(Y=s==="dark"?te[_].invertedBackgroundColor:te[_].backgroundColor,w=_===C.DELETED.labelText?"line-through":"none"),{style:{...H,backgroundColor:Y,textDecoration:w??"inherit"}}},nestedNodeLabel:({style:y})=>({style:{...y,textDecoration:"inherit"}}),nestedNodeChildren:({style:y})=>({style:{...y,textDecoration:"inherit"}}),value:({style:y},E,H)=>{const Y={...y,textDecoration:"inherit"};if(!d)return{style:Y};let w,ge;const _=(0,M.get)(q,H.slice().reverse(),{}),ce=Object.keys(_)[0];return ce!=null&&te[ce]&&(w=s==="dark"?te[ce].invertedBackgroundColor:te[ce].backgroundColor,ge=ce===C.DELETED.labelText?"line-through":"none"),{style:{...Y,backgroundColor:w,textDecoration:ge??"inherit"}}},label:{textDecoration:"inherit"}},data:d?q:v})]})]})},[xe,W,i.big,i.topic,d,pe,u,f,p,de,o,Be,rt,me,l,I,s,X,c,We]);return(0,t.jsxs)(ie.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,t.jsxs)(ht.Z,{children:[(0,t.jsx)(G.Z,{className:i.iconButton,title:"Toggle diff",onClick:tn,color:d?"default":"inherit",size:"small",children:d?(0,t.jsx)(S.Z,{fontSize:"small"}):(0,t.jsx)(b.Z,{fontSize:"small"})}),(0,t.jsx)(G.Z,{className:i.iconButton,title:Pe?"Expand all":"Collapse all",onClick:nn,"data-testid":"expand-all",size:"small",children:Pe?(0,t.jsx)(T.Z,{fontSize:"small"}):(0,t.jsx)(m.Z,{fontSize:"small"})}),(0,t.jsxs)(ie.Z,{fullWidth:!0,paddingLeft:.25,children:[(0,t.jsx)(Ue.ZP,{index:0,path:c,onChange:be,inputStyle:{height:20}}),d&&(0,t.jsxs)(ie.Z,{direction:"row",flex:"auto",children:[(0,t.jsxs)(K.Z,{variant:"filled",size:"small",title:"Diff method",value:u,MenuProps:{MenuListProps:{dense:!0}},onChange:j=>l({diffMethod:j.target.value}),children:[(0,t.jsx)(ue.Z,{value:Ee,children:Ee}),(0,t.jsx)(ue.Z,{value:ve,children:"custom"})]}),u===ve&&(0,t.jsx)(Ue.ZP,{index:1,path:f,onChange:en,inputStyle:{height:"100%"},...X?{prioritizedDatatype:X.schemaName}:{}})]})]})]}),on()]})}const Yt={diffEnabled:!1,diffMethod:ve,diffTopicPath:"",showFullMessageForDiff:!1,topicPath:""},wt=(0,ft.Z)(Object.assign(Xt,{panelType:"RawMessages",defaultConfig:Yt}))},84803:(L,x,n)=>{n.d(x,{D:()=>ue});var t=n(52322),S=n(1547),b=n(667),m=n(60351),T=n(85091),D=n(96995);const z=new D._fP,N=new D.USm;function U(Z,g,$,k){return z.set(Z,g,$,k),N.setFromQuaternion(z,"XYZ"),[D.M8C.radToDeg(N.x),D.M8C.radToDeg(N.y),D.M8C.radToDeg(N.z)]}const G=20*365*24*60*60,K=["string","number","bigint","boolean"];function ue(Z,g,$,k,Le,ae){if(typeof g!="object"||g==null)return(0,t.jsxs)("span",{children:[$," ",k]});const F=Object.keys(g);if(F.length===2){const{sec:O,nsec:P}=g;if(typeof O=="number"&&typeof P=="number")return O<G?(0,T.LU)({sec:O,nsec:P}):(0,t.jsx)("span",{children:(0,T.WU)({sec:O,nsec:P},ae)})}if(F.length===2){const{x:O,y:P}=g;if(typeof O=="number"&&typeof P=="number"){const J=Math.sqrt(O*O+P*P);return(0,t.jsxs)("span",{children:["norm = ",J.toFixed(2)," ",M(O,P)]})}}else if(F.length===3){const{x:O,y:P,z:J}=g;if(typeof O=="number"&&typeof P=="number"&&typeof J=="number"){const ee=Math.sqrt(O*O+P*P+J*J);return(0,t.jsxs)("span",{children:["norm = ",ee.toFixed(2)," ",J===0?M(O,P):void 0]})}}else if(F.length===4){const{x:O,y:P,z:J,w:ee}=g;if(typeof O=="number"&&typeof P=="number"&&typeof J=="number"&&typeof ee=="number"){const[fe,Ze,He]=U(O,P,J,ee);return(0,t.jsxs)("span",{children:["rpy = [",h(fe),", ",h(Ze),", ",h(He),"]"]})}const{r:Te,g:De,b:se,a:je}=g;if(typeof Te=="number"&&typeof De=="number"&&typeof se=="number"&&typeof je=="number")return(0,t.jsx)("span",{children:(0,S.Z)({r:Te*255,g:De*255,b:se*255,a:je}).toHex8String()})}const oe=(0,b.DZ)(F,O=>{const P=g[O];if((0,m.Q)(O)&&(P==null||K.includes(typeof P)))return`${O}: ${P}`}).join(", ");return(0,t.jsxs)("span",{children:[$," ",oe.length>0?oe:k]})}function M(Z,g){if(!(Z===0&&g===0))return(0,t.jsx)("span",{style:{transform:`rotate(${Math.atan2(-g,Z)}rad)`,display:"inline-block"},children:"\u2192"})}function h(Z,g=2){return Number(Z.toFixed(g))}}}]);

//# sourceMappingURL=8586.c85fb2f6584516a920a5.js.map