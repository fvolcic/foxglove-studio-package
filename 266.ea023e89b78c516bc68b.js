(self.webpackChunk=self.webpackChunk||[]).push([[266],{81368:function(U,de,m){(function(N,I){U.exports=I(m(46506))})(this,function(p){return function(N){var I={};function A(E){if(I[E])return I[E].exports;var T=I[E]={i:E,l:!1,exports:{}};return N[E].call(T.exports,T,T.exports,A),T.l=!0,T.exports}return A.m=N,A.c=I,A.d=function(E,T,B){A.o(E,T)||Object.defineProperty(E,T,{enumerable:!0,get:B})},A.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},A.t=function(E,T){if(T&1&&(E=A(E)),T&8||T&4&&typeof E=="object"&&E&&E.__esModule)return E;var B=Object.create(null);if(A.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:E}),T&2&&typeof E!="string")for(var S in E)A.d(B,S,function(k){return E[k]}.bind(null,S));return B},A.n=function(E){var T=E&&E.__esModule?function(){return E.default}:function(){return E};return A.d(T,"a",T),T},A.o=function(E,T){return Object.prototype.hasOwnProperty.call(E,T)},A.p="",A(A.s=0)}([function(N,I,A){var E=A(1),T=function(S){S&&S("layout","dagre",E)};typeof cytoscape<"u"&&T(cytoscape),N.exports=T},function(N,I,A){function E(C){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(K){return typeof K}:E=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},E(C)}var T=function(z){return typeof z=="function"},B=A(2),S=A(3),k=A(4);function M(C){this.options=S({},B,C)}M.prototype.run=function(){var C=this.options,z=this,K=C.cy,_=C.eles,he=function(be,dt){return T(dt)?dt.apply(be,[be]):dt},te=C.boundingBox||{x1:0,y1:0,w:K.width(),h:K.height()};te.x2===void 0&&(te.x2=te.x1+te.w),te.w===void 0&&(te.w=te.x2-te.x1),te.y2===void 0&&(te.y2=te.y1+te.h),te.h===void 0&&(te.h=te.y2-te.y1);var j=new k.graphlib.Graph({multigraph:!0,compound:!0}),Y={},X=function(be,dt){dt!=null&&(Y[be]=dt)};X("nodesep",C.nodeSep),X("edgesep",C.edgeSep),X("ranksep",C.rankSep),X("rankdir",C.rankDir),X("align",C.align),X("ranker",C.ranker),X("acyclicer",C.acyclicer),j.setGraph(Y),j.setDefaultEdgeLabel(function(){return{}}),j.setDefaultNodeLabel(function(){return{}});var Z=_.nodes();T(C.sort)&&(Z=Z.sort(C.sort));for(var ee=0;ee<Z.length;ee++){var ie=Z[ee],ye=ie.layoutDimensions(C);j.setNode(ie.id(),{width:ye.w,height:ye.h,name:ie.id()})}for(var fe=0;fe<Z.length;fe++){var Re=Z[fe];Re.isChild()&&j.setParent(Re.id(),Re.parent().id())}var Ve=_.edges().stdFilter(function(Je){return!Je.source().isParent()&&!Je.target().isParent()});T(C.sort)&&(Ve=Ve.sort(C.sort));for(var Oe=0;Oe<Ve.length;Oe++){var $e=Ve[Oe];j.setEdge($e.source().id(),$e.target().id(),{minlen:he($e,C.minLen),weight:he($e,C.edgeWeight),name:$e.id()},$e.id())}k.layout(j);for(var Xe=j.nodes(),je=0;je<Xe.length;je++){var re=Xe[je],ce=j.node(re);K.getElementById(re).scratch().dagre=ce}var ge;C.boundingBox?(ge={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},Z.forEach(function(Je){var be=Je.scratch().dagre;ge.x1=Math.min(ge.x1,be.x),ge.x2=Math.max(ge.x2,be.x),ge.y1=Math.min(ge.y1,be.y),ge.y2=Math.max(ge.y2,be.y)}),ge.w=ge.x2-ge.x1,ge.h=ge.y2-ge.y1):ge=te;var Ne=function(be){if(C.boundingBox){var dt=ge.w===0?0:(be.x-ge.x1)/ge.w,_e=ge.h===0?0:(be.y-ge.y1)/ge.h;return{x:te.x1+dt*te.w,y:te.y1+_e*te.h}}else return be};return Z.layoutPositions(z,C,function(Je){Je=E(Je)==="object"?Je:this;var be=Je.scratch().dagre;return Ne({x:be.x,y:be.y})}),this},N.exports=M},function(N,I){var A={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(T){return 1},edgeWeight:function(T){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(T,B){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(T,B){return B},ready:function(){},sort:void 0,stop:function(){}};N.exports=A},function(N,I){N.exports=Object.assign!=null?Object.assign.bind(Object):function(A){for(var E=arguments.length,T=new Array(E>1?E-1:0),B=1;B<E;B++)T[B-1]=arguments[B];return T.forEach(function(S){Object.keys(S).forEach(function(k){return A[k]=S[k]})}),A}},function(N,I){N.exports=p}])})},93218:(U,de,m)=>{"use strict";var p=m(67649).Z,N=m(54073),I=m(71254),A=m(72579),E=m(16765),T=m(25497);function B(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var S=B(N),k=B(I),M=B(A),C=B(E),z=B(T);function K(r){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(r)}function _(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function he(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function te(r,e,t){return e&&he(r.prototype,e),t&&he(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function j(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Y(r,e){return X(r)||Z(r,e)||ee(r,e)||ye()}function X(r){if(Array.isArray(r))return r}function Z(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function ee(r,e){if(r){if(typeof r=="string")return ie(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ie(r,e)}}function ie(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fe=typeof window>"u"?null:window,Re=fe?fe.navigator:null;fe&&fe.document;var Ve=K(""),Oe=K({}),$e=K(function(){}),Xe=typeof HTMLElement>"u"?"undefined":K(HTMLElement),je=function(e){return e&&e.instanceString&&ce(e.instanceString)?e.instanceString():null},re=function(e){return e!=null&&K(e)==Ve},ce=function(e){return e!=null&&K(e)===$e},ge=function(e){return!Qe(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ne=function(e){return e!=null&&K(e)===Oe&&!ge(e)&&e.constructor===Object},Je=function(e){return e!=null&&K(e)===Oe},be=function(e){return e!=null&&K(e)===K(1)&&!isNaN(e)},dt=function(e){return be(e)&&Math.floor(e)===e},_e=function(e){if(Xe!=="undefined")return e!=null&&e instanceof HTMLElement},Qe=function(e){return Tt(e)||se(e)},Tt=function(e){return je(e)==="collection"&&e._private.single},se=function(e){return je(e)==="collection"&&!e._private.single},we=function(e){return je(e)==="core"},Ae=function(e){return je(e)==="stylesheet"},ze=function(e){return je(e)==="event"},et=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},ut=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Dt=function(e){return Ne(e)&&be(e.x1)&&be(e.x2)&&be(e.y1)&&be(e.y2)},qt=function(e){return Je(e)&&ce(e.then)},Jn=function(){return Re&&Re.userAgent.match(/msie|trident|edge/i)},At=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,l=t.apply(i,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},Rt=At(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dr=At(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),En=At(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),Cn=function(e){return et(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",qs="rgb[a]?\\(("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)(?:\\s*,\\s*("+Lt+"))?\\)",Js="rgb[a]?\\((?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)(?:\\s*,\\s*(?:"+Lt+"))?\\)",js="hsl[a]?\\(("+Lt+")\\s*,\\s*("+Lt+"[%])\\s*,\\s*("+Lt+"[%])(?:\\s*,\\s*("+Lt+"))?\\)",_s="hsl[a]?\\((?:"+Lt+")\\s*,\\s*(?:"+Lt+"[%])\\s*,\\s*(?:"+Lt+"[%])(?:\\s*,\\s*(?:"+Lt+"))?\\)",eu="\\#[0-9a-fA-F]{3}",tu="\\#[0-9a-fA-F]{6}",Di=function(e,t){return e<t?-1:e>t?1:0},ru=function(e,t){return-1*Di(e,t)},tt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},nu=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},au=function(e){var t,n,a,i,o,s,l,u;function f(h,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+(g-h)*6*y:y<1/2?g:y<2/3?h+(g-h)*(2/3-y)*6:h}var v=new RegExp("^"+js+"$").exec(e);if(v){if(n=parseInt(v[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(v[2]),a<0||a>100||(a=a/100,i=parseFloat(v[3]),i<0||i>100)||(i=i/100,o=v[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,c=2*i-d;s=Math.round(255*f(c,d,n+1/3)),l=Math.round(255*f(c,d,n)),u=Math.round(255*f(c,d,n-1/3))}t=[s,l,u,o]}return t},iu=function(e){var t,n=new RegExp("^"+qs+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},ou=function(e){return uu[e.toLowerCase()]},su=function(e){return(ge(e)?e:null)||ou(e)||nu(e)||iu(e)||au(e)},uu={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ki=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ne(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},Pi=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ne(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},Va=fe?fe.performance:null,Bi=Va&&Va.now?function(){return Va.now()}:function(){return Date.now()},lu=function(){if(fe){if(fe.requestAnimationFrame)return function(r){fe.requestAnimationFrame(r)};if(fe.mozRequestAnimationFrame)return function(r){fe.mozRequestAnimationFrame(r)};if(fe.webkitRequestAnimationFrame)return function(r){fe.webkitRequestAnimationFrame(r)};if(fe.msRequestAnimationFrame)return function(r){fe.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(Bi())},1e3/60)}}(),jn=function(e){return lu(e)},br=Bi,Jr=9261,Li=65599,Sn=5381,Mi=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jr,n=t,a;a=e.next(),!a.done;)n=n*Li+a.value|0;return n},Tn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jr;return t*Li+e|0},Dn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sn;return(t<<5)+t+e|0},fu=function(e,t){return e*2097152+t},Tr=function(e){return e[0]*2097152+e[1]},_n=function(e,t){return[Tn(e[0],t[0]),Dn(e[1],t[1])]},vu=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return Mi(o,t)},Fr=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return Mi(o,t)},Ai=function(){return du(arguments)},du=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=Fr(a):t=Fr(a,t)}return t},Ri=!0,cu=console.warn!=null,hu=console.trace!=null,Ga=Number.MAX_SAFE_INTEGER||9007199254740991,Ii=function(){return!0},ea=function(){return!1},Oi=function(){return 0},Ha=function(){},kt=function(e){throw new Error(e)},Ni=function(e){if(e!==void 0)Ri=!!e;else return Ri},yt=function(e){Ni()&&(cu?console.warn(e):(console.log(e),hu&&console.trace()))},gu=function(e){return tt({},e)},cr=function(e){return e==null?e:ge(e)?e.slice():Ne(e)?gu(e):e},pu=function(e){return e.slice()},zi=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},mu={},Fi=function(){return mu},Ot=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],s=n?.[o];a[o]=s===void 0?e[o]:s}return a}},Dr=function(e,t,n){for(var a=e.length-1;a>=0&&!(e[a]===t&&(e.splice(a,1),n));a--);},Wa=function(e){e.splice(0,e.length)},yu=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},ir=function(e,t,n){return n&&(t=En(n,t)),e[t]},kr=function(e,t,n,a){n&&(t=En(n,t)),e[t]=a},bu=function(){function r(){_(this,r),this._obj={}}return te(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),hr=typeof Map<"u"?Map:bu,wu="undefined",xu=function(){function r(e){if(_(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return te(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),jr=(typeof Set>"u"?"undefined":K(Set))!==wu?Set:xu,ta=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!we(e)){kt("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){kt("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new jr,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];ge(t.classes)?u=t.classes:re(t.classes)&&(u=t.classes.split(/\s+/));for(var f=0,v=u.length;f<v;f++){var d=u[f];!d||d===""||i.classes.add(d)}this.createEmitter();var c=t.style||t.css;c&&(yt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(c)),(n===void 0||n)&&this.restore()},Vi=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Ne(n)&&!Qe(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!ce(a)?a:i,a=ce(a)?a:function(){};for(var s=this._private.cy,l=n=re(n)?this.filter(n):n,u=[],f=[],v={},d={},c={},h=0,g,y=this.byGroup(),b=y.nodes,w=y.edges,x=0;x<l.length;x++){var P=l[x],V=P.id();P.isNode()&&(u.unshift(P),e.bfs&&(c[V]=!0,f.push(P)),d[V]=0)}for(var G=function(){var Q=e.bfs?u.shift():u.pop(),H=Q.id();if(e.dfs){if(c[H])return"continue";c[H]=!0,f.push(Q)}var ne=d[H],q=v[H],J=q!=null?q.source():null,oe=q!=null?q.target():null,le=q==null?void 0:Q.same(J)?oe[0]:J[0],me=void 0;if(me=a(Q,q,le,h++,ne),me===!0)return g=Q,"break";if(me===!1)return"break";for(var ue=Q.connectedEdges().filter(function(xe){return(!i||xe.source().same(Q))&&w.has(xe)}),pe=0;pe<ue.length;pe++){var Te=ue[pe],ke=Te.connectedNodes().filter(function(xe){return!xe.same(Q)&&b.has(xe)}),Se=ke.id();ke.length!==0&&!c[Se]&&(ke=ke[0],u.push(ke),e.bfs&&(c[Se]=!0,f.push(ke)),v[Se]=Te,d[Se]=d[H]+1)}};u.length!==0;){var D=G();if(D!=="continue"&&D==="break")break}for(var F=s.collection(),L=0;L<f.length;L++){var $=f[L],W=v[$.id()];W!=null&&F.push(W),F.push($)}return{path:s.collection(F),found:s.collection(g)}}},kn={breadthFirstSearch:Vi({bfs:!0}),depthFirstSearch:Vi({dfs:!0})};kn.bfs=kn.breadthFirstSearch,kn.dfs=kn.depthFirstSearch;var Eu=Ot({root:null,weight:function(e){return 1},directed:!1}),Cu={dijkstra:function(e){if(!Ne(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Eu(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=re(a)?this.filter(a)[0]:a[0],f={},v={},d={},c=this.byGroup(),h=c.nodes,g=c.edges;g.unmergeBy(function(ne){return ne.isLoop()});for(var y=function(q){return f[q.id()]},b=function(q,J){f[q.id()]=J,w.updateItem(q)},w=new k.default(function(ne,q){return y(ne)-y(q)}),x=0;x<h.length;x++){var P=h[x];f[P.id()]=P.same(u)?0:1/0,w.push(P)}for(var V=function(q,J){for(var oe=(o?q.edgesTo(J):q.edgesWith(J)).intersect(g),le=1/0,me,ue=0;ue<oe.length;ue++){var pe=oe[ue],Te=l(pe);(Te<le||!me)&&(le=Te,me=pe)}return{edge:me,dist:le}};w.size()>0;){var G=w.pop(),D=y(G),F=G.id();if(d[F]=D,D!==1/0)for(var L=G.neighborhood().intersect(h),$=0;$<L.length;$++){var W=L[$],O=W.id(),Q=V(G,W),H=D+Q.dist;H<y(W)&&(b(W,H),v[O]={node:G,edge:Q.edge})}}return{distanceTo:function(q){var J=re(q)?h.filter(q)[0]:q[0];return d[J.id()]},pathTo:function(q){var J=re(q)?h.filter(q)[0]:q[0],oe=[],le=J,me=le.id();if(J.length>0)for(oe.unshift(J);v[me];){var ue=v[me];oe.unshift(ue.edge),oe.unshift(ue.node),le=ue.node,me=le.id()}return s.spawn(oe)}}}},Su={kruskal:function(e){e=e||function(x){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),s=n,l=function(P){for(var V=0;V<o.length;V++){var G=o[V];if(G.has(P))return V}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var f=a.sort(function(x,P){return e(x)-e(P)}),v=0;v<f.length;v++){var d=f[v],c=d.source()[0],h=d.target()[0],g=l(c),y=l(h),b=o[g],w=o[y];g!==y&&(s.merge(d),b.merge(w),o.splice(y,1))}return s}},Tu=Ot({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Du={aStar:function(e){var t=this.cy(),n=Tu(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var u=a.id(),f=i.id(),v={},d={},c={},h=new k.default(function(me,ue){return d[me.id()]-d[ue.id()]}),g=new jr,y={},b={},w=function(ue,pe){h.push(ue),g.add(pe)},x,P,V=function(){x=h.pop(),P=x.id(),g.delete(P)},G=function(ue){return g.has(ue)};w(a,u),v[u]=0,d[u]=o(a);for(var D=0;h.size()>0;){if(V(),D++,P===f){for(var F=[],L=i,$=f,W=b[$];F.unshift(L),W!=null&&F.unshift(W),L=y[$],L!=null;)$=L.id(),W=b[$];return{found:!0,distance:v[P],path:this.spawn(F),steps:D}}c[P]=!0;for(var O=x._private.edges,Q=0;Q<O.length;Q++){var H=O[Q];if(this.hasElementWithId(H.id())&&!(s&&H.data("source")!==P)){var ne=H.source(),q=H.target(),J=ne.id()!==P?ne:q,oe=J.id();if(this.hasElementWithId(oe)&&!c[oe]){var le=v[P]+l(H);if(!G(oe)){v[oe]=le,d[oe]=le+o(J),w(J,oe),y[oe]=x,b[oe]=H;continue}le<v[oe]&&(v[oe]=le,d[oe]=le+o(J),y[oe]=x,b[oe]=H)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},ku=Ot({weight:function(e){return 1},directed:!1}),Pu={floydWarshall:function(e){for(var t=this.cy(),n=ku(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,v=f*f,d=function(Te){return l.indexOf(Te)},c=function(Te){return l[Te]},h=new Array(v),g=0;g<v;g++){var y=g%f,b=(g-y)/f;b===y?h[g]=0:h[g]=1/0}for(var w=new Array(v),x=new Array(v),P=0;P<u.length;P++){var V=u[P],G=V.source()[0],D=V.target()[0];if(G!==D){var F=d(G),L=d(D),$=F*f+L,W=o(V);if(h[$]>W&&(h[$]=W,w[$]=L,x[$]=V),!i){var O=L*f+F;!i&&h[O]>W&&(h[O]=W,w[O]=F,x[O]=V)}}}for(var Q=0;Q<f;Q++)for(var H=0;H<f;H++)for(var ne=H*f+Q,q=0;q<f;q++){var J=H*f+q,oe=Q*f+q;h[ne]+h[oe]<h[J]&&(h[J]=h[ne]+h[oe],w[J]=w[ne])}var le=function(Te){return(re(Te)?t.filter(Te):Te)[0]},me=function(Te){return d(le(Te))},ue={distance:function(Te,ke){var Se=me(Te),xe=me(ke);return h[Se*f+xe]},path:function(Te,ke){var Se=me(Te),xe=me(ke),ae=c(Se);if(Se===xe)return ae.collection();if(w[Se*f+xe]==null)return t.collection();var De=t.collection(),Pe=Se,Ie;for(De.merge(ae);Se!==xe;)Pe=Se,Se=w[Se*f+xe],Ie=x[Pe*f+Se],De.merge(Ie),De.merge(c(Se));return De}};return ue}},Bu=Ot({weight:function(e){return 1},directed:!1,root:null}),Lu={bellmanFord:function(e){var t=this,n=Bu(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),f=this.byGroup(),v=f.edges,d=f.nodes,c=d.length,h=new hr,g=!1,y=[];o=u.collection(o)[0],v.unmergeBy(function(Ye){return Ye.isLoop()});for(var b=v.length,w=function(We){var Ze=h.get(We.id());return Ze||(Ze={},h.set(We.id(),Ze)),Ze},x=function(We){return(re(We)?u.$(We):We)[0]},P=function(We){return w(x(We)).dist},V=function(We){for(var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,vt=x(We),it=[],rt=vt;;){if(rt==null)return t.spawn();var Le=w(rt),R=Le.edge,ve=Le.pred;if(it.unshift(rt[0]),rt.same(Ze)&&it.length>0)break;R!=null&&it.unshift(R),rt=ve}return l.spawn(it)},G=0;G<c;G++){var D=d[G],F=w(D);D.same(o)?F.dist=0:F.dist=1/0,F.pred=null,F.edge=null}for(var L=!1,$=function(We,Ze,vt,it,rt,Le){var R=it.dist+Le;R<rt.dist&&!vt.same(it.edge)&&(rt.dist=R,rt.pred=We,rt.edge=vt,L=!0)},W=1;W<c;W++){L=!1;for(var O=0;O<b;O++){var Q=v[O],H=Q.source(),ne=Q.target(),q=s(Q),J=w(H),oe=w(ne);$(H,ne,Q,J,oe,q),i||$(ne,H,Q,oe,J,q)}if(!L)break}if(L)for(var le=[],me=0;me<b;me++){var ue=v[me],pe=ue.source(),Te=ue.target(),ke=s(ue),Se=w(pe).dist,xe=w(Te).dist;if(Se+ke<xe||!i&&xe+ke<Se)if(g||(yt("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var ae=[];Se+ke<xe&&ae.push(pe),!i&&xe+ke<Se&&ae.push(Te);for(var De=ae.length,Pe=0;Pe<De;Pe++){var Ie=ae[Pe],Ge=[Ie];Ge.push(w(Ie).edge);for(var nt=w(Ie).pred;Ge.indexOf(nt)===-1;)Ge.push(nt),Ge.push(w(nt).edge),nt=w(nt).pred;Ge=Ge.slice(Ge.indexOf(nt));for(var at=Ge[0].id(),He=0,Fe=2;Fe<Ge.length;Fe+=2)Ge[Fe].id()<at&&(at=Ge[Fe].id(),He=Fe);Ge=Ge.slice(He).concat(Ge.slice(0,He)),Ge.push(Ge[0]);var qe=Ge.map(function(Ye){return Ye.id()}).join(",");le.indexOf(qe)===-1&&(y.push(l.spawn(Ge)),le.push(qe))}}else break}return{distanceTo:P,pathTo:V,hasNegativeWeightCycle:g,negativeWeightCycles:y}}},Mu=Math.sqrt(2),Au=function(e,t,n){n.length===0&&kt("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=t[i],l=t[o],u=n,f=u.length-1;f>=0;f--){var v=u[f],d=v[1],c=v[2];(t[d]===s&&t[c]===l||t[d]===l&&t[c]===s)&&u.splice(f,1)}for(var h=0;h<u.length;h++){var g=u[h];g[1]===l?(u[h]=g.slice(),u[h][1]=s):g[2]===l&&(u[h]=g.slice(),u[h][2]=s)}for(var y=0;y<t.length;y++)t[y]===l&&(t[y]=s);return u},$a=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=Au(i,e,t),n--}return t},Ru={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(oe){return oe.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Mu);if(i<2){kt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],f=0;f<o;f++){var v=a[f];u.push([f,n.indexOf(v.source()),n.indexOf(v.target())])}for(var d=1/0,c=[],h=new Array(i),g=new Array(i),y=new Array(i),b=function(le,me){for(var ue=0;ue<i;ue++)me[ue]=le[ue]},w=0;w<=s;w++){for(var x=0;x<i;x++)g[x]=x;var P=$a(g,u.slice(),i,l),V=P.slice();b(g,y);var G=$a(g,P,l,2),D=$a(y,V,l,2);G.length<=D.length&&G.length<d?(d=G.length,c=G,b(g,h)):D.length<=G.length&&D.length<d&&(d=D.length,c=D,b(y,h))}for(var F=this.spawn(c.map(function(oe){return a[oe[0]]})),L=this.spawn(),$=this.spawn(),W=h[0],O=0;O<h.length;O++){var Q=h[O],H=n[O];Q===W?L.merge(H):$.merge(H)}var ne=function(le){var me=e.spawn();return le.forEach(function(ue){me.merge(ue),ue.connectedEdges().forEach(function(pe){e.contains(pe)&&!F.contains(pe)&&me.merge(pe)})}),me},q=[ne(L),ne($)],J={cut:F,components:q,partition1:L,partition2:$};return J}},Iu=function(e){return{x:e.x,y:e.y}},ra=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Gi=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},_r=function(e){return{x:e[0],y:e[1]}},Ou=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},Nu=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},zu=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},Fu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(d,c){return d-c});var f=e.length,v=Math.floor(f/2);return f%2!==0?e[v+1+s]:(e[v-1+s]+e[v+s])/2},Vu=function(e){return Math.PI*e/180},na=function(e,t){return Math.atan2(t,e)-Math.PI/2},Ka=Math.log2||function(r){return Math.log(r)/Math.log(2)},Hi=function(e){return e>0?1:e<0?-1:0},Vr=function(e,t){return Math.sqrt(Gr(e,t))},Gr=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},Gu=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},It=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},en=function(e,t,n,a){return{x:It(e.x,t.x,n.x,a),y:It(e.y,t.y,n.y,a)}},Hu=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Vr(e,t),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Pn=function(e,t,n){return Math.max(e,Math.min(n,t))},Jt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Wu=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},$u=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Ku=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},Yu=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},aa=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ya=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var s=Y(t,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Wi=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ua=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},tn=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Uu=function(e,t){return tn(e,t.x,t.y)},$i=function(e,t){return tn(e,t.x1,t.y1)&&tn(e,t.x2,t.y2)},Ki=function(e,t,n,a,i,o,s){var l=Mn(i,o),u=i/2,f=o/2,v;{var d=n-u+l-s,c=a-f-s,h=n+u-l+s,g=c;if(v=Pr(e,t,n,a,d,c,h,g,!1),v.length>0)return v}{var y=n+u+s,b=a-f+l-s,w=y,x=a+f-l+s;if(v=Pr(e,t,n,a,y,b,w,x,!1),v.length>0)return v}{var P=n-u+l-s,V=a+f+s,G=n+u-l+s,D=V;if(v=Pr(e,t,n,a,P,V,G,D,!1),v.length>0)return v}{var F=n-u-s,L=a-f+l-s,$=F,W=a+f-l+s;if(v=Pr(e,t,n,a,F,L,$,W,!1),v.length>0)return v}var O;{var Q=n-u+l,H=a-f+l;if(O=Bn(e,t,n,a,Q,H,l+s),O.length>0&&O[0]<=Q&&O[1]<=H)return[O[0],O[1]]}{var ne=n+u-l,q=a-f+l;if(O=Bn(e,t,n,a,ne,q,l+s),O.length>0&&O[0]>=ne&&O[1]<=q)return[O[0],O[1]]}{var J=n+u-l,oe=a+f-l;if(O=Bn(e,t,n,a,J,oe,l+s),O.length>0&&O[0]>=J&&O[1]>=oe)return[O[0],O[1]]}{var le=n-u+l,me=a+f-l;if(O=Bn(e,t,n,a,le,me,l+s),O.length>0&&O[0]<=le&&O[1]>=me)return[O[0],O[1]]}return[]},Xu=function(e,t,n,a,i,o,s){var l=s,u=Math.min(n,i),f=Math.max(n,i),v=Math.min(a,o),d=Math.max(a,o);return u-l<=e&&e<=f+l&&v-l<=t&&t<=d+l},Zu=function(e,t,n,a,i,o,s,l,u){var f={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<f.x1||e>f.x2||t<f.y1||t>f.y2)},Qu=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-t+o)/s,u=(-t-o)/s;return[l,u]},qu=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var s,l,u,f,v,d,c,h;if(l=(3*n-t*t)/9,u=-(27*a)+t*(9*n-2*(t*t)),u/=54,s=l*l*l+u*u,i[1]=0,c=t/3,s>0){v=u+Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),d=u-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-c+v+d,c+=(v+d)/2,i[4]=i[2]=-c,c=Math.sqrt(3)*(-d+v)/2,i[3]=c,i[5]=-c;return}if(i[5]=i[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-c+2*h,i[4]=i[2]=-(h+c);return}l=-l,f=l*l*l,f=Math.acos(u/Math.sqrt(f)),h=2*Math.sqrt(l),i[0]=-c+h*Math.cos(f/3),i[2]=-c+h*Math.cos((f+2*Math.PI)/3),i[4]=-c+h*Math.cos((f+4*Math.PI)/3)},Ju=function(e,t,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,f=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,v=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*t+2*o*o+2*o*t-l*t,d=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,c=[];qu(u,f,v,d,c);for(var h=1e-7,g=[],y=0;y<6;y+=2)Math.abs(c[y+1])<h&&c[y]>=0&&c[y]<=1&&g.push(c[y]);g.push(1),g.push(0);for(var b=-1,w,x,P,V=0;V<g.length;V++)w=Math.pow(1-g[V],2)*n+2*(1-g[V])*g[V]*i+g[V]*g[V]*s,x=Math.pow(1-g[V],2)*a+2*(1-g[V])*g[V]*o+g[V]*g[V]*l,P=Math.pow(w-e,2)+Math.pow(x-t,2),b>=0?P<b&&(b=P):b=P;return b},ju=function(e,t,n,a,i,o){var s=[e-n,t-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],v=s[0]*l[0]+s[1]*l[1],d=v*v/u;return v<0?f:d>u?(e-i)*(e-i)+(t-o)*(t-o):f-d},jt=function(e,t,n){for(var a,i,o,s,l,u=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(o=n[(f+1)*2],s=n[(f+1)*2+1]):(o=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>t&&u++;else continue;return u%2!==0},wr=function(e,t,n,a,i,o,s,l,u){var f=new Array(n.length),v;l[0]!=null?(v=Math.atan(l[1]/l[0]),l[0]<0?v=v+Math.PI/2:v=-v-Math.PI/2):v=l;for(var d=Math.cos(-v),c=Math.sin(-v),h=0;h<f.length/2;h++)f[h*2]=o/2*(n[h*2]*d-n[h*2+1]*c),f[h*2+1]=s/2*(n[h*2+1]*d+n[h*2]*c),f[h*2]+=a,f[h*2+1]+=i;var g;if(u>0){var y=Ui(f,-u);g=Yi(y)}else g=f;return jt(e,t,g)},_u=function(e,t,n,a,i,o,s){for(var l=new Array(n.length),u=o/2,f=s/2,v=Qa(o,s),d=v*v,c=0;c<n.length/4;c++){var h=void 0,g=void 0;c===0?h=n.length-2:h=c*4-2,g=c*4+2;var y=a+u*n[c*4],b=i+f*n[c*4+1],w=-n[h]*n[g]-n[h+1]*n[g+1],x=v/Math.tan(Math.acos(w)/2),P=y-x*n[h],V=b-x*n[h+1],G=y+x*n[g],D=b+x*n[g+1];l[c*4]=P,l[c*4+1]=V,l[c*4+2]=G,l[c*4+3]=D;var F=n[h+1],L=-n[h],$=F*n[g]+L*n[g+1];$<0&&(F*=-1,L*=-1);var W=P+F*v,O=V+L*v,Q=Math.pow(W-e,2)+Math.pow(O-t,2);if(Q<=d)return!0}return jt(e,t,l)},Yi=function(e){for(var t=new Array(e.length/2),n,a,i,o,s,l,u,f,v=0;v<e.length/4;v++){n=e[v*4],a=e[v*4+1],i=e[v*4+2],o=e[v*4+3],v<e.length/4-1?(s=e[(v+1)*4],l=e[(v+1)*4+1],u=e[(v+1)*4+2],f=e[(v+1)*4+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var d=Pr(n,a,i,o,s,l,u,f,!0);t[v*2]=d[0],t[v*2+1]=d[1]}return t},Ui=function(e,t){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,f=-(o-a),v=Math.sqrt(u*u+f*f),d=u/v,c=f/v;n[l*4]=a+d*t,n[l*4+1]=i+c*t,n[l*4+2]=o+d*t,n[l*4+3]=s+c*t}return n},el=function(e,t,n,a,i,o){var s=n-e,l=a-t;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var v=f/u;return[(n-e)*v+e,(a-t)*v+t]},Hr=function(e,t,n,a,i,o,s){return e-=i,t-=o,e/=n/2+s,t/=a/2+s,e*e+t*t<=1},Bn=function(e,t,n,a,i,o,s){var l=[n-e,a-t],u=[e-i,t-o],f=l[0]*l[0]+l[1]*l[1],v=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-s*s,c=v*v-4*f*d;if(c<0)return[];var h=(-v+Math.sqrt(c))/(2*f),g=(-v-Math.sqrt(c))/(2*f),y=Math.min(h,g),b=Math.max(h,g),w=[];if(y>=0&&y<=1&&w.push(y),b>=0&&b<=1&&w.push(b),w.length===0)return[];var x=w[0]*l[0]+e,P=w[0]*l[1]+t;if(w.length>1){if(w[0]==w[1])return[x,P];var V=w[1]*l[0]+e,G=w[1]*l[1]+t;return[x,P,V,G]}else return[x,P]},Xa=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Pr=function(e,t,n,a,i,o,s,l,u){var f=e-i,v=n-e,d=s-i,c=t-o,h=a-t,g=l-o,y=d*c-g*f,b=v*c-h*f,w=g*v-d*h;if(w!==0){var x=y/w,P=b/w,V=.001,G=0-V,D=1+V;return G<=x&&x<=D&&G<=P&&P<=D?[e+x*v,t+x*h]:u?[e+x*v,t+x*h]:[]}else return y===0||b===0?Xa(e,n,s)===s?[s,l]:Xa(e,n,i)===i?[i,o]:Xa(i,s,n)===n?[n,a]:[]:[]},Ln=function(e,t,n,a,i,o,s,l){var u=[],f,v=new Array(n.length),d=!0;o==null&&(d=!1);var c;if(d){for(var h=0;h<v.length/2;h++)v[h*2]=n[h*2]*o+a,v[h*2+1]=n[h*2+1]*s+i;if(l>0){var g=Ui(v,-l);c=Yi(g)}else c=v}else c=n;for(var y,b,w,x,P=0;P<c.length/2;P++)y=c[P*2],b=c[P*2+1],P<c.length/2-1?(w=c[(P+1)*2],x=c[(P+1)*2+1]):(w=c[0],x=c[1]),f=Pr(e,t,a,i,y,b,w,x),f.length!==0&&u.push(f[0],f[1]);return u},tl=function(e,t,n,a,i,o,s,l){for(var u=[],f,v=new Array(n.length),d=o/2,c=s/2,h=Qa(o,s),g=0;g<n.length/4;g++){var y=void 0,b=void 0;g===0?y=n.length-2:y=g*4-2,b=g*4+2;var w=a+d*n[g*4],x=i+c*n[g*4+1],P=-n[y]*n[b]-n[y+1]*n[b+1],V=h/Math.tan(Math.acos(P)/2),G=w-V*n[y],D=x-V*n[y+1],F=w+V*n[b],L=x+V*n[b+1];g===0?(v[n.length-2]=G,v[n.length-1]=D):(v[g*4-2]=G,v[g*4-1]=D),v[g*4]=F,v[g*4+1]=L;var $=n[y+1],W=-n[y],O=$*n[b]+W*n[b+1];O<0&&($*=-1,W*=-1);var Q=G+$*h,H=D+W*h;f=Bn(e,t,a,i,Q,H,h),f.length!==0&&u.push(f[0],f[1])}for(var ne=0;ne<v.length/4;ne++)f=Pr(e,t,a,i,v[ne*4],v[ne*4+1],v[ne*4+2],v[ne*4+3],!1),f.length!==0&&u.push(f[0],f[1]);if(u.length>2){for(var q=[u[0],u[1]],J=Math.pow(q[0]-e,2)+Math.pow(q[1]-t,2),oe=1;oe<u.length/2;oe++){var le=Math.pow(u[oe*2]-e,2)+Math.pow(u[oe*2+1]-t,2);le<=J&&(q[0]=u[oe*2],q[1]=u[oe*2+1],J=le)}return q}return u},ia=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Xt=function(e,t){var n=Za(e,t);return n=Xi(n),n},Xi=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);for(var f=2/(s-i),v=2/(l-o),d=0;d<a;d++)t=e[2*d]=e[2*d]*f,n=e[2*d+1]=e[2*d+1]*v,i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var c=0;c<a;c++)n=e[2*c+1]=e[2*c+1]+(-1-o);return e},Za=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Mn=function(e,t){return Math.min(e/4,t/4,8)},Qa=function(e,t){return Math.min(e/10,t/10,8)},Zi=function(){return 8},rl=function(e,t,n){return[e-2*t+n,2*(t-e),e]},qa=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},nl=Ot({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),al={pageRank:function(e){for(var t=nl(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,v=u.length,d=v*v,c=f.length,h=new Array(d),g=new Array(v),y=(1-n)/v,b=0;b<v;b++){for(var w=0;w<v;w++){var x=b*v+w;h[x]=0}g[b]=0}for(var P=0;P<c;P++){var V=f[P],G=V.data("source"),D=V.data("target");if(G!==D){var F=u.indexOfId(G),L=u.indexOfId(D),$=o(V),W=L*v+F;h[W]+=$,g[F]+=$}}for(var O=1/v+y,Q=0;Q<v;Q++)if(g[Q]===0)for(var H=0;H<v;H++){var ne=H*v+Q;h[ne]=O}else for(var q=0;q<v;q++){var J=q*v+Q;h[J]=h[J]/g[Q]+y}for(var oe=new Array(v),le=new Array(v),me,ue=0;ue<v;ue++)oe[ue]=1;for(var pe=0;pe<i;pe++){for(var Te=0;Te<v;Te++)le[Te]=0;for(var ke=0;ke<v;ke++)for(var Se=0;Se<v;Se++){var xe=ke*v+Se;le[ke]+=h[xe]*oe[Se]}Gu(le),me=oe,oe=le,le=me;for(var ae=0,De=0;De<v;De++){var Pe=me[De]-oe[De];ae+=Pe*Pe}if(ae<a)break}var Ie={rank:function(nt){return nt=s.collection(nt)[0],oe[u.indexOf(nt)]}};return Ie}},Qi=Ot({root:null,weight:function(e){return 1},directed:!1,alpha:0}),rn={degreeCentralityNormalized:function(e){e=Qi(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},v={},d=0,c=0,h=0;h<a;h++){var g=n[h],y=g.id();e.root=g;var b=this.degreeCentrality(e);d<b.indegree&&(d=b.indegree),c<b.outdegree&&(c=b.outdegree),f[y]=b.indegree,v[y]=b.outdegree}return{indegree:function(x){return d==0?0:(re(x)&&(x=t.filter(x)),f[x.id()]/d)},outdegree:function(x){return c===0?0:(re(x)&&(x=t.filter(x)),v[x.id()]/c)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(x){return o===0?0:(re(x)&&(x=t.filter(x)),i[x.id()]/o)}}}},degreeCentrality:function(e){e=Qi(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=t.collection(i)[0],s){for(var c=i.connectedEdges(),h=c.filter(function(G){return G.target().same(i)&&n.has(G)}),g=c.filter(function(G){return G.source().same(i)&&n.has(G)}),y=h.length,b=g.length,w=0,x=0,P=0;P<h.length;P++)w+=o(h[P]);for(var V=0;V<g.length;V++)x+=o(g[V]);return{indegree:Math.pow(y,1-l)*Math.pow(w,l),outdegree:Math.pow(b,1-l)*Math.pow(x,l)}}else{for(var u=i.connectedEdges().intersection(n),f=u.length,v=0,d=0;d<u.length;d++)v+=o(u[d]);return{degree:Math.pow(f,1-l)*Math.pow(v,l)}}}};rn.dc=rn.degreeCentrality,rn.dcn=rn.degreeCentralityNormalised=rn.degreeCentralityNormalized;var qi=Ot({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),nn={closenessCentralityNormalized:function(e){for(var t=qi(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),v=0;v<u.length;v++){for(var d=0,c=u[v],h=0;h<u.length;h++)if(v!==h){var g=f.distance(c,u[h]);n?d+=1/g:d+=g}n||(d=1/d),l<d&&(l=d),s[c.id()]=d}return{closeness:function(b){return l==0?0:(re(b)?b=o.filter(b)[0].id():b=b.id(),s[b]/l)}}},closenessCentrality:function(e){var t=qi(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),f=0;f<u.length;f++){var v=u[f];if(!v.same(n)){var d=s.distanceTo(v);o?l+=1/d:l+=d}}return o?l:1/l}};nn.cc=nn.closenessCentrality,nn.ccn=nn.closenessCentralityNormalised=nn.closenessCentralityNormalized;var il=Ot({weight:null,directed:!1}),Ja={betweennessCentrality:function(e){for(var t=il(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},f=0,v={set:function(x,P){u[x]=P,P>f&&(f=P)},get:function(x){return u[x]}},d=0;d<s.length;d++){var c=s[d],h=c.id();n?l[h]=c.outgoers().nodes():l[h]=c.openNeighborhood().nodes(),v.set(h,0)}for(var g=function(x){for(var P=s[x].id(),V=[],G={},D={},F={},L=new k.default(function(Se,xe){return F[Se]-F[xe]}),$=0;$<s.length;$++){var W=s[$].id();G[W]=[],D[W]=0,F[W]=1/0}for(D[P]=1,F[P]=0,L.push(P);!L.empty();){var O=L.pop();if(V.push(O),i)for(var Q=0;Q<l[O].length;Q++){var H=l[O][Q],ne=o.getElementById(O),q=void 0;ne.edgesTo(H).length>0?q=ne.edgesTo(H)[0]:q=H.edgesTo(ne)[0];var J=a(q);H=H.id(),F[H]>F[O]+J&&(F[H]=F[O]+J,L.nodes.indexOf(H)<0?L.push(H):L.updateItem(H),D[H]=0,G[H]=[]),F[H]==F[O]+J&&(D[H]=D[H]+D[O],G[H].push(O))}else for(var oe=0;oe<l[O].length;oe++){var le=l[O][oe].id();F[le]==1/0&&(L.push(le),F[le]=F[O]+1),F[le]==F[O]+1&&(D[le]=D[le]+D[O],G[le].push(O))}}for(var me={},ue=0;ue<s.length;ue++)me[s[ue].id()]=0;for(;V.length>0;){for(var pe=V.pop(),Te=0;Te<G[pe].length;Te++){var ke=G[pe][Te];me[ke]=me[ke]+D[ke]/D[pe]*(1+me[pe])}pe!=s[x].id()&&v.set(pe,v.get(pe)+me[pe])}},y=0;y<s.length;y++)g(y);var b={betweenness:function(x){var P=o.collection(x).id();return v.get(P)},betweennessNormalized:function(x){if(f==0)return 0;var P=o.collection(x).id();return v.get(P)/f}};return b.betweennessNormalised=b.betweennessNormalized,b}};Ja.bc=Ja.betweennessCentrality;var ol=Ot({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),sl=function(e){return ol(e)},ul=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},ll=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},Ji=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},fl=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*t[s*n+l]}return a},vl=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=fl(e,a,t);return e},dl=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return Ji(a,t),a},cl=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},hl=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var s=[],l=0;l<t;l++)Math.round(e[o*t+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},gl=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},pl=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&gl(e[t],e[n])&&e.splice(n,1);return e},ji=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=sl(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var l=t.length,u=l*l,f=new Array(u),v,d=0;d<u;d++)f[d]=0;for(var c=0;c<n.length;c++){var h=n[c],g=o[h.source().id()],y=o[h.target().id()],b=ul(h,i.attributes);f[g*l+y]+=b,f[y*l+g]+=b}ll(f,l,i.multFactor),Ji(f,l);for(var w=!0,x=0;w&&x<i.maxIterations;)w=!1,v=vl(f,l,i.expandFactor),f=dl(v,l,i.inflateFactor),cl(f,v,u,4)||(w=!0),x++;var P=hl(f,l,t,a);return P=pl(P),P},ml={markovClustering:ji,mcl:ji},yl=function(e){return e},_i=function(e,t){return Math.abs(t-e)},eo=function(e,t,n){return e+_i(t,n)},to=function(e,t,n){return e+Math.pow(n-t,2)},bl=function(e){return Math.sqrt(e)},wl=function(e,t,n){return Math.max(e,_i(t,n))},An=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:yl,s=a,l,u,f=0;f<e;f++)l=t(f),u=n(f),s=i(s,l,u);return o(s)},an={euclidean:function(e,t,n){return e>=2?An(e,t,n,0,to,bl):An(e,t,n,0,eo)},squaredEuclidean:function(e,t,n){return An(e,t,n,0,to)},manhattan:function(e,t,n){return An(e,t,n,0,eo)},max:function(e,t,n){return An(e,t,n,-1/0,wl)}};an["squared-euclidean"]=an.squaredEuclidean,an.squaredeuclidean=an.squaredEuclidean;function oa(r,e,t,n,a,i){var o;return ce(r)?o=r:o=an[r]||an.euclidean,e===0&&ce(r)?o(a,i):o(e,t,n,a,i)}var xl=Ot({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ja=function(e){return xl(e)},sa=function(e,t,n,a,i){var o=i!=="kMedoids",s=o?function(v){return n[v]}:function(v){return a[v](n)},l=function(d){return a[d](t)},u=n,f=t;return oa(e,a.length,s,l,u,f)},_a=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(t),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var f=0;f<t;f++){l=[];for(var v=0;v<a;v++)l[v]=Math.random()*(o[v]-i[v])+i[v];s[f]=l}return s},ro=function(e,t,n,a,i){for(var o=1/0,s=0,l=0;l<t.length;l++){var u=sa(n,e,t[l],a,i);u<o&&(o=u,s=l)}return s},no=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},El=function(e,t,n){return Math.abs(t-e)<=n},Cl=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},Sl=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},ao=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];Sl(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},io=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=sa("manhattan",t[i],e,n,"kMedoids");return a},Tl=function(e){var t=this.cy(),n=this.nodes(),a=null,i=ja(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=_a(n,i.k,i.attributes)):K(i.testCentroids)==="object"?l=i.testCentroids:l=_a(n,i.k,i.attributes):l=_a(n,i.k,i.attributes);for(var u=!0,f=0;u&&f<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],s[a.id()]=ro(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var d=0;d<i.k;d++){var c=no(d,n,s);if(c.length!==0){for(var h=i.attributes.length,g=l[d],y=new Array(h),b=new Array(h),w=0;w<h;w++){b[w]=0;for(var x=0;x<c.length;x++)a=c[x],b[w]+=i.attributes[w](a);y[w]=b[w]/c.length,El(y[w],g[w],i.sensitivityThreshold)||(u=!0)}l[d]=y,o[d]=t.collection(c)}}f++}return o},Dl=function(e){var t=this.cy(),n=this.nodes(),a=null,i=ja(e),o=new Array(i.k),s,l={},u,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(K(i.testCentroids)==="object"?s=i.testCentroids:s=ao(n,i.k)):s=ao(n,i.k);for(var v=!0,d=0;v&&d<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],l[a.id()]=ro(a,s,i.distance,i.attributes,"kMedoids");v=!1;for(var h=0;h<s.length;h++){var g=no(h,n,l);if(g.length!==0){f[h]=io(s[h],g,i.attributes);for(var y=0;y<g.length;y++)u=io(g[y],g,i.attributes),u<f[h]&&(f[h]=u,s[h]=g[y],v=!0);o[h]=t.collection(g)}}d++}return o},kl=function(e,t,n,a,i){for(var o,s,l=0;l<t.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var f=0;f<e.length;f++)for(var v=0;v<i.attributes.length;v++){o=0,s=0;for(var d=0;d<t.length;d++)o+=a[d][f]*i.attributes[v](t[d]),s+=a[d][f];e[f][v]=o/s}},Pl=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,l,u,f=2/(i.m-1),v=0;v<n.length;v++)for(var d=0;d<a.length;d++){s=0;for(var c=0;c<n.length;c++)l=sa(i.distance,a[d],n[v],i.attributes,"cmeans"),u=sa(i.distance,a[d],n[c],i.attributes,"cmeans"),s+=Math.pow(l/u,f);e[d][v]=1/s}},Bl=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<t.length;u++){s=-1/0,l=-1;for(var f=0;f<t[0].length;f++)t[u][f]>s&&(s=t[u][f],l=f);i[l].push(e[u])}for(var v=0;v<i.length;v++)i[v]=a.collection(i[v]);return i},oo=function(e){var t=this.cy(),n=this.nodes(),a=ja(e),i,o,s,l,u;l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var v=0;v<n.length;v++)s[v]=new Array(a.k);for(var d=0;d<n.length;d++){for(var c=0,h=0;h<a.k;h++)s[d][h]=Math.random(),c+=s[d][h];for(var g=0;g<a.k;g++)s[d][g]=s[d][g]/c}o=new Array(a.k);for(var y=0;y<a.k;y++)o[y]=new Array(a.attributes.length);u=new Array(n.length);for(var b=0;b<n.length;b++)u[b]=new Array(a.k);for(var w=!0,x=0;w&&x<a.maxIterations;)w=!1,kl(o,n,s,u,a),Pl(s,l,o,n,a),Cl(s,l,a.sensitivityThreshold)||(w=!0),x++;return i=Bl(n,s,a,t),{clusters:i,degreeOfMembership:s}},Ll={kMeans:Tl,kMedoids:Dl,fuzzyCMeans:oo,fcm:oo},Ml=Ot({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Al={single:"min",complete:"max"},Rl=function(e){var t=Ml(e),n=Al[t.linkage];return n!=null&&(t.linkage=n),t},so=function(e,t,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,f=function(L,$){return oa(i.distance,u.length,function(W){return u[W](L)},function(W){return u[W]($)},L,$)},v=0;v<e.length;v++){var d=e[v].key,c=n[d][a[d]];c<s&&(o=d,s=c)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=t[o],g=t[a[o]],y;i.mode==="dendrogram"?y={left:h,right:g,key:h.key}:y={value:h.value.concat(g.value),key:h.key},e[h.index]=y,e.splice(g.index,1),t[h.key]=y;for(var b=0;b<e.length;b++){var w=e[b];h.key===w.key?l=1/0:i.linkage==="min"?(l=n[h.key][w.key],n[h.key][w.key]>n[g.key][w.key]&&(l=n[g.key][w.key])):i.linkage==="max"?(l=n[h.key][w.key],n[h.key][w.key]<n[g.key][w.key]&&(l=n[g.key][w.key])):i.linkage==="mean"?l=(n[h.key][w.key]*h.size+n[g.key][w.key]*g.size)/(h.size+g.size):i.mode==="dendrogram"?l=f(w.value,h.value):l=f(w.value[0],h.value[0]),n[h.key][w.key]=n[w.key][h.key]=l}for(var x=0;x<e.length;x++){var P=e[x].key;if(a[P]===h.key||a[P]===g.key){for(var V=P,G=0;G<e.length;G++){var D=e[G].key;n[P][D]<n[P][V]&&(V=D)}a[P]=V}e[x].index=x}return h.key=g.key=h.index=g.index=null,!0},ua=function r(e,t,n){e&&(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},Il=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),a=r(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Ol=function r(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&ua(e.left,a),e.right&&ua(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&ua(e.left,a),e.right&&ua(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=r(e.left,t-1,n)),e.right&&(i=r(e.right,t-1,n)),a.concat(i))},uo=function(e){for(var t=this.cy(),n=this.nodes(),a=Rl(e),i=a.attributes,o=function(x,P){return oa(a.distance,i.length,function(V){return i[V](x)},function(V){return i[V](P)},x,P)},s=[],l=[],u=[],f=[],v=0;v<n.length;v++){var d={value:a.mode==="dendrogram"?n[v]:[n[v]],key:v,index:v};s[v]=d,f[v]=d,l[v]=[],u[v]=0}for(var c=0;c<s.length;c++)for(var h=0;h<=c;h++){var g=void 0;a.mode==="dendrogram"?g=c===h?1/0:o(s[c].value,s[h].value):g=c===h?1/0:o(s[c].value[0],s[h].value[0]),l[c][h]=g,l[h][c]=g,g<l[c][u[c]]&&(u[c]=h)}for(var y=so(s,f,l,u,a);y;)y=so(s,f,l,u,a);var b;return a.mode==="dendrogram"?(b=Ol(s[0],a.dendrogramDepth,t),a.addDendrogram&&Il(s[0],t)):(b=new Array(s.length),s.forEach(function(w,x){w.key=w.index=null,b[x]=t.collection(w.value)})),b},Nl={hierarchicalClustering:uo,hca:uo},zl=Ot({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Fl=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||kt("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||be(n)||kt("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),zl(e)},Vl=function(e,t,n,a){var i=function(s,l){return a[l](s)};return-oa(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},Gl=function(e,t){var n=null;return t==="median"?n=Fu(e):t==="mean"?n=zu(e):t==="min"?n=Ou(e):t==="max"?n=Nu(e):n=t,n},Hl=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},lo=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];t[i*e+u]>s&&(o=u,s=t[i*e+u])}o>0&&a.push(o)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},Wl=function(e,t,n){for(var a=lo(e,t,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,f=0;f<o.length;f++){for(var v=0,d=0;d<o.length;d++)v+=t[o[d]*e+o[f]];v>u&&(l=f,u=v)}n[i]=o[l]}return a=lo(e,t,n),a},fo=function(e){for(var t=this.cy(),n=this.nodes(),a=Fl(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,f,v,d;s=n.length,l=s*s,u=new Array(l);for(var c=0;c<l;c++)u[c]=-1/0;for(var h=0;h<s;h++)for(var g=0;g<s;g++)h!==g&&(u[h*s+g]=Vl(a.distance,n[h],n[g],a.attributes));f=Gl(u,a.preference);for(var y=0;y<s;y++)u[y*s+y]=f;v=new Array(l);for(var b=0;b<l;b++)v[b]=0;d=new Array(l);for(var w=0;w<l;w++)d[w]=0;for(var x=new Array(s),P=new Array(s),V=new Array(s),G=0;G<s;G++)x[G]=0,P[G]=0,V[G]=0;for(var D=new Array(s*a.minIterations),F=0;F<D.length;F++)D[F]=0;var L;for(L=0;L<a.maxIterations;L++){for(var $=0;$<s;$++){for(var W=-1/0,O=-1/0,Q=-1,H=0,ne=0;ne<s;ne++)x[ne]=v[$*s+ne],H=d[$*s+ne]+u[$*s+ne],H>=W?(O=W,W=H,Q=ne):H>O&&(O=H);for(var q=0;q<s;q++)v[$*s+q]=(1-a.damping)*(u[$*s+q]-W)+a.damping*x[q];v[$*s+Q]=(1-a.damping)*(u[$*s+Q]-O)+a.damping*x[Q]}for(var J=0;J<s;J++){for(var oe=0,le=0;le<s;le++)x[le]=d[le*s+J],P[le]=Math.max(0,v[le*s+J]),oe+=P[le];oe-=P[J],P[J]=v[J*s+J],oe+=P[J];for(var me=0;me<s;me++)d[me*s+J]=(1-a.damping)*Math.min(0,oe-P[me])+a.damping*x[me];d[J*s+J]=(1-a.damping)*(oe-P[J])+a.damping*x[J]}for(var ue=0,pe=0;pe<s;pe++){var Te=d[pe*s+pe]+v[pe*s+pe]>0?1:0;D[L%a.minIterations*s+pe]=Te,ue+=Te}if(ue>0&&(L>=a.minIterations-1||L==a.maxIterations-1)){for(var ke=0,Se=0;Se<s;Se++){V[Se]=0;for(var xe=0;xe<a.minIterations;xe++)V[Se]+=D[xe*s+Se];(V[Se]===0||V[Se]===a.minIterations)&&ke++}if(ke===s)break}}for(var ae=Hl(s,v,d),De=Wl(s,u,ae),Pe={},Ie=0;Ie<ae.length;Ie++)Pe[ae[Ie]]=[];for(var Ge=0;Ge<n.length;Ge++){var nt=i[n[Ge].id()],at=De[nt];at!=null&&Pe[at].push(n[Ge])}for(var He=new Array(ae.length),Fe=0;Fe<ae.length;Fe++)He[Fe]=t.collection(Pe[ae[Fe]]);return He},$l={affinityPropagation:fo,ap:fo},Kl=Ot({root:void 0,directed:!1}),Yl={hierholzer:function(e){if(!Ne(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=Kl(e),a=n.root,i=n.directed,o=this,s=!1,l,u,f;a&&(f=re(a)?this.filter(a)[0].id():a[0].id());var v={},d={};i?o.forEach(function(w){var x=w.id();if(w.isNode()){var P=w.indegree(!0),V=w.outdegree(!0),G=P-V,D=V-P;G==1?l?s=!0:l=x:D==1?u?s=!0:u=x:(D>1||G>1)&&(s=!0),v[x]=[],w.outgoers().forEach(function(F){F.isEdge()&&v[x].push(F.id())})}else d[x]=[void 0,w.target().id()]}):o.forEach(function(w){var x=w.id();if(w.isNode()){var P=w.degree(!0);P%2&&(l?u?s=!0:u=x:l=x),v[x]=[],w.connectedEdges().forEach(function(V){return v[x].push(V.id())})}else d[x]=[w.source().id(),w.target().id()]});var c={found:!1,trail:void 0};if(s)return c;if(u&&l)if(i){if(f&&u!=f)return c;f=u}else{if(f&&u!=f&&l!=f)return c;f||(f=u)}else f||(f=o[0].id());var h=function(x){for(var P=x,V=[x],G,D,F;v[P].length;)G=v[P].shift(),D=d[G][0],F=d[G][1],P!=F?(v[F]=v[F].filter(function(L){return L!=G}),P=F):!i&&P!=D&&(v[D]=v[D].filter(function(L){return L!=G}),P=D),V.unshift(G),V.unshift(P);return V},g=[],y=[];for(y=h(f);y.length!=1;)v[y[0]].length==0?(g.unshift(o.getElementById(y.shift())),g.unshift(o.getElementById(y.shift()))):y=h(y.shift()).concat(y);g.unshift(o.getElementById(y.shift()));for(var b in v)if(v[b].length)return c;return c.found=!0,c.trail=this.spawn(g,!0),c}},la=function(){var e=this,t={},n=0,a=0,i=[],o=[],s={},l=function(d,c){for(var h=o.length-1,g=[],y=e.spawn();o[h].x!=d||o[h].y!=c;)g.push(o.pop().edge),h--;g.push(o.pop().edge),g.forEach(function(b){var w=b.connectedNodes().intersection(e);y.merge(b),w.forEach(function(x){var P=x.id(),V=x.connectedEdges().intersection(e);y.merge(x),t[P].cutVertex?y.merge(V.filter(function(G){return G.isLoop()})):y.merge(V)})}),i.push(y)},u=function v(d,c,h){d===h&&(a+=1),t[c]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(c).connectedEdges().intersection(e);if(g.size()===0)i.push(e.spawn(e.getElementById(c)));else{var y,b,w,x;g.forEach(function(P){y=P.source().id(),b=P.target().id(),w=y===c?b:y,w!==h&&(x=P.id(),s[x]||(s[x]=!0,o.push({x:c,y:w,edge:P})),w in t?t[c].low=Math.min(t[c].low,t[w].id):(v(d,w,c),t[c].low=Math.min(t[c].low,t[w].low),t[c].id<=t[w].low&&(t[c].cutVertex=!0,l(c,w))))})}};e.forEach(function(v){if(v.isNode()){var d=v.id();d in t||(a=0,u(d,d),t[d].cutVertex=a>1)}});var f=Object.keys(t).filter(function(v){return t[v].cutVertex}).map(function(v){return e.getElementById(v)});return{cut:e.spawn(f),components:i}},Ul={hopcroftTarjanBiconnected:la,htbc:la,htb:la,hopcroftTarjanBiconnectedComponents:la},fa=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){i.push(u),t[u]={index:n,low:n++,explored:!1};var f=e.getElementById(u).connectedEdges().intersection(e);if(f.forEach(function(g){var y=g.target().id();y!==u&&(y in t||l(y),t[y].explored||(t[u].low=Math.min(t[u].low,t[y].low)))}),t[u].index===t[u].low){for(var v=e.spawn();;){var d=i.pop();if(v.merge(e.getElementById(d)),t[d].low=t[u].index,t[d].explored=!0,d===u)break}var c=v.edgesWith(v),h=v.merge(c);a.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in t||s(u)}}),{cut:o,components:a}},Xl={tarjanStronglyConnected:fa,tsc:fa,tscc:fa,tarjanStronglyConnectedComponents:fa},vo={};[kn,Cu,Su,Du,Pu,Lu,Ru,al,rn,nn,Ja,ml,Ll,Nl,$l,Yl,Ul,Xl].forEach(function(r){tt(vo,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var co=0,ho=1,go=2,xr=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=co,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};xr.prototype={fulfill:function(e){return po(this,ho,"fulfillValue",e)},reject:function(e){return po(this,go,"rejectReason",e)},then:function(e,t){var n=this,a=new xr;return n.onFulfilled.push(bo(e,a,"fulfill")),n.onRejected.push(bo(t,a,"reject")),mo(n),a.proxy}};var po=function(e,t,n,a){return e.state===co&&(e.state=t,e[n]=a,mo(e)),e},mo=function(e){e.state===ho?yo(e,"onFulfilled",e.fulfillValue):e.state===go&&yo(e,"onRejected",e.rejectReason)},yo=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof p=="function"?p(i):setTimeout(i,0)}},bo=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}Zl(t,i)}}},Zl=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(K(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):r(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};xr.all=function(r){return new xr(function(e,t){for(var n=new Array(r.length),a=0,i=function(l,u){n[l]=u,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var l=r[s],u=l!=null&&l.then!=null;if(u)l.then(function(v){i(s,v)},function(v){t(v)});else{var f=l;i(s,f)}})(o)})},xr.resolve=function(r){return new xr(function(e,t){e(r)})},xr.reject=function(r){return new xr(function(e,t){t(r)})};var on=typeof Promise<"u"?Promise:xr,ei=function(e,t,n){var a=we(e),i=!a,o=this._private=tt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&ce(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Wr=ei.prototype;tt(Wr,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Qe(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var v=e[u];v!=null&&(e[u]=e[f],e[f]=v)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new on(function(a,i){n.push(function(){a()})})}}),Wr.complete=Wr.completed,Wr.run=Wr.play,Wr.running=Wr.playing;var Ql={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var f=s.style();t=tt({},t,n);var v=Object.keys(t).length===0;if(v)return new ei(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(u&&(t.style=f.getPropsList(t.style||t.css),t.css=void 0),u&&t.renderedPosition!=null){var d=t.renderedPosition,c=s.pan(),h=s.zoom();t.position=Gi(d,h,c)}if(l&&t.panBy!=null){var g=t.panBy,y=s.pan();t.pan={x:y.x+g.x,y:y.y+g.y}}var b=t.center||t.centre;if(l&&b!=null){var w=s.getCenterPan(b.eles,t.zoom);w!=null&&(t.pan=w)}if(l&&t.fit!=null){var x=t.fit,P=s.getFitViewport(x.eles||x.boundingBox,x.padding);P!=null&&(t.pan=P.pan,t.zoom=P.zoom)}if(l&&Ne(t.zoom)){var V=s.getZoomedViewport(t.zoom);V!=null?(V.zoomed&&(t.zoom=V.zoom),V.panned&&(t.pan=V.pan)):t.zoom=null}return new ei(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=tt({},t,n));for(var l=0;l<o.length;l++){var u=o[l],f=u.animated()&&(t.queue===void 0||t.queue),v=u.animation(t,f?{queue:!0}:void 0);v.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],f=u._private,v=f.animation.current,d=0;d<v.length;d++){var c=v[d],h=c._private;n&&(h.duration=0)}t&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},ql={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=tt({},t,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],f=l?s[0]:s;if(re(a)){var v=a.indexOf(".")!==-1,d=v&&z.default(a);if(o.allowGetting&&i===void 0){var c;return f&&(o.beforeGet(f),d&&f._private[o.field][a]===void 0?c=M.default(f._private[o.field],d):c=f._private[o.field][a]),c}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var g=j({},a,i);o.beforeSet(s,g);for(var y=0,b=u.length;y<b;y++){var w=u[y];o.canSet(w)&&(d&&f._private[o.field][a]===void 0?C.default(w._private[o.field],d,i):w._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Ne(a)){var x=a,P,V,G=Object.keys(x);o.beforeSet(s,x);for(var D=0;D<G.length;D++){P=G[D],V=x[P];var F=!o.immutableKeys[P];if(F)for(var L=0;L<u.length;L++){var $=u[L];o.canSet($)&&($._private[o.field][P]=V)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&ce(a)){var W=a;s.on(o.bindingEvent,W)}else if(o.allowGetting&&a===void 0){var O;return f&&(o.beforeGet(f),O=f._private[o.field]),O}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=tt({},t,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(re(a)){for(var u=a.split(/\s+/),f=u.length,v=0;v<f;v++){var d=u[v];if(!et(d)){var c=!i.immutableKeys[d];if(c)for(var h=0,g=l.length;h<g;h++)l[h]._private[i.field][d]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var y=0,b=l.length;y<b;y++)for(var w=l[y]._private[i.field],x=Object.keys(w),P=0;P<x.length;P++){var V=x[P],G=!i.immutableKeys[V];G&&(w[V]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},Jl={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new on(function(s,l){var u=function(c){i.off.apply(i,v),s(c)},f=o.concat([u]),v=f.concat([]);i.on.apply(i,f)})}}},bt={};[Ql,ql,Jl].forEach(function(r){tt(bt,r)});var jl={animate:bt.animate(),animation:bt.animation(),animated:bt.animated(),clearQueue:bt.clearQueue(),delay:bt.delay(),delayAnimation:bt.delayAnimation(),stop:bt.stop()},va={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(h){return n.push(h)}),n}else ge(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new jr(e),o=0;o<t.length;o++){for(var s=t[o],l=s._private,u=l.classes,f=!1,v=0;v<e.length;v++){var d=e[v],c=u.has(d);if(!c){f=!0;break}}f||(f=u.size!==e.length),f&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){ge(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,f=!1,v=0;v<e.length;v++){var d=e[v],c=u.has(d),h=!1;t||a&&!c?(u.add(d),h=!0):(!t||a&&c)&&(u.delete(d),h=!0),!f&&h&&(i.push(l),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};va.className=va.classNames=va.classes;var ht={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ht.variable="(?:[\\w-.]|(?:\\\\"+ht.metaChar+"))+",ht.className="(?:[\\w-]|(?:\\\\"+ht.metaChar+"))+",ht.value=ht.string+"|"+ht.number,ht.id=ht.variable,function(){var r,e,t;for(r=ht.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],ht.comparatorOp+="|@"+e;for(r=ht.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(ht.comparatorOp+="|\\!"+e)}();var xt=function(){return{checks:[]}},Ke={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ti=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return ru(r.selector,e.selector)}),_l=function(){for(var r={},e,t=0;t<ti.length;t++)e=ti[t],r[e.selector]=e.matches;return r}(),ef=function(e,t){return _l[e](t)},tf="("+ti.map(function(r){return r.selector}).join("|")+")",sn=function(e){return e.replace(new RegExp("\\\\("+ht.metaChar+")","g"),function(t,n){return n})},Br=function(e,t,n){e[e.length-1]=n},ri=[{name:"group",query:!0,regex:"("+ht.group+")",populate:function(e,t,n){var a=Y(n,1),i=a[0];t.checks.push({type:Ke.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:tf,populate:function(e,t,n){var a=Y(n,1),i=a[0];t.checks.push({type:Ke.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ht.id+")",populate:function(e,t,n){var a=Y(n,1),i=a[0];t.checks.push({type:Ke.ID,value:sn(i)})}},{name:"className",query:!0,regex:"\\.("+ht.className+")",populate:function(e,t,n){var a=Y(n,1),i=a[0];t.checks.push({type:Ke.CLASS,value:sn(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ht.variable+")\\s*\\]",populate:function(e,t,n){var a=Y(n,1),i=a[0];t.checks.push({type:Ke.DATA_EXIST,field:sn(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ht.variable+")\\s*("+ht.comparatorOp+")\\s*("+ht.value+")\\s*\\]",populate:function(e,t,n){var a=Y(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+ht.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Ke.DATA_COMPARE,field:sn(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ht.boolOp+")\\s*("+ht.variable+")\\s*\\]",populate:function(e,t,n){var a=Y(n,2),i=a[0],o=a[1];t.checks.push({type:Ke.DATA_BOOL,field:sn(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ht.meta+")\\s*("+ht.comparatorOp+")\\s*("+ht.number+")\\s*\\]\\]",populate:function(e,t,n){var a=Y(n,3),i=a[0],o=a[1],s=a[2];t.checks.push({type:Ke.META_COMPARE,field:sn(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:ht.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=xt();return s}},{name:"directedEdge",separator:!0,regex:ht.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=xt(),a=t,i=xt();return n.checks.push({type:Ke.DIRECTED_EDGE,source:a,target:i}),Br(e,t,n),e.edgeCount++,i}else{var o=xt(),s=t,l=xt();return o.checks.push({type:Ke.NODE_SOURCE,source:s,target:l}),Br(e,t,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:ht.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=xt(),a=t,i=xt();return n.checks.push({type:Ke.UNDIRECTED_EDGE,nodes:[a,i]}),Br(e,t,n),e.edgeCount++,i}else{var o=xt(),s=t,l=xt();return o.checks.push({type:Ke.NODE_NEIGHBOR,node:s,neighbor:l}),Br(e,t,o),l}}},{name:"child",separator:!0,regex:ht.child,populate:function(e,t){if(e.currentSubject==null){var n=xt(),a=xt(),i=e[e.length-1];return n.checks.push({type:Ke.CHILD,parent:i,child:a}),Br(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=xt(),s=e[e.length-1],l=xt(),u=xt(),f=xt(),v=xt();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ke.TRUE}],v.checks.push({type:Ke.TRUE}),l.checks.push({type:Ke.PARENT,parent:v,child:f}),Br(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var d=xt(),c=xt(),h=[{type:Ke.PARENT,parent:d,child:c}];return d.checks=t.checks,t.checks=h,e.compoundCount++,c}}},{name:"descendant",separator:!0,regex:ht.descendant,populate:function(e,t){if(e.currentSubject==null){var n=xt(),a=xt(),i=e[e.length-1];return n.checks.push({type:Ke.DESCENDANT,ancestor:i,descendant:a}),Br(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=xt(),s=e[e.length-1],l=xt(),u=xt(),f=xt(),v=xt();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ke.TRUE}],v.checks.push({type:Ke.TRUE}),l.checks.push({type:Ke.ANCESTOR,ancestor:v,descendant:f}),Br(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var d=xt(),c=xt(),h=[{type:Ke.ANCESTOR,ancestor:d,descendant:c}];return d.checks=t.checks,t.checks=h,e.compoundCount++,c}}},{name:"subject",modifier:!0,regex:ht.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return yt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===Ke.DIRECTED_EDGE?a.type=Ke.NODE_TARGET:i===Ke.UNDIRECTED_EDGE&&(a.type=Ke.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];ri.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var rf=function(e){for(var t,n,a,i=0;i<ri.length;i++){var o=ri[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,t=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:a,remaining:e}},nf=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},af=function(e){var t=this,n=t.inputText=e,a=t[0]=xt();for(t.length=1,n=nf(n);;){var i=rf(n);if(i.expr==null)return yt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(t,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=t[t.length-1];t.currentSubject!=null&&(l.subject=t.currentSubject),l.edgeCount=t.edgeCount,l.compoundCount=t.compoundCount;for(var u=0;u<t.length;u++){var f=t[u];if(f.compoundCount>0&&f.edgeCount>0)return yt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return yt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&yt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},of=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},t=function(f){return re(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,v){var d=f.type,c=f.value;switch(d){case Ke.GROUP:{var h=e(c);return h.substring(0,h.length-1)}case Ke.DATA_COMPARE:{var g=f.field,y=f.operator;return"["+g+n(e(y))+t(c)+"]"}case Ke.DATA_BOOL:{var b=f.operator,w=f.field;return"["+e(b)+w+"]"}case Ke.DATA_EXIST:{var x=f.field;return"["+x+"]"}case Ke.META_COMPARE:{var P=f.operator,V=f.field;return"[["+V+n(e(P))+t(c)+"]]"}case Ke.STATE:return c;case Ke.ID:return"#"+c;case Ke.CLASS:return"."+c;case Ke.PARENT:case Ke.CHILD:return i(f.parent,v)+n(">")+i(f.child,v);case Ke.ANCESTOR:case Ke.DESCENDANT:return i(f.ancestor,v)+" "+i(f.descendant,v);case Ke.COMPOUND_SPLIT:{var G=i(f.left,v),D=i(f.subject,v),F=i(f.right,v);return G+(G.length>0?" ":"")+D+F}case Ke.TRUE:return""}},i=function(f,v){return f.checks.reduce(function(d,c,h){return d+(v===f&&h===0?"$":"")+a(c,v)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},sf={parse:af,toString:of},wo=function(e,t,n){var a,i=re(e),o=be(e),s=re(n),l,u,f=!1,v=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),v=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),f=!0),(i||s||f)&&(l=!i&&!o?"":""+e,u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),t){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return v&&(e!=null||!d)&&(a=!a),a},uf=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},lf=function(e){return e!==void 0},ni=function(e,t){return e.data(t)},ff=function(e,t){return e[t]()},Pt=[],St=function(e,t){return e.checks.every(function(n){return Pt[n.type](n,t)})};Pt[Ke.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()},Pt[Ke.STATE]=function(r,e){var t=r.value;return ef(t,e)},Pt[Ke.ID]=function(r,e){var t=r.value;return e.id()===t},Pt[Ke.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)},Pt[Ke.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return wo(ff(e,t),n,a)},Pt[Ke.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return wo(ni(e,t),n,a)},Pt[Ke.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return uf(ni(e,t),n)},Pt[Ke.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,lf(ni(e,t))},Pt[Ke.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return St(t,a)&&St(n,i)||St(n,a)&&St(t,i)},Pt[Ke.NODE_NEIGHBOR]=function(r,e){return St(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&St(r.neighbor,t)})},Pt[Ke.DIRECTED_EDGE]=function(r,e){return St(r.source,e.source())&&St(r.target,e.target())},Pt[Ke.NODE_SOURCE]=function(r,e){return St(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&St(r.target,t)})},Pt[Ke.NODE_TARGET]=function(r,e){return St(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&St(r.source,t)})},Pt[Ke.CHILD]=function(r,e){return St(r.child,e)&&St(r.parent,e.parent())},Pt[Ke.PARENT]=function(r,e){return St(r.parent,e)&&e.children().some(function(t){return St(r.child,t)})},Pt[Ke.DESCENDANT]=function(r,e){return St(r.descendant,e)&&e.ancestors().some(function(t){return St(r.ancestor,t)})},Pt[Ke.ANCESTOR]=function(r,e){return St(r.ancestor,e)&&e.descendants().some(function(t){return St(r.descendant,t)})},Pt[Ke.COMPOUND_SPLIT]=function(r,e){return St(r.subject,e)&&St(r.left,e)&&St(r.right,e)},Pt[Ke.TRUE]=function(){return!0},Pt[Ke.COLLECTION]=function(r,e){var t=r.value;return t.has(e)},Pt[Ke.FILTER]=function(r,e){var t=r.value;return t(e)};var vf=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ke.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var s=t[o];if(St(s,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},df=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(St(a,e))return!0}return!1},cf={matches:df,filter:vf},Lr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||re(e)&&e.match(/^\s*$/)||(Qe(e)?this.addQuery({checks:[{type:Ke.COLLECTION,value:e.collection()}]}):ce(e)?this.addQuery({checks:[{type:Ke.FILTER,value:e}]}):re(e)?this.parse(e)||(this.invalid=!0):kt("A selector must be created from a string; found "))},Mr=Lr.prototype;[sf,cf].forEach(function(r){return tt(Mr,r)}),Mr.text=function(){return this.inputText},Mr.size=function(){return this.length},Mr.eq=function(r){return this[r]},Mr.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()},Mr.addQuery=function(r){this[this.length++]=r},Mr.selector=Mr.toString;var Ar={allAre:function(e){var t=new Lr(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Lr(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Ar.allAreNeighbours=Ar.allAreNeighbors,Ar.has=Ar.contains,Ar.equal=Ar.equals=Ar.same;var rr=function(e,t){return function(a,i,o,s){var l=a,u=this,f;if(l==null?f="":Qe(l)&&l.length===1&&(f=l.id()),u.length===1&&f){var v=u[0]._private,d=v.traversalCache=v.traversalCache||{},c=d[t]=d[t]||[],h=Fr(f),g=c[h];return g||(c[h]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},un={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:rr(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function ai(r,e,t,n){for(var a=[],i=new jr,o=r.cy(),s=o.hasCompoundNodes(),l=0;l<r.length;l++){var u=r[l];t?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),s&&n(a,i,f)}return r}function xo(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}un.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ai(this,r,e,xo)};function Eo(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}un.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ai(this,r,e,Eo)};function hf(r,e,t){Eo(r,e,t),xo(r,e,t)}un.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ai(this,r,e,hf)},un.ancestors=un.parents;var Rn,Co;Rn=Co={data:bt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:bt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:bt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:bt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:bt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:bt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},Rn.attr=Rn.data,Rn.removeAttr=Rn.removeData;var gf=Co,da={};function ii(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=r(a,s))}return n}else return}}tt(da,{degree:ii(function(r,e){return e.source().same(e.target())?2:1}),indegree:ii(function(r,e){return e.target().same(r)?1:0}),outdegree:ii(function(r,e){return e.source().same(r)?1:0})});function ln(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}tt(da,{minDegree:ln("degree",function(r,e){return r<e}),maxDegree:ln("degree",function(r,e){return r>e}),minIndegree:ln("indegree",function(r,e){return r<e}),maxIndegree:ln("indegree",function(r,e){return r>e}),minOutdegree:ln("outdegree",function(r,e){return r<e}),maxOutdegree:ln("outdegree",function(r,e){return r>e})}),tt(da,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var or,So,To=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Do={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){To(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};or=So={position:bt.data(Do),silentPosition:bt.data(tt({},Do,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){To(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Ne(e))t?this.silentPosition(e):this.position(e);else if(ce(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(t?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(Ne(e)?(a={x:be(e.x)?e.x:0,y:be(e.y)?e.y:0},n=t):re(e)&&be(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,t){return Ne(e)?this.shift(e,!0):re(e)&&be(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Ne(e)?e:void 0,l=s!==void 0||t!==void 0&&re(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var f=this[u];t!==void 0?f.position(e,(t-o[e])/i):s!==void 0&&f.position(Gi(s,i,o))}else{var v=n.position();return s=ra(v,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=Ne(e)?e:void 0,o=i!==void 0||t!==void 0&&re(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,v=f&&f.length>0,d=v;v&&(f=f[0]);var c=d?f.position():{x:0,y:0};t!==void 0?u.position(e,t+c[e]):i!==void 0&&u.position({x:i.x+c.x,y:i.y+c.y})}else{var h=n.position(),g=s?n.parent():null,y=g&&g.length>0,b=y;y&&(g=g[0]);var w=b?g.position():{x:0,y:0};return i={x:h.x-w.x,y:h.y-w.y},e===void 0?i:i[e]}else if(!o)return;return this}},or.modelPosition=or.point=or.position,or.modelPositions=or.points=or.positions,or.renderedPoint=or.renderedPosition,or.relativePoint=or.relativePosition;var pf=So,fn,Rr;fn=Rr={},Rr.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}},Rr.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)},Rr.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},v=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=s.position;(v.w===0||v.h===0)&&(v={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},v.x1=d.x-v.w/2,v.x2=d.x+v.w/2,v.y1=d.y-v.h/2,v.y2=d.y+v.h/2);function c(L,$,W){var O=0,Q=0,H=$+W;return L>0&&H>0&&(O=$/H*L,Q=W/H*L),{biasDiff:O,biasComplementDiff:Q}}function h(L,$,W,O){if(W.units==="%")switch(O){case"width":return L>0?W.pfValue*L:0;case"height":return $>0?W.pfValue*$:0;case"average":return L>0&&$>0?W.pfValue*(L+$)/2:0;case"min":return L>0&&$>0?L>$?W.pfValue*$:W.pfValue*L:0;case"max":return L>0&&$>0?L>$?W.pfValue*L:W.pfValue*$:0;default:return 0}else return W.units==="px"?W.pfValue:0}var g=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var y=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(y=y*100/f.width.val);var b=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(b=b*100/f.height.val);var w=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(w=w*100/f.height.val);var x=c(f.width.val-v.w,g,y),P=x.biasDiff,V=x.biasComplementDiff,G=c(f.height.val-v.h,b,w),D=G.biasDiff,F=G.biasComplementDiff;s.autoPadding=h(v.w,v.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(v.w,f.width.val),d.x=(-P+v.x1+v.x2+V)/2,s.autoHeight=Math.max(v.h,f.height.val),d.y=(-D+v.y1+v.y2+F)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var nr=function(e){return e===1/0||e===-1/0?0:e},sr=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},$r=function(e,t){return t==null?e:sr(e,t.x1,t.y1,t.x2,t.y2)},In=function(e,t,n){return ir(e,t,n)},ca=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var f=a.arrowBounds=a.arrowBounds||{},v=f[n]=f[n]||{};v.x1=l-o,v.y1=u-o,v.x2=l+o,v.y2=u+o,v.w=v.x2-v.x1,v.h=v.y2-v.y1,aa(v,1),sr(e,v.x1,v.y1,v.x2,v.y2)}}},oi=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,s=t.pstyle(a+"label").strValue;if(s){var l=t.pstyle("text-halign"),u=t.pstyle("text-valign"),f=In(o,"labelWidth",n),v=In(o,"labelHeight",n),d=In(o,"labelX",n),c=In(o,"labelY",n),h=t.pstyle(a+"text-margin-x").pfValue,g=t.pstyle(a+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(a+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,x=t.pstyle("text-border-width").pfValue,P=x/2,V=t.pstyle("text-background-padding").pfValue,G=2,D=v,F=f,L=F/2,$=D/2,W,O,Q,H;if(y)W=d-L,O=d+L,Q=c-$,H=c+$;else{switch(l.value){case"left":W=d-F,O=d;break;case"center":W=d-L,O=d+L;break;case"right":W=d,O=d+F;break}switch(u.value){case"top":Q=c-D,H=c;break;case"center":Q=c-$,H=c+$;break;case"bottom":Q=c,H=c+D;break}}W+=h-Math.max(w,P)-V-G,O+=h+Math.max(w,P)+V+G,Q+=g-Math.max(w,P)-V-G,H+=g+Math.max(w,P)+V+G;var ne=n||"main",q=i.labelBounds,J=q[ne]=q[ne]||{};J.x1=W,J.y1=Q,J.x2=O,J.y2=H,J.w=O-W,J.h=H-Q;var oe=y&&b.strValue==="autorotate",le=b.pfValue!=null&&b.pfValue!==0;if(oe||le){var me=oe?In(i.rstyle,"labelAngle",n):b.pfValue,ue=Math.cos(me),pe=Math.sin(me),Te=(W+O)/2,ke=(Q+H)/2;if(!y){switch(l.value){case"left":Te=O;break;case"right":Te=W;break}switch(u.value){case"top":ke=H;break;case"bottom":ke=Q;break}}var Se=function(at,He){return at=at-Te,He=He-ke,{x:at*ue-He*pe+Te,y:at*pe+He*ue+ke}},xe=Se(W,Q),ae=Se(W,H),De=Se(O,Q),Pe=Se(O,H);W=Math.min(xe.x,ae.x,De.x,Pe.x),O=Math.max(xe.x,ae.x,De.x,Pe.x),Q=Math.min(xe.y,ae.y,De.y,Pe.y),H=Math.max(xe.y,ae.y,De.y,Pe.y)}var Ie=ne+"Rot",Ge=q[Ie]=q[Ie]||{};Ge.x1=W,Ge.y1=Q,Ge.x2=O,Ge.y2=H,Ge.w=O-W,Ge.h=H-Q,sr(e,W,Q,O,H),sr(i.labelBounds.all,W,Q,O,H)}return e}},mf=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Jt(),s=e._private,l=e.isNode(),u=e.isEdge(),f,v,d,c,h,g,y=s.rstyle,b=l&&a?e.pstyle("bounds-expansion").pfValue:[0],w=function(qe){return qe.pstyle("display").value!=="none"},x=!a||w(e)&&(!u||w(e.source())&&w(e.target()));if(x){var P=0,V=0;a&&t.includeOverlays&&(P=e.pstyle("overlay-opacity").value,P!==0&&(V=e.pstyle("overlay-padding").value));var G=0,D=0;a&&t.includeUnderlays&&(G=e.pstyle("underlay-opacity").value,G!==0&&(D=e.pstyle("underlay-padding").value));var F=Math.max(V,D),L=0,$=0;if(a&&(L=e.pstyle("width").pfValue,$=L/2),l&&t.includeNodes){var W=e.position();h=W.x,g=W.y;var O=e.outerWidth(),Q=O/2,H=e.outerHeight(),ne=H/2;f=h-Q,v=h+Q,d=g-ne,c=g+ne,sr(o,f,d,v,c)}else if(u&&t.includeEdges)if(a&&!i){var q=e.pstyle("curve-style").strValue;if(f=Math.min(y.srcX,y.midX,y.tgtX),v=Math.max(y.srcX,y.midX,y.tgtX),d=Math.min(y.srcY,y.midY,y.tgtY),c=Math.max(y.srcY,y.midY,y.tgtY),f-=$,v+=$,d-=$,c+=$,sr(o,f,d,v,c),q==="haystack"){var J=y.haystackPts;if(J&&J.length===2){if(f=J[0].x,d=J[0].y,v=J[1].x,c=J[1].y,f>v){var oe=f;f=v,v=oe}if(d>c){var le=d;d=c,c=le}sr(o,f-$,d-$,v+$,c+$)}}else if(q==="bezier"||q==="unbundled-bezier"||q==="segments"||q==="taxi"){var me;switch(q){case"bezier":case"unbundled-bezier":me=y.bezierPts;break;case"segments":case"taxi":me=y.linePts;break}if(me!=null)for(var ue=0;ue<me.length;ue++){var pe=me[ue];f=pe.x-$,v=pe.x+$,d=pe.y-$,c=pe.y+$,sr(o,f,d,v,c)}}}else{var Te=e.source(),ke=Te.position(),Se=e.target(),xe=Se.position();if(f=ke.x,v=xe.x,d=ke.y,c=xe.y,f>v){var ae=f;f=v,v=ae}if(d>c){var De=d;d=c,c=De}f-=$,v+=$,d-=$,c+=$,sr(o,f,d,v,c)}if(a&&t.includeEdges&&u&&(ca(o,e,"mid-source"),ca(o,e,"mid-target"),ca(o,e,"source"),ca(o,e,"target")),a){var Pe=e.pstyle("ghost").value==="yes";if(Pe){var Ie=e.pstyle("ghost-offset-x").pfValue,Ge=e.pstyle("ghost-offset-y").pfValue;sr(o,o.x1+Ie,o.y1+Ge,o.x2+Ie,o.y2+Ge)}}var nt=s.bodyBounds=s.bodyBounds||{};Wi(nt,o),Ya(nt,b),aa(nt,1),a&&(f=o.x1,v=o.x2,d=o.y1,c=o.y2,sr(o,f-F,d-F,v+F,c+F));var at=s.overlayBounds=s.overlayBounds||{};Wi(at,o),Ya(at,b),aa(at,1);var He=s.labelBounds=s.labelBounds||{};He.all!=null?$u(He.all):He.all=Jt(),a&&t.includeLabels&&(t.includeMainLabels&&oi(o,e,null),u&&(t.includeSourceLabels&&oi(o,e,"source"),t.includeTargetLabels&&oi(o,e,"target")))}return o.x1=nr(o.x1),o.y1=nr(o.y1),o.x2=nr(o.x2),o.y2=nr(o.y2),o.w=nr(o.x2-o.x1),o.h=nr(o.y2-o.y1),o.w>0&&o.h>0&&x&&(Ya(o,b),aa(o,1)),o},ko=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},Po=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return vu([a(t.x),a(t.y),a(n.x),a(n.y)])}else return 0},Bo=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?Lo:ko(t),s=o===Lo,l=Po(e),u=n.bbCachePosKey===l,f=t.useCache&&u,v=function(g){return g._private.bbCache==null||g._private.styleDirty},d=!f||v(e)||i&&v(e.source())||v(e.target());if(d?(u||e.recalculateRenderedStyle(f),a=mf(e,On),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var c=e.isNode();a=Jt(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?$r(a,n.overlayBounds):$r(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?$r(a,n.labelBounds.all):(t.includeMainLabels&&$r(a,n.labelBounds.mainRot),t.includeSourceLabels&&$r(a,n.labelBounds.sourceRot),t.includeTargetLabels&&$r(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},On={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Lo=ko(On),Mo=Ot(On);Rr.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=On:r=Mo(r),e=Bo(this[0],r);else{e=Jt(),r=r||On;var t=Mo(r),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=Po(s),f=l.bbCachePosKey===u,v=t.useCache&&f&&!l.styleDirty;s.recalculateRenderedStyle(v)}this.updateCompoundBounds(!r.useCache);for(var d=0;d<n.length;d++){var c=n[d];$r(e,Bo(c,t))}}return e.x1=nr(e.x1),e.y1=nr(e.y1),e.x2=nr(e.x2),e.y2=nr(e.y2),e.w=nr(e.x2-e.x1),e.h=nr(e.y2-e.y1),e},Rr.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Rr.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Ne(r)){var i=r;r=function(){return i}}var o=function(f,v){return f._private.bbAtOldPos=r(f,v)},s=function(f){return f._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=Wu(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),l},fn.boundingbox=fn.bb=fn.boundingBox,fn.renderedBoundingbox=fn.renderedBoundingBox;var yf=Rr,Nn,zn;Nn=zn={};var Ao=function(e){e.uppercaseName=Cn(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Cn(e.outerName),Nn[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Nn["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},Nn["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Nn["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Ao({name:"width"}),Ao({name:"height"}),zn.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue},zn.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()},zn.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var bf=zn,wf=function(e,t){if(e.isEdge())return t(e)},xf=function(e,t){if(e.isEdge()){var n=e.cy();return ra(t(e),n.zoom(),n.pan())}},Ef=function(e,t){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return ra(o,i,a)})}},Cf=function(e){return e.renderer().getControlPoints(e)},Sf=function(e){return e.renderer().getSegmentPoints(e)},Tf=function(e){return e.renderer().getSourceEndpoint(e)},Df=function(e){return e.renderer().getTargetEndpoint(e)},kf=function(e){return e.renderer().getEdgeMidpoint(e)},Ro={controlPoints:{get:Cf,mult:!0},segmentPoints:{get:Sf,mult:!0},sourceEndpoint:{get:Tf},targetEndpoint:{get:Df},midpoint:{get:kf}},Pf=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Bf=Object.keys(Ro).reduce(function(r,e){var t=Ro[e],n=Pf(e);return r[e]=function(){return wf(this,t.get)},t.mult?r[n]=function(){return Ef(this,t.get)}:r[n]=function(){return xf(this,t.get)},r},{}),Lf=tt({},pf,yf,bf,Bf);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Io=function(e,t){this.recycle(e,t)};function Fn(){return!1}function ha(){return!0}Io.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Fn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ha:Fn):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ha;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ha;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ha,this.stopPropagation()},isDefaultPrevented:Fn,isPropagationStopped:Fn,isImmediatePropagationStopped:Fn};var Oo=/^([^.]+)(\.(?:[^.]+))?$/,Mf=".*",No={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},zo=Object.keys(No),Af={};function ga(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Af,e=arguments.length>1?arguments[1]:void 0,t=0;t<zo.length;t++){var n=zo[t];this[n]=r[n]||No[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ir=ga.prototype,Fo=function(e,t,n,a,i,o,s){ce(a)&&(i=a,a=null),s&&(o==null?o=s:o=tt({},o,s));for(var l=ge(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!et(f)){var v=f.match(Oo);if(v){var d=v[1],c=v[2]?v[2]:null,h=t(e,f,d,c,a,i,o);if(h===!1)break}}}},Vo=function(e,t){return e.addEventFields(e.context,t),new Io(t.type,t)},Rf=function(e,t,n){if(ze(n)){t(e,n);return}else if(Ne(n)){t(e,Vo(e,n));return}for(var a=ge(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!et(o)){var s=o.match(Oo);if(s){var l=s[1],u=s[2]?s[2]:null,f=Vo(e,{type:l,namespace:u,target:e.context});t(e,f)}}}};Ir.on=Ir.addListener=function(r,e,t,n,a){return Fo(this,function(i,o,s,l,u,f,v){ce(f)&&i.listeners.push({event:o,callback:f,type:s,namespace:l,qualifier:u,conf:v})},r,e,t,n,a),this},Ir.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})},Ir.removeListener=Ir.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=pu(this.listeners));for(var i=this.listeners,o=function(u){var f=i[u];Fo(a,function(v,d,c,h,g,y){if((f.type===c||r==="*")&&(!h&&f.namespace!==".*"||f.namespace===h)&&(!g||v.qualifierCompare(f.qualifier,g))&&(!y||f.callback===y))return i.splice(u,1),!1},r,e,t,n)},s=i.length-1;s>=0;s--)o(s);return this},Ir.removeAllListeners=function(){return this.removeListener("*")},Ir.emit=Ir.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,ge(e)||(e=[e]),Rf(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var s=function(f){var v=n[f];if(v.type===o.type&&(!v.namespace||v.namespace===o.namespace||v.namespace===Mf)&&i.eventMatches(i.context,v,o)){var d=[o];e!=null&&yu(d,e),i.beforeEmit(i.context,v,o),v.conf&&v.conf.one&&(i.listeners=i.listeners.filter(function(g){return g!==v}));var c=i.callbackContext(i.context,v,o),h=v.callback.apply(c,d);i.afterEmit(i.context,v,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var If={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Tt(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},pa=function(e){return re(e)?new Lr(e):e},Go={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new ga(If,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=pa(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=pa(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=pa(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=pa(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};bt.eventAliasesOn(Go);var Ho={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(re(e)||Qe(e))return new Lr(e).filter(this);if(ce(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){re(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(re(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var t=this._private.cy;re(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var f=0;f<l.length;f++){var v=l[f],d=v._private.data.id,c=u.hasElementWithId(d);c||n.push(v)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;re(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(f,v,d){for(var c=0;c<f.length;c++){var h=f[c],g=h._private.data.id,y=v.hasElementWithId(g);y?i.merge(h):d.push(h)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(re(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&re(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var f=this.length++;this[f]=s,i.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&re(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},gt=Ho;gt.u=gt["|"]=gt["+"]=gt.union=gt.or=gt.add,gt["\\"]=gt["!"]=gt["-"]=gt.difference=gt.relativeComplement=gt.subtract=gt.not,gt.n=gt["&"]=gt["."]=gt.and=gt.intersection=gt.intersect,gt["^"]=gt["(+)"]=gt["(-)"]=gt.symmetricDifference=gt.symdiff=gt.xor,gt.fnFilter=gt.filterFn=gt.stdFilter=gt.filter,gt.complement=gt.abscomp=gt.absoluteComplement;var Of={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Wo=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var v=f.pstyle("z-compound-depth");return v.value==="auto"?a?f.zDepth():0:v.value==="bottom"?-1:v.value==="top"?Ga:0}var o=i(e)-i(t);if(o!==0)return o;function s(f){var v=f.pstyle("z-index-compare");return v.value==="auto"&&f.isNode()?1:0}var l=s(e)-s(t);if(l!==0)return l;var u=e.pstyle("z-index").value-t.pstyle("z-index").value;return u!==0?u:e.poolIndex()-t.poolIndex()},ma={forEach:function(e,t){if(ce(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!ce(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Wo)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Ga-1}else{var i=t.source,o=t.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};ma.each=ma.forEach;var Nf=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":K(Symbol))!=e&&K(Symbol.iterator)!=e;t&&(ma[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return j({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};Nf();var zf=Ot({nodeDimensionsIncludeLabels:!1}),ya={layoutDimensions:function(e){e=zf(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(V){return!V.isParent()}),i=this.cy(),o=t.eles,s=function(G){return G.id()},l=At(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(G,D,F){var L={x:D.x1+D.w/2,y:D.y1+D.h/2},$={x:(F.x-L.x)*G,y:(F.y-L.y)*G};return{x:L.x+$.x,y:L.y+$.y}},f=t.spacingFactor&&t.spacingFactor!==1,v=function(){if(!f)return null;for(var G=Jt(),D=0;D<a.length;D++){var F=a[D],L=l(F,D);Yu(G,L.x,L.y)}return G},d=v(),c=At(function(V,G){var D=l(V,G);if(f){var F=Math.abs(t.spacingFactor);D=u(F,d,D)}return t.transform!=null&&(D=t.transform(V,D)),D},s);if(t.animate){for(var h=0;h<a.length;h++){var g=a[h],y=c(g,h),b=t.animateFilter==null||t.animateFilter(g,h);if(b){var w=g.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}else g.position(y)}if(t.fit){var x=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}else if(t.zoom!==void 0&&t.pan!==void 0){var P=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(P)}e.animations.forEach(function(V){return V.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),on.all(e.animations.map(function(V){return V.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(c),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(tt({},e,{eles:this}))}};ya.createLayout=ya.makeLayout=ya.layout;function $o(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function ba(r,e){return r=Fr(r),function(n){return $o(r,e,n)}}function wa(r,e){r=Fr(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return $o(r,t,a)}}var Nt={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Ne(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(re(e))if(t===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function si(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function ui(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||si(i,n);var l=s.source,u=s.target;return t(l)&&(!o||si(l,t))&&(l===u||t(u)&&(!o||si(u,t)))}}}var vn=ba("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Nt.takesUpSpace=wa("takesUpSpace",ui({ok:vn}));var Ff=ba("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&vn(r)}),Vf=ba("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&vn(r)});Nt.interactive=wa("interactive",ui({ok:Ff,parentOk:Vf,edgeOkViaNode:vn})),Nt.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var Gf=ba("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&vn(r)}),Hf=vn;Nt.visible=wa("visible",ui({ok:Gf,edgeOkViaNode:Hf})),Nt.hidden=function(){var r=this[0];if(r)return!r.visible()},Nt.isBundledBezier=wa("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1}),Nt.bypass=Nt.css=Nt.style,Nt.renderedCss=Nt.renderedStyle,Nt.removeBypass=Nt.removeCss=Nt.removeStyle,Nt.pstyle=Nt.parsedStyle;var Or={};function Ko(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&ce(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&ge(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!r.ableField||l._private[r.ableField],f=l._private[r.field]!=r.value;if(r.overrideAble){var v=r.overrideAble(l);if(v!==void 0&&(u=v,!v))return this}u&&(l._private[r.field]=r.value,f&&t.push(l))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),o&&d.emit(o)}return this}}function dn(r){Or[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Or[r.on]=Ko({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Or[r.off]=Ko({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}dn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),dn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"}),dn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),dn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),Or.deselect=Or.unselect,Or.grabbed=function(){var r=this[0];if(r)return r._private.grabbed},dn({field:"active",on:"activate",off:"unactivate"}),dn({field:"pannable",on:"panify",off:"unpanify"}),Or.inactive=function(){var r=this[0];if(r)return!r._private.active};var Wt={},Yo=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var v=u[f],d=v.source(),c=v.target();if(e.noIncomingEdges&&c===s&&d!==s||e.noOutgoingEdges&&d===s&&c!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},Uo=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),v=u.target();e.outgoing&&f===o?(a.push(u),a.push(v)):e.incoming&&v===o&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(t)}},Xo=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],f=u.id();i[f]||(i[f]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(t)}};Wt.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null},tt(Wt,{roots:Yo({noIncomingEdges:!0}),leaves:Yo({noOutgoingEdges:!0}),outgoers:rr(Uo({outgoing:!0}),"outgoers"),successors:Xo({outgoing:!0}),incomers:rr(Uo({incoming:!0}),"incomers"),predecessors:Xo({incoming:!0})}),tt(Wt,{neighborhood:rr(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),Wt.neighbourhood=Wt.neighborhood,Wt.closedNeighbourhood=Wt.closedNeighborhood,Wt.openNeighbourhood=Wt.openNeighborhood,tt(Wt,{source:rr(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:rr(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Zo({attr:"source"}),targets:Zo({attr:"target"})});function Zo(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}tt(Wt,{edgesWith:rr(Qo(),"edgesWith"),edgesTo:rr(Qo({thisIsSrc:!0}),"edgesTo")});function Qo(r){return function(t){var n=[],a=this._private.cy,i=r||{};re(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,v=this.hasElementWithId(f.source)&&t.hasElementWithId(f.target),d=t.hasElementWithId(f.source)&&this.hasElementWithId(f.target),c=v||d;c&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!v||i.thisIsTgt&&!d)||n.push(u))}return this.spawn(n,!0)}}tt(Wt,{connectedEdges:rr(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:rr(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:rr(qo(),"parallelEdges"),codirectedEdges:rr(qo({codirected:!0}),"codirectedEdges")});function qo(r){var e={codirected:!1};return r=tt({},e,r),function(n){for(var a=[],i=this.edges(),o=r,s=0;s<i.length;s++)for(var l=i[s],u=l._private,f=u.source,v=f._private.data.id,d=u.data.target,c=f._private.edges,h=0;h<c.length;h++){var g=c[h],y=g._private.data,b=y.target,w=y.source,x=b===d&&w===v,P=v===b&&d===w;(o.codirected&&x||!o.codirected&&(x||P))&&a.push(g)}return this.spawn(a,!0).filter(n)}}tt(Wt,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(f,v){a.merge(f),i.unmerge(f),v.merge(f)};if(i.empty())return t.spawn();var l=function(){var f=n.collection();o.push(f);var v=i[0];s(v,f),t.bfs({directed:!1,roots:v,visit:function(c){return s(c,f)}}),f.forEach(function(d){d.connectedEdges().forEach(function(c){t.has(c)&&f.has(c.source())&&f.has(c.target())&&f.merge(c)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),Wt.componentsOf=Wt.components;var zt=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){kt("A collection must have a reference to the core");return}var i=new hr,o=!1;if(!t)t=[];else if(t.length>0&&Ne(t[0])&&!Tt(t[0])){o=!0;for(var s=[],l=new jr,u=0,f=t.length;u<f;u++){var v=t[u];v.data==null&&(v.data={});var d=v.data;if(d.id==null)d.id=zi();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var c=new ta(e,v,!1);s.push(c),l.add(d.id)}t=s}this.length=0;for(var h=0,g=t.length;h<g;h++){var y=t[h][0];if(y!=null){var b=y._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(w){this.lazyMap=w},rebuildMap:function(){for(var x=this.lazyMap=new hr,P=this.eles,V=0;V<P.length;V++){var G=P[V];x.set(G.id(),{index:V,ele:G})}}},n&&(this._private.map=i),o&&!a&&this.restore()},Et=ta.prototype=zt.prototype=Object.create(Array.prototype);Et.instanceString=function(){return"collection"},Et.spawn=function(r,e){return new zt(this.cy(),r,e)},Et.spawnSelf=function(){return this.spawn(this)},Et.cy=function(){return this._private.cy},Et.renderer=function(){return this._private.cy.renderer()},Et.element=function(){return this[0]},Et.collection=function(){return se(this)?this:new zt(this._private.cy,[this])},Et.unique=function(){return new zt(this._private.cy,this,!0)},Et.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)},Et.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new zt(e)},Et.$id=Et.getElementById,Et.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},Et.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index},Et.indexOfId=function(r){return r=""+r,this._private.map.get(r).index},Et.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Ne(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=r.data.source,l=r.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in r.data,f=r.data.parent;u&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}r.position&&e.position(r.position);var v=function(g,y,b){var w=r[g];w!=null&&w!==n[g]&&(w?e[y]():e[b]())};return v("removed","remove","restore"),v("selected","select","unselect"),v("selectable","selectify","unselectify"),v("locked","lock","unlock"),v("grabbable","grabify","ungrabify"),v("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:cr(n.data),position:cr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var c=0;return n.classes.forEach(function(h){return d.classes+=c++===0?h:" "+h}),d}}},Et.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r},Et.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new ta(r,a,!1);e.push(i)}return new zt(r,e)},Et.copy=Et.clone,Et.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],s,l=0,u=t.length;l<u;l++){var f=t[l];e&&!f.removed()||(f.isNode()?i.push(f):o.push(f))}s=i.concat(o);var v,d=function(){s.splice(v,1),v--};for(v=0;v<s.length;v++){var c=s[v],h=c._private,g=h.data;if(c.clearTraversalCache(),!(!e&&!h.removed)){if(g.id===void 0)g.id=zi();else if(be(g.id))g.id=""+g.id;else if(et(g.id)||!re(g.id)){kt("Can not create element with invalid string ID `"+g.id+"`"),d();continue}else if(n.hasElementWithId(g.id)){kt("Can not create second element with ID `"+g.id+"`"),d();continue}}var y=g.id;if(c.isNode()){var b=h.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(c.isEdge()){for(var w=c,x=["source","target"],P=x.length,V=!1,G=0;G<P;G++){var D=x[G],F=g[D];be(F)&&(F=g[D]=""+g[D]),F==null||F===""?(kt("Can not create edge `"+y+"` with unspecified "+D),V=!0):n.hasElementWithId(F)||(kt("Can not create edge `"+y+"` with nonexistant "+D+" `"+F+"`"),V=!0)}if(V){d();continue}var L=n.getElementById(g.source),$=n.getElementById(g.target);L.same($)?L._private.edges.push(w):(L._private.edges.push(w),$._private.edges.push(w)),w._private.source=L,w._private.target=$}h.map=new hr,h.map.set(y,{ele:c,index:0}),h.removed=!1,e&&n.addToPool(c)}for(var W=0;W<i.length;W++){var O=i[W],Q=O._private.data;be(Q.parent)&&(Q.parent=""+Q.parent);var H=Q.parent,ne=H!=null;if(ne||O._private.parent){var q=O._private.parent?n.collection().merge(O._private.parent):n.getElementById(H);if(q.empty())Q.parent=void 0;else if(q[0].removed())yt("Node added with missing parent, reference to parent removed"),Q.parent=void 0,O._private.parent=null;else{for(var J=!1,oe=q;!oe.empty();){if(O.same(oe)){J=!0,Q.parent=void 0;break}oe=oe.parent()}J||(q[0]._private.children.push(O),O._private.parent=q[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var le=s.length===t.length?t:new zt(n,s),me=0;me<le.length;me++){var ue=le[me];ue.isNode()||(ue.parallelEdges().clearTraversalCache(),ue.source().clearTraversalCache(),ue.target().clearTraversalCache())}var pe;a.hasCompoundNodes?pe=n.collection().merge(le).merge(le.connectedNodes()).merge(le.parent()):pe=le,pe.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?le.emitAndNotify("add"):e&&le.emit("add")}return t},Et.removed=function(){var r=this[0];return r&&r._private.removed},Et.inside=function(){var r=this[0];return r&&!r._private.removed},Et.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(H){for(var ne=H._private.edges,q=0;q<ne.length;q++)l(ne[q])}function s(H){for(var ne=H._private.children,q=0;q<ne.length;q++)l(ne[q])}function l(H){var ne=a[H.id()];e&&H.removed()||ne||(a[H.id()]=!0,H.isNode()?(n.push(H),o(H),s(H)):n.unshift(H))}for(var u=0,f=t.length;u<f;u++){var v=t[u];l(v)}function d(H,ne){var q=H._private.edges;Dr(q,ne),H.clearTraversalCache()}function c(H){H.clearTraversalCache()}var h=[];h.ids={};function g(H,ne){ne=ne[0],H=H[0];var q=H._private.children,J=H.id();Dr(q,ne),ne._private.parent=null,h.ids[J]||(h.ids[J]=!0,h.push(H))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var y=0;y<n.length;y++){var b=n[y];if(b.isEdge()){var w=b.source()[0],x=b.target()[0];d(w,b),d(x,b);for(var P=b.parallelEdges(),V=0;V<P.length;V++){var G=P[V];c(G),G.isBundledBezier()&&G.dirtyBoundingBoxCache()}}else{var D=b.parent();D.length!==0&&g(D,b)}e&&(b._private.removed=!0)}var F=i._private.elements;i._private.hasCompoundNodes=!1;for(var L=0;L<F.length;L++){var $=F[L];if($.isParent()){i._private.hasCompoundNodes=!0;break}}var W=new zt(this.cy(),n);W.size()>0&&(r?W.emitAndNotify("remove"):e&&W.emit("remove"));for(var O=0;O<h.length;O++){var Q=h[O];(!e||!Q.removed())&&Q.updateStyle()}return W},Et.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),s=i(r.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var c=0;c<t.length;c++){var h=t[c],g=h._private.data;h.isEdge()&&(l&&(g.source=o),u&&(g.target=s))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var f=i(r.parent),v=f===null||e.hasElementWithId(f);if(v){var d=f===null?void 0:f;e.batch(function(){var c=t.remove(n,a);c.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var g=t[h],y=g._private.data;g.isNode()&&(y.parent=d)}c.restore(n,a)}),t.emitAndNotify("move")}}return this},[vo,jl,va,Ar,un,gf,da,Lf,Go,Ho,Of,ma,ya,Nt,Or,Wt].forEach(function(r){tt(Et,r)});var Wf={add:function(e){var t,n=this;if(Qe(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}t=new zt(n,i)}}else if(ge(e)){var l=e;t=new zt(n,l)}else if(Ne(e)&&(ge(e.nodes)||ge(e.edges))){for(var u=e,f=[],v=["nodes","edges"],d=0,c=v.length;d<c;d++){var h=v[d],g=u[h];if(ge(g))for(var y=0,b=g.length;y<b;y++){var w=tt({group:h},g[y]);f.push(w)}}t=new zt(n,f)}else{var x=e;t=new ta(n,x).collection()}return t},remove:function(e){if(!Qe(e)){if(re(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function $f(r,e,t,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var v=0;v<4;++v)if(typeof arguments[v]!="number"||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=f?new Float32Array(l):new Array(l);function c($,W){return 1-3*W+3*$}function h($,W){return 3*W-6*$}function g($){return 3*$}function y($,W,O){return((c(W,O)*$+h(W,O))*$+g(W))*$}function b($,W,O){return 3*c(W,O)*$*$+2*h(W,O)*$+g(W)}function w($,W){for(var O=0;O<a;++O){var Q=b(W,r,t);if(Q===0)return W;var H=y(W,r,t)-$;W-=H/Q}return W}function x(){for(var $=0;$<l;++$)d[$]=y($*u,r,t)}function P($,W,O){var Q,H,ne=0;do H=W+(O-W)/2,Q=y(H,r,t)-$,Q>0?O=H:W=H;while(Math.abs(Q)>o&&++ne<s);return H}function V($){for(var W=0,O=1,Q=l-1;O!==Q&&d[O]<=$;++O)W+=u;--O;var H=($-d[O])/(d[O+1]-d[O]),ne=W+H*u,q=b(ne,r,t);return q>=i?w($,ne):q===0?ne:P($,W,W+u)}var G=!1;function D(){G=!0,(r!==e||t!==n)&&x()}var F=function(W){return G||D(),r===e&&t===n?W:W===0?0:W===1?1:y(V(W),e,n)};F.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var L="generateBezier("+[r,e,t,n]+")";return F.toString=function(){return L},F}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Kf=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),f=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+f*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1/1e4,v=16/1e3,d,c,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,d=o!==null,d?(u=n(a,i),c=u/o*v):c=v;h=t(h||s,c),l.push(1+h.x),u+=16,Math.abs(h.x)>f&&Math.abs(h.v)>f;);return d?function(g){return l[g*(l.length-1)|0]}:u}}(),Ct=function(e,t,n,a){var i=$f(e,t,n,a);return function(o,s,l){return o+(s-o)*i(l)}},xa={linear:function(e,t,n){return e+(t-e)*n},ease:Ct(.25,.1,.25,1),"ease-in":Ct(.42,0,1,1),"ease-out":Ct(0,0,.58,1),"ease-in-out":Ct(.42,0,.58,1),"ease-in-sine":Ct(.47,0,.745,.715),"ease-out-sine":Ct(.39,.575,.565,1),"ease-in-out-sine":Ct(.445,.05,.55,.95),"ease-in-quad":Ct(.55,.085,.68,.53),"ease-out-quad":Ct(.25,.46,.45,.94),"ease-in-out-quad":Ct(.455,.03,.515,.955),"ease-in-cubic":Ct(.55,.055,.675,.19),"ease-out-cubic":Ct(.215,.61,.355,1),"ease-in-out-cubic":Ct(.645,.045,.355,1),"ease-in-quart":Ct(.895,.03,.685,.22),"ease-out-quart":Ct(.165,.84,.44,1),"ease-in-out-quart":Ct(.77,0,.175,1),"ease-in-quint":Ct(.755,.05,.855,.06),"ease-out-quint":Ct(.23,1,.32,1),"ease-in-out-quint":Ct(.86,0,.07,1),"ease-in-expo":Ct(.95,.05,.795,.035),"ease-out-expo":Ct(.19,1,.22,1),"ease-in-out-expo":Ct(1,0,0,1),"ease-in-circ":Ct(.6,.04,.98,.335),"ease-out-circ":Ct(.075,.82,.165,1),"ease-in-out-circ":Ct(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return xa.linear;var a=Kf(e,t,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":Ct};function Jo(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function jo(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function cn(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=jo(r,a),s=jo(e,a);if(be(o)&&be(s))return Jo(i,o,s,t,n);if(ge(o)&&ge(s)){for(var l=[],u=0;u<s.length;u++){var f=o[u],v=s[u];if(f!=null&&v!=null){var d=Jo(i,f,v,t,n);l.push(d)}else l.push(v)}return l}}function Yf(r,e,t,n){var a=!n,i=r._private,o=e._private,s=o.easing,l=o.startTime,u=n?r:r.cy(),f=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=xa.linear;else{var v;if(re(s)){var d=f.parse("transition-timing-function",s);v=d.value}else v=s;var c,h;re(v)?(c=v,h=[]):(c=v[1],h=v.slice(2).map(function(le){return+le})),h.length>0?(c==="spring"&&h.push(o.duration),o.easingImpl=xa[c].apply(null,h)):o.easingImpl=xa[c]}var g=o.easingImpl,y;if(o.duration===0?y=1:y=(t-l)/o.duration,o.applying&&(y=o.progress),y<0?y=0:y>1&&(y=1),o.delay==null){var b=o.startPosition,w=o.position;if(w&&a&&!r.locked()){var x={};Vn(b.x,w.x)&&(x.x=cn(b.x,w.x,y,g)),Vn(b.y,w.y)&&(x.y=cn(b.y,w.y,y,g)),r.position(x)}var P=o.startPan,V=o.pan,G=i.pan,D=V!=null&&n;D&&(Vn(P.x,V.x)&&(G.x=cn(P.x,V.x,y,g)),Vn(P.y,V.y)&&(G.y=cn(P.y,V.y,y,g)),r.emit("pan"));var F=o.startZoom,L=o.zoom,$=L!=null&&n;$&&(Vn(F,L)&&(i.zoom=Pn(i.minZoom,cn(F,L,y,g),i.maxZoom)),r.emit("zoom")),(D||$)&&r.emit("viewport");var W=o.style;if(W&&W.length>0&&a){for(var O=0;O<W.length;O++){var Q=W[O],H=Q.name,ne=Q,q=o.startStyle[H],J=f.properties[q.name],oe=cn(q,ne,y,g,J);f.overrideBypass(r,H,oe)}r.emit("style")}}return o.progress=y,y}function Vn(r,e){return r==null||e==null?!1:be(r)&&be(e)?!0:!!(r&&e)}function Uf(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function _o(r,e){var t=e._private.aniEles,n=[];function a(f,v){var d=f._private,c=d.animation.current,h=d.animation.queue,g=!1;if(c.length===0){var y=h.shift();y&&c.push(y)}for(var b=function(G){for(var D=G.length-1;D>=0;D--){var F=G[D];F()}G.splice(0,G.length)},w=c.length-1;w>=0;w--){var x=c[w],P=x._private;if(P.stopped){c.splice(w,1),P.hooked=!1,P.playing=!1,P.started=!1,b(P.frames);continue}!P.playing&&!P.applying||(P.playing&&P.applying&&(P.applying=!1),P.started||Uf(f,x,r),Yf(f,x,r,v),P.applying&&(P.applying=!1),b(P.frames),P.step!=null&&P.step(r),x.completed()&&(c.splice(w,1),P.hooked=!1,P.playing=!1,P.started=!1,b(P.completes)),g=!0)}return!v&&c.length===0&&h.length===0&&n.push(f),g}for(var i=!1,o=0;o<t.length;o++){var s=t[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var Xf={animate:bt.animate(),animation:bt.animation(),animated:bt.animated(),clearQueue:bt.clearQueue(),delay:bt.delay(),delayAnimation:bt.delayAnimation(),stop:bt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&jn(function(i){_o(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){_o(o,e)},n.beforeRenderPriorities.animations):t()}},Zf={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Tt(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Ea=function(e){return re(e)?new Lr(e):e},es={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ga(Zf,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Ea(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Ea(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Ea(t),n),this},once:function(e,t,n){return this.emitter().one(e,Ea(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};bt.eventAliasesOn(es);var li={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};li.jpeg=li.jpg;var Ca={layout:function(e){var t=this;if(e==null){kt("Layout options must be specified to make a layout");return}if(e.name==null){kt("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){kt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;re(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(tt({},e,{cy:t,eles:i}));return o}};Ca.createLayout=Ca.makeLayout=Ca.layout;var Qf={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=t.getElementById(i);s.data(o)}})}},qf=Ot({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),fi={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){kt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&yt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=qf(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};fi.invalidateDimensions=fi.resize;var Sa={collection:function(e,t){return re(e)?this.$(e):Qe(e)?e.collection():ge(e)?(t||(t={}),new zt(this,e,t.unique,t.removed)):new zt(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Sa.elements=Sa.filter=Sa.$;var $t={},Gn="t",Jf="f";$t.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var f=e.updateStyleHints(o);f&&a.push(o)}}return a},$t.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<t.length;l++){var u=t[l],f=r[l]===Gn,v=e[l]===Gn,d=f!==v,c=u.mappedProperties.length>0;if(d||v&&c){var h=void 0;d&&c||d?h=u.properties:c&&(h=u.mappedProperties);for(var g=0;g<h.length;g++){for(var y=h[g],b=y.name,w=!1,x=l+1;x<t.length;x++){var P=t[x],V=e[x]===Gn;if(V&&(w=P.properties[y.name]!=null,w))break}!s[b]&&!w&&(s[b]=!0,o.push(b))}}}return n[a]=o,o},$t.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(r);s?t+=Gn:t+=Jf}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}},$t.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],s=e[i]===Gn;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a},$t.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=t.pstyle(l);if(!u)if(f)f.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(f!==u){if(u.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===u.value){var v=f.mapping,d=v.fnValue=u.value(t);if(d===v.prevFnValue)continue}var c=i[l]={prev:f};n.applyParsedProperty(t,u),c.next=t.pstyle(l),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:i}},$t.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(Ie,Ge,nt){return t.getPropertiesHash(Ie,Ge,nt)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",l=r._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var f=a[u];e.styleKeys[f]=[Jr,Sn]}for(var v=function(Ie,Ge){return e.styleKeys[Ge][0]=Tn(Ie,e.styleKeys[Ge][0])},d=function(Ie,Ge){return e.styleKeys[Ge][1]=Dn(Ie,e.styleKeys[Ge][1])},c=function(Ie,Ge){v(Ie,Ge),d(Ie,Ge)},h=function(Ie,Ge){for(var nt=0;nt<Ie.length;nt++){var at=Ie.charCodeAt(nt);v(at,Ge),d(at,Ge)}},g=2e9,y=function(Ie){return-128<Ie&&Ie<128&&Math.floor(Ie)!==Ie?g-(Ie*1024|0):Ie},b=0;b<n.length;b++){var w=n[b],x=l[w];if(x!=null){var P=this.properties[w],V=P.type,G=P.groupKey,D=void 0;P.hashOverride!=null?D=P.hashOverride(r,x):x.pfValue!=null&&(D=x.pfValue);var F=P.enums==null?x.value:null,L=D!=null,$=F!=null,W=L||$,O=x.units;if(V.number&&W&&!V.multiple){var Q=L?D:F;c(y(Q),G),!L&&O!=null&&h(O,G)}else h(x.strValue,G)}}for(var H=[Jr,Sn],ne=0;ne<a.length;ne++){var q=a[ne],J=e.styleKeys[q];H[0]=Tn(J[0],H[0]),H[1]=Dn(J[1],H[1])}e.styleKey=fu(H[0],H[1]);var oe=e.styleKeys;e.labelDimsKey=Tr(oe.labelDimensions);var le=i(r,["label"],oe.labelDimensions);if(e.labelKey=Tr(le),e.labelStyleKey=Tr(_n(oe.commonLabel,le)),!s){var me=i(r,["source-label"],oe.labelDimensions);e.sourceLabelKey=Tr(me),e.sourceLabelStyleKey=Tr(_n(oe.commonLabel,me));var ue=i(r,["target-label"],oe.labelDimensions);e.targetLabelKey=Tr(ue),e.targetLabelStyleKey=Tr(_n(oe.commonLabel,ue))}if(s){var pe=e.styleKeys,Te=pe.nodeBody,ke=pe.nodeBorder,Se=pe.backgroundImage,xe=pe.compound,ae=pe.pie,De=[Te,ke,Se,xe,ae].filter(function(Pe){return Pe!=null}).reduce(_n,[Jr,Sn]);e.nodeKey=Tr(De),e.hasPie=ae!=null&&ae[0]!==Jr&&ae[1]!==Sn}return o!==e.styleKey},$t.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},$t.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,s=t.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,v=r._private,d="mapping",c=function(Te){return Te==null?null:Te.pfValue!=null?Te.pfValue:Te.value},h=function(){var Te=c(u),ke=c(n);t.checkTriggers(r,n.name,Te,ke)};if(n&&n.name.substr(0,3)==="pie"&&yt("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,h(),!0):!1:(h(),!0);var g=function(){yt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var y=n.field.split("."),b=v.data,w=0;w<y.length&&b;w++){var x=y[w];b=b[x]}if(b==null)return g(),!1;var P;if(be(b)){var V=n.fieldMax-n.fieldMin;V===0?P=0:P=(b-n.fieldMin)/V}else return yt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(P<0?P=0:P>1&&(P=1),s.color){var G=n.valueMin[0],D=n.valueMax[0],F=n.valueMin[1],L=n.valueMax[1],$=n.valueMin[2],W=n.valueMax[2],O=n.valueMin[3]==null?1:n.valueMin[3],Q=n.valueMax[3]==null?1:n.valueMax[3],H=[Math.round(G+(D-G)*P),Math.round(F+(L-F)*P),Math.round($+(W-$)*P),Math.round(O+(Q-O)*P)];i={bypass:n.bypass,name:n.name,value:H,strValue:"rgb("+H[0]+", "+H[1]+", "+H[2]+")"}}else if(s.number){var ne=n.valueMin+(n.valueMax-n.valueMin)*P;i=this.parse(n.name,ne,n.bypass,d)}else return!1;if(!i)return g(),!1;i.mapping=n,n=i;break}case o.data:{for(var q=n.field.split("."),J=v.data,oe=0;oe<q.length&&J;oe++){var le=q[oe];J=J[le]}if(J!=null&&(i=this.parse(n.name,J,n.bypass,d)),!i)return g(),!1;i.mapping=n,n=i;break}case o.fn:{var me=n.value,ue=n.fnValue!=null?n.fnValue:me(r);if(n.prevFnValue=ue,ue==null)return yt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,ue,n.bypass,d),!i)return yt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=cr(n),n=i;break}case void 0:break;default:return!1}return l?(f?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,h(),!0},$t.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}},$t.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()},$t.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],v=r.pstyle(f),d=e[f];if(d){var c=d.prev,h=c,g=d.next!=null?d.next:v,y=!1,b=void 0,w=1e-6;h&&(be(h.pfValue)&&be(g.pfValue)?(y=g.pfValue-h.pfValue,b=h.pfValue+w*y):be(h.value)&&be(g.value)?(y=g.value-h.value,b=h.value+w*y):ge(h.value)&&ge(g.value)&&(y=h.value[0]!==g.value[0]||h.value[1]!==g.value[1]||h.value[2]!==g.value[2],b=h.strValue),y&&(s[f]=g.strValue,this.applyBypass(r,f,b),l=!0))}}if(!l)return;n.transitioning=!0,new on(function(x){o>0?r.delayAnimation(o).play().promise().then(x):x()}).then(function(){return r.animation({style:s,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)},$t.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(t,n)&&i(o)},$t.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})},$t.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(t==="bezier"||n==="bezier")||e==="display"&&(t==="none"||n==="none"))&&r.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})},$t.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Hn={};Hn.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,f=this.parse(u,t,!0);f&&i.push(f)}}else if(re(e)){var v=this.parse(e,t,!0);v&&i.push(v)}else if(Ne(e)){var d=e;n=t;for(var c=Object.keys(d),h=0;h<c.length;h++){var g=c[h],y=d[g];if(y===void 0&&(y=d[dr(g)]),y!==void 0){var b=this.parse(g,y,!0);b&&i.push(b)}}}else return!1;if(i.length===0)return!1;for(var w=!1,x=0;x<r.length;x++){for(var P=r[x],V={},G=void 0,D=0;D<i.length;D++){var F=i[D];if(n){var L=P.pstyle(F.name);G=V[F.name]={prev:L}}w=this.applyParsedProperty(P,cr(F))||w,n&&(G.next=P.pstyle(F.name))}w&&this.updateStyleHints(P),n&&this.updateTransitions(P,V,o)}return w},Hn.overrideBypass=function(r,e,t){e=Rt(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),s?i.strValue="rgb("+t.join(",")+")":l?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,u,t)}},Hn.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)},Hn.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=i.pstyle(u.name);if(!(!f||!f.bypass)){var v="",d=this.parse(l,v,!0),c=o[u.name]={prev:f};this.applyParsedProperty(i,d),c.next=i.pstyle(u.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var vi={};vi.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1},vi.containerCss=function(r){var e=this._private.cy,t=e.container();if(fe&&t&&fe.getComputedStyle)return fe.getComputedStyle(t).getPropertyValue(r)};var gr={};gr.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)},gr.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[dr(i.name)]=o)}return n}},gr.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]},gr.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(t&&i.number&&s!=null&&be(s)){var f=r.cy().zoom(),v=function(y){return y*f},d=function(y,b){return v(y)+b},c=ge(s),h=c?l.every(function(g){return g!=null}):l!=null;return h?c?s.map(function(g,y){return d(g,l[y])}).join(" "):d(s,l):c?s.map(function(g){return re(g)?g:""+v(g)}).join(" "):""+v(s)}else if(u!=null)return u}return null}},gr.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(Ne(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t},gr.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[Rt(s)],f=this.parse(u.name,l);f&&t.push(f)}return t},gr.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Tn(s,n[0]),n[1]=Dn(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=Tn(s,n[0]),n[1]=Dn(s,n[1]);return n},gr.getPropertiesHash=gr.getNonDefaultPropertiesHash;var Ta={};Ta.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e},Ta.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e},Ta.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var di={};di.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){yt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var v=f[1];if(v!=="core"){var d=new Lr(v);if(d.invalid){yt("Skipping parsing of block: Invalid selector found in string stylesheet: "+v),s();continue}}var c=f[2],h=!1;i=c;for(var g=[];;){var y=i.match(/^\s*$/);if(y)break;var b=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){yt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),h=!0;break}o=b[0];var w=b[1],x=b[2],P=e.properties[w];if(!P){yt("Skipping property: Invalid property name in: "+o),l();continue}var V=t.parse(w,x);if(!V){yt("Skipping property: Invalid property definition in: "+o),l();continue}g.push({name:w,val:x}),l()}if(h){s();break}t.selector(v);for(var G=0;G<g.length;G++){var D=g[G];t.css(D.name,D.val)}s()}return t},di.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Ft={};(function(){var r=Lt,e=Js,t=_s,n=eu,a=tu,i=function(De){return"^"+De+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(De){var Pe=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+De+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+Pe+")\\s*\\,\\s*("+Pe+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Ft.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(De,Pe){switch(De.length){case 2:return Pe[0]!=="deg"&&Pe[0]!=="rad"&&Pe[1]!=="deg"&&Pe[1]!=="rad";case 1:return re(De[0])||Pe[0]==="deg"||Pe[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(De){var Pe=De.length;return Pe===1||Pe===2||Pe===4}}};var l={zeroNonZero:function(De,Pe){return(De==null||Pe==null)&&De!==Pe||De==0&&Pe!=0?!0:De!=0&&Pe==0},any:function(De,Pe){return De!=Pe},emptyNonEmpty:function(De,Pe){var Ie=et(De),Ge=et(Pe);return Ie&&!Ge||!Ie&&Ge}},u=Ft.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],v=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],c=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],g=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],b=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],w=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],x=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],P=function(De,Pe){return Pe.value==="label"?-De.poolIndex():Pe.pfValue},V=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:P},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:P},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],G=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],D=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],F=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],L=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],$=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],W=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],O=[];Ft.pieBackgroundN=16,O.push({name:"pie-size",type:u.sizeMaybePercent});for(var Q=1;Q<=Ft.pieBackgroundN;Q++)O.push({name:"pie-"+Q+"-background-color",type:u.color}),O.push({name:"pie-"+Q+"-background-size",type:u.percent}),O.push({name:"pie-"+Q+"-background-opacity",type:u.zeroOneNumber});var H=[],ne=Ft.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach(function(ae){ne.forEach(function(De){var Pe=De+"-"+ae.name,Ie=ae.type,Ge=ae.triggersBounds;H.push({name:Pe,type:Ie,triggersBounds:Ge})})},{});var q=Ft.properties=[].concat(g,x,y,b,w,$,h,c,f,v,d,V,G,D,O,F,L,H,W),J=Ft.propertyGroups={behavior:g,transition:x,visibility:y,overlay:b,underlay:w,ghost:$,commonLabel:h,labelDimensions:c,mainLabel:f,sourceLabel:v,targetLabel:d,nodeBody:V,nodeBorder:G,backgroundImage:D,pie:O,compound:F,edgeLine:L,edgeArrow:H,core:W},oe=Ft.propertyGroupNames={},le=Ft.propertyGroupKeys=Object.keys(J);le.forEach(function(ae){oe[ae]=J[ae].map(function(De){return De.name}),J[ae].forEach(function(De){return De.groupKey=ae})});var me=Ft.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ft.propertyNames=q.map(function(ae){return ae.name});for(var ue=0;ue<q.length;ue++){var pe=q[ue];q[pe.name]=pe}for(var Te=0;Te<me.length;Te++){var ke=me[Te],Se=q[ke.pointsTo],xe={name:ke.name,alias:!0,pointsTo:Se};q.push(xe),q[ke.name]=xe}})(),Ft.getDefaultProperty=function(r){return this.getDefaultProperties()[r]},Ft.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=tt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=Ft.pieBackgroundN;f++){var v=u.name.replace("{{i}}",f),d=u.value;l[v]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(l,u){return Ft.arrowPrefixes.forEach(function(f){var v=f+"-"+u.name,d=u.value;l[v]=d}),l},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);t[i]=s}}return r.defaultProperties=t,r.defaultProperties},Ft.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Da={};Da.parse=function(r,e,t,n){var a=this;if(ce(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,l=Ai(r,s,o,i),u=a.propCache=a.propCache||[],f;return(f=u[l])||(f=u[l]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(f=cr(f),f&&(f.value=cr(f.value))),f},Da.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&yt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&yt("The style value of `label` is deprecated for `"+a.name+"`"),a},Da.parseImpl=function(r,e,t,n){var a=this;r=Rt(r);var i=a.properties[r],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var l=re(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(ce(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var f,v;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(t)return!1;var d=s.data;return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(v=new RegExp(s.mapData.regex).exec(e))){if(t||u.multiple)return!1;var c=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(r,v[4]);if(!h||h.mapped)return!1;var g=this.parse(r,v[5]);if(!g||g.mapped)return!1;if(h.pfValue===g.pfValue||h.strValue===g.strValue)return yt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+h.strValue+"`"),this.parse(r,h.strValue);if(u.color){var y=h.value,b=g.value,w=y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&(y[3]===b[3]||(y[3]==null||y[3]===1)&&(b[3]==null||b[3]===1));if(w)return!1}return{name:r,value:v,strValue:""+e,mapped:c,field:v[1],fieldMin:parseFloat(v[2]),fieldMax:parseFloat(v[3]),valueMin:h.value,valueMax:g.value,bypass:t}}}if(u.multiple&&n!=="multiple"){var x;if(l?x=e.split(/\s+/):ge(e)?x=e:x=[e],u.evenMultiple&&x.length%2!==0)return null;for(var P=[],V=[],G=[],D="",F=!1,L=0;L<x.length;L++){var $=a.parse(r,x[L],t,"multiple");F=F||re($.value),P.push($.value),G.push($.pfValue!=null?$.pfValue:$.value),V.push($.units),D+=(L>0?" ":"")+$.strValue}return u.validate&&!u.validate(P,V)?null:u.singleEnum&&F?P.length===1&&re(P[0])?{name:r,value:P[0],strValue:P[0],bypass:t}:null:{name:r,value:P,pfValue:G,strValue:D,bypass:t,units:V}}var W=function(){for(var Pe=0;Pe<u.enums.length;Pe++){var Ie=u.enums[Pe];if(Ie===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(u.number){var O,Q="px";if(u.units&&(O=u.units),u.implicitUnits&&(Q=u.implicitUnits),!u.unitless)if(l){var H="px|em"+(u.allowPercent?"|\\%":"");O&&(H=O);var ne=e.match("^("+Lt+")("+H+")?$");ne&&(e=ne[1],O=ne[2]||Q)}else(!O||u.implicitUnits)&&(O=Q);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,W();if(u.integer&&!dt(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var q={name:r,value:e,strValue:""+e+(O||""),units:O,bypass:t};return u.unitless||O!=="px"&&O!=="em"?q.pfValue=e:q.pfValue=O==="px"||!O?e:this.getEmSizeInPixels()*e,(O==="ms"||O==="s")&&(q.pfValue=O==="ms"?e:1e3*e),(O==="deg"||O==="rad")&&(q.pfValue=O==="rad"?e:Vu(e)),O==="%"&&(q.pfValue=e/100),q}else if(u.propList){var J=[],oe=""+e;if(oe!=="none"){for(var le=oe.split(/\s*,\s*|\s+/),me=0;me<le.length;me++){var ue=le[me].trim();a.properties[ue]?J.push(ue):yt("`"+ue+"` is not a valid property name")}if(J.length===0)return null}return{name:r,value:J,strValue:J.length===0?"none":J.join(" "),bypass:t}}else if(u.color){var pe=su(e);return pe?{name:r,value:pe,pfValue:pe,strValue:"rgb("+pe[0]+","+pe[1]+","+pe[2]+")",bypass:t}:null}else if(u.regex||u.regexes){if(u.enums){var Te=W();if(Te)return Te}for(var ke=u.regexes?u.regexes:[u.regex],Se=0;Se<ke.length;Se++){var xe=new RegExp(ke[Se]),ae=xe.exec(e);if(ae)return{name:r,value:u.singleRegexMatchValue?ae[1]:ae,strValue:""+e,bypass:t}}return null}else return u.string?{name:r,value:""+e,strValue:""+e,bypass:t}:u.enums?W():null};var Kt=function r(e){if(!(this instanceof r))return new r(e);if(!we(e)){kt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Yt=Kt.prototype;Yt.instanceString=function(){return"style"},Yt.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this},Yt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Yt.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)},Yt.selector=function(r){var e=r==="core"?null:new Lr(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this},Yt.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[dr(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this},Yt.style=Yt.css,Yt.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this},Yt.append=function(r){return Ae(r)?r.appendToStyle(this):ge(r)?this.appendFromJson(r):re(r)&&this.appendFromString(r),this},Kt.fromJson=function(r,e){var t=new Kt(r);return t.fromJson(e),t},Kt.fromString=function(r,e){return new Kt(r).fromString(e)},[$t,Hn,vi,gr,Ta,di,Ft,Da].forEach(function(r){tt(Yt,r)}),Kt.types=Yt.types,Kt.properties=Yt.properties,Kt.propertyGroups=Yt.propertyGroups,Kt.propertyGroupNames=Yt.propertyGroupNames,Kt.propertyGroupKeys=Yt.propertyGroupKeys;var jf={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Ae(e)?t.style=e.generateStyle(this):ge(e)?t.style=Kt.fromJson(this,e):re(e)?t.style=Kt.fromString(this,e):t.style=Kt(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},_f="single",Kr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=_f),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return t;case 1:if(re(e[0]))return n=e[0],t[n];if(Ne(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,be(o)&&(t.x=o),be(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&be(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ne(e)&&(s=n[0],l=s.x,u=s.y,be(l)&&(a.x+=l),be(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&be(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(be(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(re(e)){var a=e;e=this.$(a)}else if(Dt(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Qe(e)||(e=this.mutableElements());if(!(Qe(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(t=be(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*t)/n.w,(s-2*t)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return be(e)&&be(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):be(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:be(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,s=!1;if(t.zoomingEnabled||(s=!0),be(e)?o=e:Ne(e)&&(o=e.level,e.position!=null?i=ra(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!be(o)||o===a||i!=null&&(!be(i.x)||!be(i.y)))return null;if(i!=null){var l=n,u=a,f=o,v={x:-f/u*(i.x-l.x)+i.x,y:-f/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:v}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(be(e.zoom)||(n=!1),Ne(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;be(u.x)&&(t.pan.x=u.x,s=!1),be(u.y)&&(t.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(re(e)){var n=e;e=this.mutableElements().filter(n)}else Qe(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container;return e.sizeCache=e.sizeCache||(t?function(){var n=fe.getComputedStyle(t),a=function(o){return parseFloat(n.getPropertyValue(o))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Kr.centre=Kr.center,Kr.autolockNodes=Kr.autolock,Kr.autoungrabifyNodes=Kr.autoungrabify;var Wn={data:bt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:bt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:bt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:bt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Wn.attr=Wn.data,Wn.removeAttr=Wn.removeData;var $n=function(e){var t=this;e=tt({},e);var n=e.container;n&&!_e(n)&&_e(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=fe!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=tt({name:o?"grid":"null"},s.layout),s.renderer=tt({name:o?"canvas":"null"},s.renderer);var l=function(h,g,y){return g!==void 0?g:y!==void 0?y:h},u=this._private={container:n,ready:!1,options:s,elements:new zt(this),listeners:[],aniEles:new zt(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:be(s.zoom)?s.zoom:1,pan:{x:Ne(s.pan)&&be(s.pan.x)?s.pan.x:0,y:Ne(s.pan)&&be(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(h,g){var y=h.some(qt);if(y)return on.all(h).then(g);g(h)};u.styleEnabled&&t.setStyle([]);var v=tt({},s,s.renderer);t.initRenderer(v);var d=function(h,g,y){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),h!=null&&(Ne(h)||ge(h))&&t.add(h),t.one("layoutready",function(x){t.notifications(!0),t.emit(x),t.one("load",g),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",y),t.emit("done")});var w=tt({},t._private.options.layout);w.eles=t.elements(),t.layout(w).run()};f([s.style,s.elements],function(c){var h=c[0],g=c[1];u.styleEnabled&&t.style().append(h),d(g,function(){t.startAnimationLoop(),u.ready=!0,ce(s.ready)&&t.on("ready",s.ready);for(var y=0;y<i.length;y++){var b=i[y];t.on("ready",b)}a&&(a.readies=[]),t.emit("ready")},s.done)})},ka=$n.prototype;tt(ka,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!_e(e)&&_e(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(tt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return cr(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(P){return t.getElementById(P.id())};if(Ne(e)){if(t.startBatch(),e.elements){var o={},s=function(P,V){for(var G=[],D=[],F=0;F<P.length;F++){var L=P[F];if(!L.data.id){yt("cy.json() cannot handle elements without an ID attribute");continue}var $=""+L.data.id,W=t.getElementById($);o[$]=!0,W.length!==0?D.push({ele:W,json:L}):(V&&(L.group=V),G.push(L))}t.add(G);for(var O=0;O<D.length;O++){var Q=D[O],H=Q.ele,ne=Q.json;H.json(ne)}};if(ge(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],v=e.elements[f];ge(v)&&s(v,f)}var d=t.collection();a.filter(function(x){return!o[x.id()]}).forEach(function(x){x.isParent()?d.merge(x):x.remove()}),d.forEach(function(x){return x.children().move({parent:null})}),d.forEach(function(x){return i(x).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var c=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<c.length;h++){var g=c[h];e[g]!=null&&t[g](e[g])}return t.endBatch(),this}else{var y=!!e,b={};y?b.elements=this.elements().map(function(x){return x.json()}):(b.elements={},a.forEach(function(x){var P=x.group();b.elements[P]||(b.elements[P]=[]),b.elements[P].push(x.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=cr(t.data());var w=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=cr(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=cr(w.renderer),b.hideEdgesOnViewport=w.hideEdgesOnViewport,b.textureOnViewport=w.textureOnViewport,b.wheelSensitivity=w.wheelSensitivity,b.motionBlur=w.motionBlur,b.multiClickDebounceTime=w.multiClickDebounceTime,b}}}),ka.$id=ka.getElementById,[Wf,Xf,es,li,Ca,Qf,fi,Sa,jf,Kr,Wn].forEach(function(r){tt(ka,r)});var ev={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},hn=function(e){return e.scratch("breadthfirst")},ts=function(e,t){return e.scratch("breadthfirst",t)};function rs(r){this.options=tt({},ev,r)}rs.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().filter(function(He){return!He.isParent()}),i=n,o=e.directed,s=e.maximal||e.maximalAdjustments>0,l=Jt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),u;if(Qe(e.roots))u=e.roots;else if(ge(e.roots)){for(var f=[],v=0;v<e.roots.length;v++){var d=e.roots[v],c=t.getElementById(d);f.push(c)}u=t.collection(f)}else if(re(e.roots))u=t.$(e.roots);else if(o)u=a.roots();else{var h=n.components();u=t.collection();for(var g=function(Fe){var qe=h[Fe],Ye=qe.maxDegree(!1),We=qe.filter(function(Ze){return Ze.degree(!1)===Ye});u=u.add(We)},y=0;y<h.length;y++)g(y)}var b=[],w={},x=function(Fe,qe){b[qe]==null&&(b[qe]=[]);var Ye=b[qe].length;b[qe].push(Fe),ts(Fe,{index:Ye,depth:qe})},P=function(Fe,qe){var Ye=hn(Fe),We=Ye.depth,Ze=Ye.index;b[We][Ze]=null,x(Fe,qe)};i.bfs({roots:u,directed:e.directed,visit:function(Fe,qe,Ye,We,Ze){var vt=Fe[0],it=vt.id();x(vt,Ze),w[it]=!0}});for(var V=[],G=0;G<a.length;G++){var D=a[G];w[D.id()]||V.push(D)}var F=function(Fe){for(var qe=b[Fe],Ye=0;Ye<qe.length;Ye++){var We=qe[Ye];if(We==null){qe.splice(Ye,1),Ye--;continue}ts(We,{depth:Fe,index:Ye})}},L=function(){for(var Fe=0;Fe<b.length;Fe++)F(Fe)},$=function(Fe,qe){for(var Ye=hn(Fe),We=Fe.incomers().filter(function(R){return R.isNode()&&n.has(R)}),Ze=-1,vt=Fe.id(),it=0;it<We.length;it++){var rt=We[it],Le=hn(rt);Ze=Math.max(Ze,Le.depth)}return Ye.depth<=Ze?qe[vt]?null:(P(Fe,Ze+1),qe[vt]=!0,!0):!1};if(o&&s){var W=[],O={},Q=function(Fe){return W.push(Fe)},H=function(){return W.shift()};for(a.forEach(function(He){return W.push(He)});W.length>0;){var ne=H(),q=$(ne,O);if(q)ne.outgoers().filter(function(He){return He.isNode()&&n.has(He)}).forEach(Q);else if(q===null){yt("Detected double maximal shift for node `"+ne.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}L();var J=0;if(e.avoidOverlap)for(var oe=0;oe<a.length;oe++){var le=a[oe],me=le.layoutDimensions(e),ue=me.w,pe=me.h;J=Math.max(J,ue,pe)}var Te={},ke=function(Fe){if(Te[Fe.id()])return Te[Fe.id()];for(var qe=hn(Fe).depth,Ye=Fe.neighborhood(),We=0,Ze=0,vt=0;vt<Ye.length;vt++){var it=Ye[vt];if(!(it.isEdge()||it.isParent()||!a.has(it))){var rt=hn(it);if(rt!=null){var Le=rt.index,R=rt.depth;if(!(Le==null||R==null)){var ve=b[R].length;R<qe&&(We+=Le/ve,Ze++)}}}}return Ze=Math.max(1,Ze),We=We/Ze,Ze===0&&(We=0),Te[Fe.id()]=We,We},Se=function(Fe,qe){var Ye=ke(Fe),We=ke(qe),Ze=Ye-We;return Ze===0?Di(Fe.id(),qe.id()):Ze};e.depthSort!==void 0&&(Se=e.depthSort);for(var xe=0;xe<b.length;xe++)b[xe].sort(Se),F(xe);for(var ae=[],De=0;De<V.length;De++)ae.push(V[De]);b.unshift(ae),L();for(var Pe=0,Ie=0;Ie<b.length;Ie++)Pe=Math.max(b[Ie].length,Pe);var Ge={x:l.x1+l.w/2,y:l.x1+l.h/2},nt=b.reduce(function(He,Fe){return Math.max(He,Fe.length)},0),at=function(Fe){var qe=hn(Fe),Ye=qe.depth,We=qe.index,Ze=b[Ye].length,vt=Math.max(l.w/((e.grid?nt:Ze)+1),J),it=Math.max(l.h/(b.length+1),J),rt=Math.min(l.w/2/b.length,l.h/2/b.length);if(rt=Math.max(rt,J),e.circle){var R=rt*Ye+rt-(b.length>0&&b[0].length<=3?rt/2:0),ve=2*Math.PI/b[Ye].length*We;return Ye===0&&b[0].length===1&&(R=1),{x:Ge.x+R*Math.cos(ve),y:Ge.y+R*Math.sin(ve)}}else{var Le={x:Ge.x+(We+1-(Ze+1)/2)*vt,y:(Ye+1)*it};return Le}};return n.nodes().layoutPositions(this,e,at),this};var tv={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ns(r){this.options=tt({},tv,r)}ns.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Jt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),f,v=0,d=0;d<i.length;d++){var c=i[d],h=c.layoutDimensions(e),g=h.w,y=h.h;v=Math.max(v,g,y)}if(be(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(o.h,o.w)/2-v,i.length>1&&e.avoidOverlap){v*=1.75;var b=Math.cos(u)-Math.cos(0),w=Math.sin(u)-Math.sin(0),x=Math.sqrt(v*v/(b*b+w*w));f=Math.max(x,f)}var P=function(G,D){var F=e.startAngle+D*u*(a?1:-1),L=f*Math.cos(F),$=f*Math.sin(F),W={x:s.x+L,y:s.y+$};return W};return n.nodes().layoutPositions(this,e,P),this};var rv={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function as(r){this.options=tt({},rv,r)}as.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Jt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,f=0;f<i.length;f++){var v=i[f],d=void 0;d=e.concentric(v),l.push({value:d,node:v}),v._private.scratch.concentric=d}i.updateStyle();for(var c=0;c<i.length;c++){var h=i[c],g=h.layoutDimensions(e);u=Math.max(u,g.w,g.h)}l.sort(function(He,Fe){return Fe.value-He.value});for(var y=e.levelWidth(i),b=[[]],w=b[0],x=0;x<l.length;x++){var P=l[x];if(w.length>0){var V=Math.abs(w[0].value-P.value);V>=y&&(w=[],b.push(w))}w.push(P)}var G=u+e.minNodeSpacing;if(!e.avoidOverlap){var D=b.length>0&&b[0].length>1,F=Math.min(o.w,o.h)/2-G,L=F/(b.length+D?1:0);G=Math.min(G,L)}for(var $=0,W=0;W<b.length;W++){var O=b[W],Q=e.sweep===void 0?2*Math.PI-2*Math.PI/O.length:e.sweep,H=O.dTheta=Q/Math.max(1,O.length-1);if(O.length>1&&e.avoidOverlap){var ne=Math.cos(H)-Math.cos(0),q=Math.sin(H)-Math.sin(0),J=Math.sqrt(G*G/(ne*ne+q*q));$=Math.max(J,$)}O.r=$,$+=G}if(e.equidistant){for(var oe=0,le=0,me=0;me<b.length;me++){var ue=b[me],pe=ue.r-le;oe=Math.max(oe,pe)}le=0;for(var Te=0;Te<b.length;Te++){var ke=b[Te];Te===0&&(le=ke.r),ke.r=le,le+=oe}}for(var Se={},xe=0;xe<b.length;xe++)for(var ae=b[xe],De=ae.dTheta,Pe=ae.r,Ie=0;Ie<ae.length;Ie++){var Ge=ae[Ie],nt=e.startAngle+(t?1:-1)*De*Ie,at={x:s.x+Pe*Math.cos(nt),y:s.y+Pe*Math.sin(nt)};Se[Ge.node.id()]=at}return a.nodes().layoutPositions(this,e,function(He){var Fe=He.id();return Se[Fe]}),this};var ci,nv={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Pa(r){this.options=tt({},nv,r),this.options.layout=this}Pa.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?ci=!0:ci=!1;var n=av(e,t,r);ci&&sv(n),r.randomize&&uv(n);var a=br(),i=function(){lv(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(d){return!(t.stopped||d>=r.numIter||(fv(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),c=is(n,r,d);d.layoutPositions(t,r,c)}},l=0,u=!0;if(r.animate===!0){var f=function v(){for(var d=0;u&&d<r.refresh;)u=o(l),l++,d++;if(!u)ss(n,r),s();else{var c=br();c-a>=r.animationThreshold&&i(),jn(v)}};f()}else{for(;u;)u=o(l),l++;ss(n,r),s()}return this},Pa.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Pa.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var av=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:Jt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var f=s[u],v=0;v<f.length;v++){var d=f[v];l[d.id()]=u}for(var u=0;u<o.nodeSize;u++){var c=i[u],h=c.layoutDimensions(n),g={};g.isLocked=c.locked(),g.id=c.data("id"),g.parentId=c.data("parent"),g.cmptId=l[c.id()],g.children=[],g.positionX=c.position("x"),g.positionY=c.position("y"),g.offsetX=0,g.offsetY=0,g.height=h.w,g.width=h.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(c.style("padding")),g.padRight=parseFloat(c.style("padding")),g.padTop=parseFloat(c.style("padding")),g.padBottom=parseFloat(c.style("padding")),g.nodeRepulsion=ce(n.nodeRepulsion)?n.nodeRepulsion(c):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=u}for(var y=[],b=0,w=-1,x=[],u=0;u<o.nodeSize;u++){var c=o.layoutNodes[u],P=c.parentId;P!=null?o.layoutNodes[o.idToIndex[P]].children.push(c.id):(y[++w]=c.id,x.push(c.id))}for(o.graphSet.push(x);b<=w;){var V=y[b++],G=o.idToIndex[V],d=o.layoutNodes[G],D=d.children;if(D.length>0){o.graphSet.push(D);for(var u=0;u<D.length;u++)y[++w]=D[u]}}for(var u=0;u<o.graphSet.length;u++)for(var F=o.graphSet[u],v=0;v<F.length;v++){var L=o.idToIndex[F[v]];o.indexToGraph[L]=u}for(var u=0;u<o.edgeSize;u++){var $=a[u],W={};W.id=$.data("id"),W.sourceId=$.data("source"),W.targetId=$.data("target");var O=ce(n.idealEdgeLength)?n.idealEdgeLength($):n.idealEdgeLength,Q=ce(n.edgeElasticity)?n.edgeElasticity($):n.edgeElasticity,H=o.idToIndex[W.sourceId],ne=o.idToIndex[W.targetId],q=o.indexToGraph[H],J=o.indexToGraph[ne];if(q!=J){for(var oe=iv(W.sourceId,W.targetId,o),le=o.graphSet[oe],me=0,g=o.layoutNodes[H];le.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],me++;for(g=o.layoutNodes[ne];le.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],me++;O*=me*n.nestingFactor}W.idealLength=O,W.elasticity=Q,o.layoutEdges.push(W)}return o},iv=function(e,t,n){var a=ov(e,t,0,n);return 2>a.count?0:a.graph},ov=function r(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],f=a.layoutNodes[u].children;if(f.length!==0){var v=a.indexToGraph[a.idToIndex[f[0]]],d=r(e,t,v,a);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},sv,uv=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},is=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var u=(l.positionX-i.x1)/i.w,f=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+f*a.h}}else return{x:l.positionX,y:l.positionY}}},lv=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=is(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},fv=function(e,t,n){vv(e,t),hv(e),gv(e,t),pv(e),mv(e)},vv=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];dv(s,u,e,t)}},os=function(e){return-e+2*e*Math.random()},dv=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var s=t.positionX-e.positionX,l=t.positionY-e.positionY,u=1;s===0&&l===0&&(s=os(u),l=os(u));var f=cv(e,t,s,l);if(f>0)var v=a.nodeOverlap*f,d=Math.sqrt(s*s+l*l),c=v*s/d,h=v*l/d;else var g=Ba(e,s,l),y=Ba(t,-1*s,-1*l),b=y.x-g.x,w=y.y-g.y,x=b*b+w*w,d=Math.sqrt(x),v=(e.nodeRepulsion+t.nodeRepulsion)/x,c=v*b/d,h=v*w/d;e.isLocked||(e.offsetX-=c,e.offsetY-=h),t.isLocked||(t.offsetX+=c,t.offsetY+=h)}},cv=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Ba=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/t,u=o/s,f={};return t===0&&0<n||t===0&&0>n?(f.x=a,f.y=i+o/2,f):0<t&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=i+s*n/2/t,f):0>t&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=i-s*n/2/t,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+o*t/2/n,f.y=i+o/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-o*t/2/n,f.y=i-o/2),f)},hv=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,f=l.positionY-o.positionY;if(!(u===0&&f===0)){var v=Ba(o,u,f),d=Ba(l,-1*u,-1*f),c=d.x-v.x,h=d.y-v.y,g=Math.sqrt(c*c+h*h),y=Math.pow(a.idealLength-g,2)/a.elasticity;if(g!==0)var b=y*c/g,w=y*h/g;else var b=0,w=0;o.isLocked||(o.offsetX+=b,o.offsetY+=w),l.isLocked||(l.offsetX-=b,l.offsetY-=w)}}},gv=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[u.parentId]],s=f.positionX,l=f.positionY;for(var v=0;v<o;v++){var d=e.layoutNodes[e.idToIndex[i[v]]];if(!d.isLocked){var c=s-d.positionX,h=l-d.positionY,g=Math.sqrt(c*c+h*h);if(g>n){var y=t.gravity*c/g,b=t.gravity*h/g;d.offsetX+=y,d.offsetY+=b}}}}},pv=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,v=l.offsetY,d=0;d<u.length;d++){var c=e.layoutNodes[e.idToIndex[u[d]]];c.offsetX+=f,c.offsetY+=v,n[++i]=u[d]}l.offsetX=0,l.offsetY=0}}},mv=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=yv(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,bv(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},yv=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},bv=function r(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return r(a,t)}},ss=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var f=a[i];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var v=0;v<f.length;v++){var d=f[v];f.x1=Math.min(f.x1,d.positionX-d.width/2),f.x2=Math.max(f.x2,d.positionX+d.width/2),f.y1=Math.min(f.y1,d.positionY-d.height/2),f.y2=Math.max(f.y2,d.positionY+d.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}}a.sort(function(w,x){return x.w*x.h-w.w*w.h});for(var c=0,h=0,g=0,y=0,b=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(f){for(var v=0;v<f.length;v++){var d=f[v];d.isLocked||(d.positionX+=c-f.x1,d.positionY+=h-f.y1)}c+=f.w+t.componentSpacing,g+=f.w+t.componentSpacing,y=Math.max(y,f.h),g>b&&(h+=y+t.componentSpacing,c=0,g=0,y=0)}}},wv={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function us(r){this.options=tt({},wv,r)}us.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Jt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(Te){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),f=function(ke){if(ke==null)return Math.min(l,u);var Se=Math.min(l,u);Se==l?l=ke:u=ke},v=function(ke){if(ke==null)return Math.max(l,u);var Se=Math.max(l,u);Se==l?l=ke:u=ke},d=e.rows,c=e.cols!=null?e.cols:e.columns;if(d!=null&&c!=null)l=d,u=c;else if(d!=null&&c==null)l=d,u=Math.ceil(o/l);else if(d==null&&c!=null)u=c,l=Math.ceil(o/u);else if(u*l>o){var h=f(),g=v();(h-1)*g>=o?f(h-1):(g-1)*h>=o&&v(g-1)}else for(;u*l<o;){var y=f(),b=v();(b+1)*y>=o?v(b+1):f(y+1)}var w=i.w/u,x=i.h/l;if(e.condense&&(w=0,x=0),e.avoidOverlap)for(var P=0;P<a.length;P++){var V=a[P],G=V._private.position;(G.x==null||G.y==null)&&(G.x=0,G.y=0);var D=V.layoutDimensions(e),F=e.avoidOverlapPadding,L=D.w+F,$=D.h+F;w=Math.max(w,L),x=Math.max(x,$)}for(var W={},O=function(ke,Se){return!!W["c-"+ke+"-"+Se]},Q=function(ke,Se){W["c-"+ke+"-"+Se]=!0},H=0,ne=0,q=function(){ne++,ne>=u&&(ne=0,H++)},J={},oe=0;oe<a.length;oe++){var le=a[oe],me=e.position(le);if(me&&(me.row!==void 0||me.col!==void 0)){var ue={row:me.row,col:me.col};if(ue.col===void 0)for(ue.col=0;O(ue.row,ue.col);)ue.col++;else if(ue.row===void 0)for(ue.row=0;O(ue.row,ue.col);)ue.row++;J[le.id()]=ue,Q(ue.row,ue.col)}}var pe=function(ke,Se){var xe,ae;if(ke.locked()||ke.isParent())return!1;var De=J[ke.id()];if(De)xe=De.col*w+w/2+i.x1,ae=De.row*x+x/2+i.y1;else{for(;O(H,ne);)q();xe=ne*w+w/2+i.x1,ae=H*x+x/2+i.y1,Q(H,ne),q()}return{x:xe,y:ae}};a.layoutPositions(this,e,pe)}return this};var xv={ready:function(){},stop:function(){}};function hi(r){this.options=tt({},xv,r)}hi.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this},hi.prototype.stop=function(){return this};var Ev={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ls(r){this.options=tt({},Ev,r)}ls.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=ce(r.positions);function a(i){if(r.positions==null)return Iu(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var Cv={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fs(r){this.options=tt({},Cv,r)}fs.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Jt(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var Sv=[{name:"breadthfirst",impl:rs},{name:"circle",impl:ns},{name:"concentric",impl:as},{name:"cose",impl:Pa},{name:"grid",impl:us},{name:"null",impl:hi},{name:"preset",impl:ls},{name:"random",impl:fs}];function vs(r){this.options=r,this.notifications=0}var ds=function(){},cs=function(){throw new Error("A headless instance can not render images")};vs.prototype={recalculateRenderedStyle:ds,notify:function(){this.notifications++},init:ds,isHeadless:function(){return!0},png:cs,jpg:cs};var gi={};gi.arrowShapeWidth=.3,gi.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(u,f,v,d,c,h,g){var y=c.x-v/2-g,b=c.x+v/2+g,w=c.y-v/2-g,x=c.y+v/2+g,P=y<=u&&u<=b&&w<=f&&f<=x;return P},n=function(u,f,v,d,c){var h=u*Math.cos(d)-f*Math.sin(d),g=u*Math.sin(d)+f*Math.cos(d),y=h*v,b=g*v,w=y+c.x,x=b+c.y;return{x:w,y:x}},a=function(u,f,v,d){for(var c=[],h=0;h<u.length;h+=2){var g=u[h],y=u[h+1];c.push(n(g,y,f,v,d))}return c},i=function(u){for(var f=[],v=0;v<u.length;v++){var d=u[v];f.push(d.x,d.y)}return f},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){re(f)&&(f=r[f]),r[u]=tt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,c,h,g,y,b){var w=i(a(this.points,h+2*b,g,y)),x=jt(d,c,w);return x},roughCollide:t,draw:function(d,c,h,g){var y=a(this.points,c,h,g);e.arrowShapeImpl("polygon")(d,y)},spacing:function(d){return 0},gap:o},f)};s("none",{collide:ea,roughCollide:ea,draw:Ha,spacing:Oi,gap:Oi}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(u,f,v,d,c){var h=a(this.points,f,v,d),g=this.controlPoint,y=n(g[0],g[1],f,v,d);e.arrowShapeImpl(this.name)(u,h,y)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,v,d,c,h,g){var y=i(a(this.points,v+2*g,d,c)),b=i(a(this.pointsTee,v+2*g,d,c)),w=jt(u,f,y)||jt(u,f,b);return w},draw:function(u,f,v,d,c){var h=a(this.points,f,v,d),g=a(this.pointsTee,f,v,d);e.arrowShapeImpl(this.name)(u,h,g)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,v,d,c,h,g){var y=c,b=Math.pow(y.x-u,2)+Math.pow(y.y-f,2)<=Math.pow((v+2*g)*this.radius,2),w=i(a(this.points,v+2*g,d,c));return jt(u,f,w)||b},draw:function(u,f,v,d,c){var h=a(this.pointsTr,f,v,d);e.arrowShapeImpl(this.name)(u,h,d.x,d.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var v=this.baseCrossLinePts.slice(),d=f/u,c=3,h=5;return v[c]=v[c]-d,v[h]=v[h]-d,v},collide:function(u,f,v,d,c,h,g){var y=i(a(this.points,v+2*g,d,c)),b=i(a(this.crossLinePts(v,h),v+2*g,d,c)),w=jt(u,f,y)||jt(u,f,b);return w},draw:function(u,f,v,d,c){var h=a(this.points,f,v,d),g=a(this.crossLinePts(f,c),f,v,d);e.arrowShapeImpl(this.name)(u,h,g)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,f,v,d,c,h,g){var y=c,b=Math.pow(y.x-u,2)+Math.pow(y.y-f,2)<=Math.pow((v+2*g)*this.radius,2);return b},draw:function(u,f,v,d,c){e.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Yr={};Yr.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=t.pan(),l=t.zoom(),u=((r-a)/o-s.x)/l,f=((e-i)/o-s.y)/l;return[u,f]},Yr.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=fe.getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,l=a.left+a.right,u=a.top+a.bottom,f=i.left+i.right,v=e.width/(o+f),d=o-l,c=s-u,h=e.left+a.left+i.left,g=e.top+a.top+i.top;return this.containerBB=[h,g,d,c,v]},Yr.invalidateContainerClientCoordsCache=function(){this.containerBB=null},Yr.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]},Yr.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),f=(n?24:8)/l,v=(n?8:2)/l,d=(n?8:2)/l,c=1/0,h,g;t&&(o=o.interactive);function y(D,F){if(D.isNode()){if(g)return;g=D,s.push(D)}if(D.isEdge()&&(F==null||F<c))if(h){if(h.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var L=0;L<s.length;L++)if(s[L].isEdge()){s[L]=D,h=D,c=F??c;break}}}else s.push(D),h=D,c=F??c}function b(D){var F=D.outerWidth()+2*v,L=D.outerHeight()+2*v,$=F/2,W=L/2,O=D.position();if(O.x-$<=r&&r<=O.x+$&&O.y-W<=e&&e<=O.y+W){var Q=i.nodeShapes[a.getNodeShape(D)];if(Q.checkPoint(r,e,0,F,L,O.x,O.y))return y(D,0),!0}}function w(D){var F=D._private,L=F.rscratch,$=D.pstyle("width").pfValue,W=D.pstyle("arrow-scale").value,O=$/2+f,Q=O*O,H=O*2,oe=F.source,le=F.target,ne;if(L.edgeType==="segments"||L.edgeType==="straight"||L.edgeType==="haystack"){for(var q=L.allpts,J=0;J+3<q.length;J+=2)if(Xu(r,e,q[J],q[J+1],q[J+2],q[J+3],H)&&Q>(ne=ju(r,e,q[J],q[J+1],q[J+2],q[J+3])))return y(D,ne),!0}else if(L.edgeType==="bezier"||L.edgeType==="multibezier"||L.edgeType==="self"||L.edgeType==="compound"){for(var q=L.allpts,J=0;J+5<L.allpts.length;J+=4)if(Zu(r,e,q[J],q[J+1],q[J+2],q[J+3],q[J+4],q[J+5],H)&&Q>(ne=Ju(r,e,q[J],q[J+1],q[J+2],q[J+3],q[J+4],q[J+5])))return y(D,ne),!0}for(var oe=oe||F.source,le=le||F.target,me=a.getArrowWidth($,W),ue=[{name:"source",x:L.arrowStartX,y:L.arrowStartY,angle:L.srcArrowAngle},{name:"target",x:L.arrowEndX,y:L.arrowEndY,angle:L.tgtArrowAngle},{name:"mid-source",x:L.midX,y:L.midY,angle:L.midsrcArrowAngle},{name:"mid-target",x:L.midX,y:L.midY,angle:L.midtgtArrowAngle}],J=0;J<ue.length;J++){var pe=ue[J],Te=i.arrowShapes[D.pstyle(pe.name+"-arrow-shape").value],ke=D.pstyle("width").pfValue;if(Te.roughCollide(r,e,me,pe.angle,{x:pe.x,y:pe.y},ke,f)&&Te.collide(r,e,me,pe.angle,{x:pe.x,y:pe.y},ke,f))return y(D),!0}u&&s.length>0&&(b(oe),b(le))}function x(D,F,L){return ir(D,F,L)}function P(D,F){var L=D._private,$=d,W;F?W=F+"-":W="",D.boundingBox();var O=L.labelBounds[F||"main"],Q=D.pstyle(W+"label").value,H=D.pstyle("text-events").strValue==="yes";if(!(!H||!Q)){var ne=x(L.rscratch,"labelX",F),q=x(L.rscratch,"labelY",F),J=x(L.rscratch,"labelAngle",F),oe=D.pstyle(W+"text-margin-x").pfValue,le=D.pstyle(W+"text-margin-y").pfValue,me=O.x1-$-oe,ue=O.x2+$-oe,pe=O.y1-$-le,Te=O.y2+$-le;if(J){var ke=Math.cos(J),Se=Math.sin(J),xe=function(at,He){return at=at-ne,He=He-q,{x:at*ke-He*Se+ne,y:at*Se+He*ke+q}},ae=xe(me,pe),De=xe(me,Te),Pe=xe(ue,pe),Ie=xe(ue,Te),Ge=[ae.x+oe,ae.y+le,Pe.x+oe,Pe.y+le,Ie.x+oe,Ie.y+le,De.x+oe,De.y+le];if(jt(r,e,Ge))return y(D),!0}else if(tn(O,r,e))return y(D),!0}}for(var V=o.length-1;V>=0;V--){var G=o[V];G.isNode()?b(G)||P(G):w(G)||P(G)||P(G,"source")||P(G,"target")}return s},Yr.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(r,t),s=Math.max(r,t),l=Math.min(e,n),u=Math.max(e,n);r=o,t=s,e=l,n=u;for(var f=Jt({x1:r,y1:e,x2:t,y2:n}),v=0;v<a.length;v++){var d=a[v];if(d.isNode()){var c=d,h=c.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ua(f,h)&&!$i(h,f)&&i.push(c)}else{var g=d,y=g._private,b=y.rscratch;if(b.startX!=null&&b.startY!=null&&!tn(f,b.startX,b.startY)||b.endX!=null&&b.endY!=null&&!tn(f,b.endX,b.endY))continue;if(b.edgeType==="bezier"||b.edgeType==="multibezier"||b.edgeType==="self"||b.edgeType==="compound"||b.edgeType==="segments"||b.edgeType==="haystack"){for(var w=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,x=!0,P=0;P<w.length;P++)if(!Uu(f,w[P])){x=!1;break}x&&i.push(g)}else(b.edgeType==="haystack"||b.edgeType==="straight")&&i.push(g)}}return i};var La={};La.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,f,v,d,c,b,w;if(t?(f=e.haystackPts[0],v=e.haystackPts[1],d=e.haystackPts[2],c=e.haystackPts[3]):(f=e.arrowStartX,v=e.arrowStartY,d=e.arrowEndX,c=e.arrowEndY),b=e.midX,w=e.midY,i)l=f-e.segpts[0],u=v-e.segpts[1];else if(a||o||s||n){var h=e.allpts,g=It(h[0],h[2],h[4],.1),y=It(h[1],h[3],h[5],.1);l=f-g,u=v-y}else l=f-b,u=v-w;e.srcArrowAngle=na(l,u);var b=e.midX,w=e.midY;if(t&&(b=(f+d)/2,w=(v+c)/2),l=d-f,u=c-v,i){var h=e.allpts;if(h.length/2%2===0){var x=h.length/2,P=x-2;l=h[x]-h[P],u=h[x+1]-h[P+1]}else{var x=h.length/2-1,P=x-2,V=x+2;l=h[x]-h[P],u=h[x+1]-h[P+1]}}else if(a||o||s){var h=e.allpts,G=e.ctrlpts,D,F,L,$;if(G.length/2%2===0){var W=h.length/2-1,O=W+2,Q=O+2;D=It(h[W],h[O],h[Q],0),F=It(h[W+1],h[O+1],h[Q+1],0),L=It(h[W],h[O],h[Q],1e-4),$=It(h[W+1],h[O+1],h[Q+1],1e-4)}else{var O=h.length/2-1,W=O-2,Q=O+2;D=It(h[W],h[O],h[Q],.4999),F=It(h[W+1],h[O+1],h[Q+1],.4999),L=It(h[W],h[O],h[Q],.5),$=It(h[W+1],h[O+1],h[Q+1],.5)}l=L-D,u=$-F}if(e.midtgtArrowAngle=na(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var h=e.allpts;if(h.length/2%2!==0){var x=h.length/2-1,V=x+2;l=-(h[V]-h[x]),u=-(h[V+1]-h[x+1])}}if(e.midsrcArrowAngle=na(l,u),i)l=d-e.segpts[e.segpts.length-2],u=c-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,H=h.length,g=It(h[H-6],h[H-4],h[H-2],.9),y=It(h[H-5],h[H-3],h[H-1],.9);l=d-g,u=c-y}else l=d-b,u=c-w;e.tgtArrowAngle=na(l,u)},La.getArrowWidth=La.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Zt={};Zt.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),f=o.width(),v=s.width(),d=o.height(),c=s.height(),h=t.pstyle("haystack-radius").value,g=h/2;a.haystackPts=a.allpts=[a.source.x*f*g+l.x,a.source.y*d*g+l.y,a.target.x*v*g+u.x,a.target.y*c*g+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}},Zt.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=e.posPts,a=e.intersectionPts,i=e.vectorNormInverse,o=r.pstyle("edge-distances").value,s=r.pstyle("segment-weights"),l=r.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);t.edgeType="segments",t.segpts=[];for(var f=0;f<u;f++){var v=s.pfValue[f],d=l.pfValue[f],c=1-v,h=v,g=o==="node-position"?n:a,y={x:g.x1*c+g.x2*h,y:g.y1*c+g.y2*h};t.segpts.push(y.x+i.x*d,y.y+i.y*d)}},Zt.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=r.pstyle("loop-direction").pfValue,f=r.pstyle("loop-sweep").pfValue,v=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=t,c=v;n&&(d=0,c=l);var h=u-Math.PI/2,g=h-f/2,y=h+f/2,b=String(u+"_"+f);d=i[b]===void 0?i[b]=0:++i[b],a.ctrlpts=[o.x+Math.cos(g)*1.4*c*(d/3+1),o.y+Math.sin(g)*1.4*c*(d/3+1),o.x+Math.cos(y)*1.4*c*(d/3+1),o.y+Math.sin(y)*1.4*c*(d/3+1)]},Zt.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,v=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),c=d?d.pfValue[0]:void 0,h=t,g=v;n&&(h=0,g=c);var y=50,b={x:i.x-s/2,y:i.y-l/2},w={x:o.x-u/2,y:o.y-f/2},x={x:Math.min(b.x,w.x),y:Math.min(b.y,w.y)},P=.5,V=Math.max(P,Math.log(s*.01)),G=Math.max(P,Math.log(u*.01));a.ctrlpts=[x.x,x.y-(1+Math.pow(y,1.12)/100)*g*(h/3+1)*V,x.x-(1+Math.pow(y,1.12)/100)*g*(h/3+1)*G,x.y]},Zt.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"},Zt.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=r.pstyle("edge-distances").value,f=r.pstyle("control-point-step-size").pfValue,v=r.pstyle("control-point-distances"),d=r.pstyle("control-point-weights"),c=v&&d?Math.min(v.value.length,d.value.length):1,h=v?v.pfValue[0]:void 0,g=d.value[0],y=n;i.edgeType=y?"multibezier":"bezier",i.ctrlpts=[];for(var b=0;b<c;b++){var w=(.5-e.eles.length/2+t)*f*(a?-1:1),x=void 0,P=Hi(w);y&&(h=v?v.pfValue[b]:f,g=d.value[b]),n?x=h:x=h!==void 0?P*h:void 0;var V=x!==void 0?x:w,G=1-g,D=g,F=u==="node-position"?s:l,L={x:F.x1*G+F.x2*D,y:F.y1*G+F.y2*D};i.ctrlpts.push(L.x+o.x*V,L.y+o.y*V)}},Zt.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",f=e.posPts,v=e.srcW,d=e.srcH,c=e.tgtW,h=e.tgtH,g=r.pstyle("edge-distances").value,y=g!=="node-position",b=r.pstyle("taxi-direction").value,w=b,x=r.pstyle("taxi-turn"),P=x.units==="%",V=x.pfValue,G=V<0,D=r.pstyle("taxi-turn-min-distance").pfValue,F=y?(v+c)/2:0,L=y?(d+h)/2:0,$=f.x2-f.x1,W=f.y2-f.y1,O=function(Ue,ct){return Ue>0?Math.max(Ue-ct,0):Math.min(Ue+ct,0)},Q=O($,F),H=O(W,L),ne=!1;w===u?b=Math.abs(Q)>Math.abs(H)?a:n:w===l||w===s?(b=n,ne=!0):(w===i||w===o)&&(b=a,ne=!0);var q=b===n,J=q?H:Q,oe=q?W:$,le=Hi(oe),me=!1;!(ne&&(P||G))&&(w===s&&oe<0||w===l&&oe>0||w===i&&oe>0||w===o&&oe<0)&&(le*=-1,J=le*Math.abs(J),me=!0);var ue;if(P){var pe=V<0?1+V:V;ue=pe*J}else{var Te=V<0?J:0;ue=Te+V*le}var ke=function(Ue){return Math.abs(Ue)<D||Math.abs(Ue)>=Math.abs(J)},Se=ke(ue),xe=ke(Math.abs(J)-Math.abs(ue)),ae=Se||xe;if(ae&&!me)if(q){var De=Math.abs(oe)<=d/2,Pe=Math.abs($)<=c/2;if(De){var Ie=(f.x1+f.x2)/2,Ge=f.y1,nt=f.y2;t.segpts=[Ie,Ge,Ie,nt]}else if(Pe){var at=(f.y1+f.y2)/2,He=f.x1,Fe=f.x2;t.segpts=[He,at,Fe,at]}else t.segpts=[f.x1,f.y2]}else{var qe=Math.abs(oe)<=v/2,Ye=Math.abs(W)<=h/2;if(qe){var We=(f.y1+f.y2)/2,Ze=f.x1,vt=f.x2;t.segpts=[Ze,We,vt,We]}else if(Ye){var it=(f.x1+f.x2)/2,rt=f.y1,Le=f.y2;t.segpts=[it,rt,it,Le]}else t.segpts=[f.x2,f.y1]}else if(q){var R=f.y1+ue+(y?d/2*le:0),ve=f.x1,Be=f.x2;t.segpts=[ve,R,Be,R]}else{var Ee=f.x1+ue+(y?v/2*le:0),Ce=f.y1,ot=f.y2;t.segpts=[Ee,Ce,Ee,ot]}},Zt.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,v=!be(t.startX)||!be(t.startY),d=!be(t.arrowStartX)||!be(t.arrowStartY),c=!be(t.endX)||!be(t.endY),h=!be(t.arrowEndX)||!be(t.arrowEndY),g=3,y=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,b=g*y,w=Vr({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),x=w<b,P=Vr({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),V=P<b,G=!1;if(v||d||x){G=!0;var D={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},F=Math.sqrt(D.x*D.x+D.y*D.y),L={x:D.x/F,y:D.y/F},$=Math.max(i,o),W={x:t.ctrlpts[0]+L.x*2*$,y:t.ctrlpts[1]+L.y*2*$},O=u.intersectLine(n.x,n.y,i,o,W.x,W.y,0);x?(t.ctrlpts[0]=t.ctrlpts[0]+L.x*(b-w),t.ctrlpts[1]=t.ctrlpts[1]+L.y*(b-w)):(t.ctrlpts[0]=O[0]+L.x*b,t.ctrlpts[1]=O[1]+L.y*b)}if(c||h||V){G=!0;var Q={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},H=Math.sqrt(Q.x*Q.x+Q.y*Q.y),ne={x:Q.x/H,y:Q.y/H},q=Math.max(i,o),J={x:t.ctrlpts[0]+ne.x*2*q,y:t.ctrlpts[1]+ne.y*2*q},oe=f.intersectLine(a.x,a.y,s,l,J.x,J.y,0);V?(t.ctrlpts[0]=t.ctrlpts[0]+ne.x*(b-P),t.ctrlpts[1]=t.ctrlpts[1]+ne.y*(b-P)):(t.ctrlpts[0]=oe[0]+ne.x*b,t.ctrlpts[1]=oe[1]+ne.y*b)}G&&this.findEndpoints(r)}},Zt.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=It(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=It(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}},Zt.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||be(e.startX)&&be(e.startY)&&be(e.endX)&&be(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,yt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Zt.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i={map:new hr,get:function(D){var F=this.map.get(D[0]);return F!=null?F.get(D[1]):null},set:function(D,F){var L=this.map.get(D[0]);L==null&&(L=new hr,this.map.set(D[0],L)),L.set(D[1],F)}},o=[],s=[],l=0;l<r.length;l++){var u=r[l],f=u._private,v=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(v==="haystack"){s.push(u);continue}var d=v==="unbundled-bezier"||v==="segments"||v==="straight"||v==="straight-triangle"||v==="taxi",c=v==="unbundled-bezier"||v==="bezier",h=f.source,g=f.target,y=h.poolIndex(),b=g.poolIndex(),w=[y,b].sort(),x=i.get(w);x==null&&(x={eles:[]},i.set(w,x),o.push(w)),x.eles.push(u),d&&(x.hasUnbundled=!0),c&&(x.hasBezier=!0)}}for(var P=function(D){var F=o[D],L=i.get(F),$=void 0;if(!L.hasUnbundled){var W=L.eles[0].parallelEdges().filter(function(Le){return Le.isBundledBezier()});Wa(L.eles),W.forEach(function(Le){return L.eles.push(Le)}),L.eles.sort(function(Le,R){return Le.poolIndex()-R.poolIndex()})}var O=L.eles[0],Q=O.source(),H=O.target();if(Q.poolIndex()>H.poolIndex()){var ne=Q;Q=H,H=ne}var q=L.srcPos=Q.position(),J=L.tgtPos=H.position(),oe=L.srcW=Q.outerWidth(),le=L.srcH=Q.outerHeight(),me=L.tgtW=H.outerWidth(),ue=L.tgtH=H.outerHeight(),pe=L.srcShape=t.nodeShapes[e.getNodeShape(Q)],Te=L.tgtShape=t.nodeShapes[e.getNodeShape(H)];L.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var ke=0;ke<L.eles.length;ke++){var Se=L.eles[ke],xe=Se[0]._private.rscratch,ae=Se.pstyle("curve-style").value,De=ae==="unbundled-bezier"||ae==="segments"||ae==="taxi",Pe=!Q.same(Se.source());if(!L.calculatedIntersection&&Q!==H&&(L.hasBezier||L.hasUnbundled)){L.calculatedIntersection=!0;var Ie=pe.intersectLine(q.x,q.y,oe,le,J.x,J.y,0),Ge=L.srcIntn=Ie,nt=Te.intersectLine(J.x,J.y,me,ue,q.x,q.y,0),at=L.tgtIntn=nt,He=L.intersectionPts={x1:Ie[0],x2:nt[0],y1:Ie[1],y2:nt[1]},Fe=L.posPts={x1:q.x,x2:J.x,y1:q.y,y2:J.y},qe=nt[1]-Ie[1],Ye=nt[0]-Ie[0],We=Math.sqrt(Ye*Ye+qe*qe),Ze=L.vector={x:Ye,y:qe},vt=L.vectorNorm={x:Ze.x/We,y:Ze.y/We},it={x:-vt.y,y:vt.x};L.nodesOverlap=!be(We)||Te.checkPoint(Ie[0],Ie[1],0,me,ue,J.x,J.y)||pe.checkPoint(nt[0],nt[1],0,oe,le,q.x,q.y),L.vectorNormInverse=it,$={nodesOverlap:L.nodesOverlap,dirCounts:L.dirCounts,calculatedIntersection:!0,hasBezier:L.hasBezier,hasUnbundled:L.hasUnbundled,eles:L.eles,srcPos:J,tgtPos:q,srcW:me,srcH:ue,tgtW:oe,tgtH:le,srcIntn:at,tgtIntn:Ge,srcShape:Te,tgtShape:pe,posPts:{x1:Fe.x2,y1:Fe.y2,x2:Fe.x1,y2:Fe.y1},intersectionPts:{x1:He.x2,y1:He.y2,x2:He.x1,y2:He.y1},vector:{x:-Ze.x,y:-Ze.y},vectorNorm:{x:-vt.x,y:-vt.y},vectorNormInverse:{x:-it.x,y:-it.y}}}var rt=Pe?$:L;xe.nodesOverlap=rt.nodesOverlap,xe.srcIntn=rt.srcIntn,xe.tgtIntn=rt.tgtIntn,a&&(Q.isParent()||Q.isChild()||H.isParent()||H.isChild())&&(Q.parents().anySame(H)||H.parents().anySame(Q)||Q.same(H)&&Q.isParent())?e.findCompoundLoopPoints(Se,rt,ke,De):Q===H?e.findLoopPoints(Se,rt,ke,De):ae==="segments"?e.findSegmentsPoints(Se,rt):ae==="taxi"?e.findTaxiPoints(Se,rt):ae==="straight"||!De&&L.eles.length%2===1&&ke===Math.floor(L.eles.length/2)?e.findStraightEdgePoints(Se):e.findBezierPoints(Se,rt,ke,De,Pe),e.findEndpoints(Se),e.tryToCorrectInvalidPoints(Se,rt),e.checkForInvalidEdgeWarning(Se),e.storeAllpts(Se),e.storeEdgeProjections(Se),e.calculateArrowAngles(Se),e.recalculateEdgeLabelProjections(Se),e.calculateLabelAngles(Se)}},V=0;V<o.length;V++)P(V);this.findHaystackPoints(s)}};function hs(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Zt.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),hs(e.segpts)},Zt.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),hs(e.ctrlpts)},Zt.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Kn={};Kn.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight();if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,u[0],u[1],0)}},Kn.findEndpoints=function(r){var e=this,t,n=r.source()[0],a=r.target()[0],i=n.position(),o=a.position(),s=r.pstyle("target-arrow-shape").value,l=r.pstyle("source-arrow-shape").value,u=r.pstyle("target-distance-from-node").pfValue,f=r.pstyle("source-distance-from-node").pfValue,v=r.pstyle("curve-style").value,d=r._private.rscratch,c=d.edgeType,h=v==="taxi",g=c==="self"||c==="compound",y=c==="bezier"||c==="multibezier"||g,b=c!=="bezier",w=c==="straight"||c==="segments",x=c==="segments",P=y||b||w,V=g||h,G=r.pstyle("source-endpoint"),D=V?"outside-to-node":G.value,F=r.pstyle("target-endpoint"),L=V?"outside-to-node":F.value;d.srcManEndpt=G,d.tgtManEndpt=F;var $,W,O,Q;if(y){var H=[d.ctrlpts[0],d.ctrlpts[1]],ne=b?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:H;$=ne,W=H}else if(w){var q=x?d.segpts.slice(0,2):[o.x,o.y],J=x?d.segpts.slice(d.segpts.length-2):[i.x,i.y];$=J,W=q}if(L==="inside-to-node")t=[o.x,o.y];else if(F.units)t=this.manualEndptToPx(a,F);else if(L==="outside-to-line")t=d.tgtIntn;else if(L==="outside-to-node"||L==="outside-to-node-or-label"?O=$:(L==="outside-to-line"||L==="outside-to-line-or-label")&&(O=[i.x,i.y]),t=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),O[0],O[1],0),L==="outside-to-node-or-label"||L==="outside-to-line-or-label"){var oe=a._private.rscratch,le=oe.labelWidth,me=oe.labelHeight,ue=oe.labelX,pe=oe.labelY,Te=le/2,ke=me/2,Se=a.pstyle("text-valign").value;Se==="top"?pe-=ke:Se==="bottom"&&(pe+=ke);var xe=a.pstyle("text-halign").value;xe==="left"?ue-=Te:xe==="right"&&(ue+=Te);var ae=Ln(O[0],O[1],[ue-Te,pe-ke,ue+Te,pe-ke,ue+Te,pe+ke,ue-Te,pe+ke],o.x,o.y);if(ae.length>0){var De=i,Pe=Gr(De,_r(t)),Ie=Gr(De,_r(ae)),Ge=Pe;if(Ie<Pe&&(t=ae,Ge=Ie),ae.length>2){var nt=Gr(De,{x:ae[2],y:ae[3]});nt<Ge&&(t=[ae[2],ae[3]])}}}var at=ia(t,$,e.arrowShapes[s].spacing(r)+u),He=ia(t,$,e.arrowShapes[s].gap(r)+u);if(d.endX=He[0],d.endY=He[1],d.arrowEndX=at[0],d.arrowEndY=at[1],D==="inside-to-node")t=[i.x,i.y];else if(G.units)t=this.manualEndptToPx(n,G);else if(D==="outside-to-line")t=d.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?Q=W:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(Q=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),Q[0],Q[1],0),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var Fe=n._private.rscratch,qe=Fe.labelWidth,Ye=Fe.labelHeight,We=Fe.labelX,Ze=Fe.labelY,vt=qe/2,it=Ye/2,rt=n.pstyle("text-valign").value;rt==="top"?Ze-=it:rt==="bottom"&&(Ze+=it);var Le=n.pstyle("text-halign").value;Le==="left"?We-=vt:Le==="right"&&(We+=vt);var R=Ln(Q[0],Q[1],[We-vt,Ze-it,We+vt,Ze-it,We+vt,Ze+it,We-vt,Ze+it],i.x,i.y);if(R.length>0){var ve=o,Be=Gr(ve,_r(t)),Ee=Gr(ve,_r(R)),Ce=Be;if(Ee<Be&&(t=[R[0],R[1]],Ce=Ee),R.length>2){var ot=Gr(ve,{x:R[2],y:R[3]});ot<Ce&&(t=[R[2],R[3]])}}}var Me=ia(t,W,e.arrowShapes[l].spacing(r)+f),Ue=ia(t,W,e.arrowShapes[l].gap(r)+f);d.startX=Ue[0],d.startY=Ue[1],d.arrowStartX=Me[0],d.arrowStartY=Me[1],P&&(!be(d.startX)||!be(d.startY)||!be(d.endX)||!be(d.endY)?d.badLine=!0:d.badLine=!1)},Kn.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},Kn.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var pi={};function Tv(r,e,t){for(var n=function(u,f,v,d){return It(u,f,v,d)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}pi.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)Tv(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth},pi.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var pr={};pr.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!et(e)){var t,n,a=r._private,i=r.width(),o=r.height(),s=r.padding(),l=r.position(),u=r.pstyle("text-halign").strValue,f=r.pstyle("text-valign").strValue,v=a.rscratch,d=a.rstyle;switch(u){case"left":t=l.x-i/2-s;break;case"right":t=l.x+i/2+s;break;default:t=l.x}switch(f){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}v.labelX=t,v.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var gs=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},ps=function(e,t){var n=t.x-e.x,a=t.y-e.y;return gs(n,a)},Dv=function(e,t,n,a){var i=Pn(0,a-.001,1),o=Pn(0,a+.001,1),s=en(e,t,n,i),l=en(e,t,n,o);return ps(s,l)};pr.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(v,d,c){kr(t.rscratch,v,d,c),kr(t.rstyle,v,d,c)};o("labelX",null,e.x),o("labelY",null,e.y);var s=gs(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var v=[],d=0;d+5<n.allpts.length;d+=4){var c={x:n.allpts[d],y:n.allpts[d+1]},h={x:n.allpts[d+2],y:n.allpts[d+3]},g={x:n.allpts[d+4],y:n.allpts[d+5]};v.push({p0:c,p1:h,p2:g,startDist:0,length:0,segments:[]})}var y=t.rstyle.bezierPts,b=a.bezierProjPcts.length;function w(D,F,L,$,W){var O=Vr(F,L),Q=D.segments[D.segments.length-1],H={p0:F,p1:L,t0:$,t1:W,startDist:Q?Q.startDist+Q.length:0,length:O};D.segments.push(H),D.length+=O}for(var x=0;x<v.length;x++){var P=v[x],V=v[x-1];V&&(P.startDist=V.startDist+V.length),w(P,P.p0,y[x*b],0,a.bezierProjPcts[0]);for(var G=0;G<b-1;G++)w(P,y[x*b+G],y[x*b+G+1],a.bezierProjPcts[G],a.bezierProjPcts[G+1]);w(P,y[x*b+b-1],P.p2,a.bezierProjPcts[b-1],1)}return f.cache=v},u=function(v){var d,c=v==="source";if(i[v]){var h=r.pstyle(v+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=l(),y,b=0,w=0,x=0;x<g.length;x++){for(var P=g[c?x:g.length-1-x],V=0;V<P.segments.length;V++){var G=P.segments[c?V:P.segments.length-1-V],D=x===g.length-1&&V===P.segments.length-1;if(b=w,w+=G.length,w>=h||D){y={cp:P,segment:G};break}}if(y)break}var F=y.cp,L=y.segment,$=(h-b)/L.length,W=L.t1-L.t0,O=c?L.t0+W*$:L.t1-W*$;O=Pn(0,O,1),e=en(F.p0,F.p1,F.p2,O),d=Dv(F.p0,F.p1,F.p2,O);break}case"straight":case"segments":case"haystack":{for(var Q=0,H,ne,q,J,oe=n.allpts.length,le=0;le+3<oe&&(c?(q={x:n.allpts[le],y:n.allpts[le+1]},J={x:n.allpts[le+2],y:n.allpts[le+3]}):(q={x:n.allpts[oe-2-le],y:n.allpts[oe-1-le]},J={x:n.allpts[oe-4-le],y:n.allpts[oe-3-le]}),H=Vr(q,J),ne=Q,Q+=H,!(Q>=h));le+=2);var me=h-ne,ue=me/H;ue=Pn(0,ue,1),e=Hu(q,J,ue),d=ps(q,J);break}}o("labelX",v,e.x),o("labelY",v,e.y),o("labelAutoAngle",v,d)}};u("source"),u("target"),this.applyLabelDimensions(r)}},pr.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))},pr.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=this.calculateLabelDimensions(r,n),i=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=ir(t.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=a.height/l,f=u*i,v=a.width,d=a.height+(l-1)*(i-1)*u;kr(t.rstyle,"labelWidth",e,v),kr(t.rscratch,"labelWidth",e,v),kr(t.rstyle,"labelHeight",e,d),kr(t.rscratch,"labelHeight",e,d),kr(t.rscratch,"labelLineHeight",e,f)},pr.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(me,ue){return ue?(kr(t.rscratch,me,e,ue),ue):ir(t.rscratch,me,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="\u200B",f=a.split(`
`),v=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,c=d==="anywhere",h=[],g=/[\s\u200b]+/,y=c?"":" ",b=0;b<f.length;b++){var w=f[b],x=this.calculateLabelDimensions(r,w),P=x.width;if(c){var V=w.split("").join(u);w=V}if(P>v){for(var G=w.split(g),D="",F=0;F<G.length;F++){var L=G[F],$=D.length===0?L:D+y+L,W=this.calculateLabelDimensions(r,$),O=W.width;O<=v?D+=L+y:(D&&h.push(D),D=L+y)}D.match(/^[\s\u200b]+$/)||h.push(D)}else h.push(w)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,H="",ne="\u2026",q=!1;if(this.calculateLabelDimensions(r,a).width<Q)return a;for(var J=0;J<a.length;J++){var oe=this.calculateLabelDimensions(r,H+a[J]+ne).width;if(oe>Q)break;H+=a[J],J===a.length-1&&(q=!0)}return q||(H+=ne),H}return a},pr.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e},pr.calculateLabelDimensions=function(r,e){var t=this,n=Fr(e,r._private.labelDimsKey),a=t.labelDimCache||(t.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=r.pstyle("font-style").strValue,l=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,v=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!v){v=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=v.getContext("2d");var c=v.style;c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none"}d.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var h=0,g=0,y=e.split(`
`),b=0;b<y.length;b++){var w=y[b],x=d.measureText(w),P=Math.ceil(x.width),V=l;h=Math.max(P,h),g+=V}return h+=o,g+=o,a[n]={width:h,height:g}},pr.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue},pr.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var ms={},ys=28,bs=!1;ms.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<ys||r.height()<ys))return bs||(yt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),bs=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Ma={};Ma.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],f=u._private,v=f.rstyle;v.clean=!1,v.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var v=0;v<s.length;v++){var d=s[v];d(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)},Ma.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)},Ma.recalculateRenderedStyle=function(r,e){var t=function(P){return P._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],s=o._private,l=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],v=f._private,d=v.rstyle,c=f.position();this.recalculateNodeLabelProjection(f),d.nodeX=c.x,d.nodeY=c.y,d.nodeW=f.pstyle("width").pfValue,d.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var g=n[h],y=g._private,b=y.rstyle,w=y.rscratch;b.srcX=w.arrowStartX,b.srcY=w.arrowStartY,b.tgtX=w.arrowEndX,b.tgtY=w.arrowEndY,b.midX=w.midX,b.midY=w.midY,b.labelAngle=w.labelAngle,b.sourceLabelAngle=w.sourceLabelAngle,b.targetLabelAngle=w.targetLabelAngle}}};var Aa={};Aa.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}},Aa.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},Aa.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Wo),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var ws={};[Yr,La,Zt,Kn,pi,pr,ms,Ma,Aa].forEach(function(r){tt(ws,r)});var xs={};xs.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",l=r.substring(0,s.length).toLowerCase()===s;return l||(o.crossOrigin=e),o.src=r,o};var gn={};gn.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(r);return i.on.apply(i,a)},gn.binder=function(r){var e=this,t=r===window||r===document||r===document.body||ut(r);if(e.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var i=function(s,l,u){var f=Array.prototype.slice.call(arguments);return t&&e.supportsPassiveEvents&&(f[2]={capture:u??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:i,addEventListener:i,addListener:i,bind:i}},gn.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()},gn.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()},gn.load=function(){var r=this,e=function(R){return R.selected()},t=function(R,ve,Be,Ee){R==null&&(R=r.cy);for(var Ce=0;Ce<ve.length;Ce++){var ot=ve[Ce];R.emit({originalEvent:Be,type:ot,position:Ee})}},n=function(R){return R.shiftKey||R.metaKey||R.ctrlKey},a=function(R,ve){var Be=!0;if(r.cy.hasCompoundNodes()&&R&&R.pannable())for(var Ee=0;ve&&Ee<ve.length;Ee++){var R=ve[Ee];if(R.isNode()&&R.isParent()&&!R.pannable()){Be=!1;break}}else Be=!0;return Be},i=function(R){R[0]._private.grabbed=!0},o=function(R){R[0]._private.grabbed=!1},s=function(R){R[0]._private.rscratch.inDragLayer=!0},l=function(R){R[0]._private.rscratch.inDragLayer=!1},u=function(R){R[0]._private.rscratch.isGrabTarget=!0},f=function(R){R[0]._private.rscratch.isGrabTarget=!1},v=function(R,ve){var Be=ve.addToList,Ee=Be.has(R);!Ee&&R.grabbable()&&!R.locked()&&(Be.merge(R),i(R))},d=function(R,ve){if(R.cy().hasCompoundNodes()&&!(ve.inDragLayer==null&&ve.addToList==null)){var Be=R.descendants();ve.inDragLayer&&(Be.forEach(s),Be.connectedEdges().forEach(s)),ve.addToList&&v(Be,ve)}},c=function(R,ve){ve=ve||{};var Be=R.cy().hasCompoundNodes();ve.inDragLayer&&(R.forEach(s),R.neighborhood().stdFilter(function(Ee){return!Be||Ee.isEdge()}).forEach(s)),ve.addToList&&R.forEach(function(Ee){v(Ee,ve)}),d(R,ve),y(R,{inDragLayer:ve.inDragLayer}),r.updateCachedGrabbedEles()},h=c,g=function(R){R&&(r.getCachedZSortedEles().forEach(function(ve){o(ve),l(ve),f(ve)}),r.updateCachedGrabbedEles())},y=function(R,ve){if(!(ve.inDragLayer==null&&ve.addToList==null)&&R.cy().hasCompoundNodes()){var Be=R.ancestors().orphans();if(!Be.same(R)){var Ee=Be.descendants().spawnSelf().merge(Be).unmerge(R).unmerge(R.descendants()),Ce=Ee.connectedEdges();ve.inDragLayer&&(Ce.forEach(s),Ee.forEach(s)),ve.addToList&&Ee.forEach(function(ot){v(ot,ve)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";w?(r.removeObserver=new MutationObserver(function(Le){for(var R=0;R<Le.length;R++){var ve=Le[R],Be=ve.removedNodes;if(Be)for(var Ee=0;Ee<Be.length;Ee++){var Ce=Be[Ee];if(Ce===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(Le){r.destroy()});var P=S.default(function(){r.cy.resize()},100);w&&(r.styleObserver=new MutationObserver(P),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(window,"resize",P),x&&(r.resizeObserver=new ResizeObserver(P),r.resizeObserver.observe(r.container));var V=function(R,ve){for(;R!=null;)ve(R),R=R.parentNode},G=function(){r.invalidateContainerClientCoordsCache()};V(r.container,function(Le){r.registerBinding(Le,"transitionend",G),r.registerBinding(Le,"animationend",G),r.registerBinding(Le,"scroll",G)}),r.registerBinding(r.container,"contextmenu",function(Le){Le.preventDefault()});var D=function(){return r.selection[4]!==0},F=function(R){for(var ve=r.findContainerClientCoords(),Be=ve[0],Ee=ve[1],Ce=ve[2],ot=ve[3],Me=R.touches?R.touches:[R],Ue=!1,ct=0;ct<Me.length;ct++){var wt=Me[ct];if(Be<=wt.clientX&&wt.clientX<=Be+Ce&&Ee<=wt.clientY&&wt.clientY<=Ee+ot){Ue=!0;break}}if(!Ue)return!1;for(var lt=r.container,mt=R.target,st=mt.parentNode,ft=!1;st;){if(st===lt){ft=!0;break}st=st.parentNode}return!!ft};r.registerBinding(r.container,"mousedown",function(R){if(F(R)){R.preventDefault(),b(),r.hoverData.capture=!0,r.hoverData.which=R.which;var ve=r.cy,Be=[R.clientX,R.clientY],Ee=r.projectIntoViewport(Be[0],Be[1]),Ce=r.selection,ot=r.findNearestElements(Ee[0],Ee[1],!0,!1),Me=ot[0],Ue=r.dragData.possibleDragElements;r.hoverData.mdownPos=Ee,r.hoverData.mdownGPos=Be;var ct=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Bt=r.hoverData.down;Bt?Bt.emit({originalEvent:R,type:"taphold",position:{x:Ee[0],y:Ee[1]}}):ve.emit({originalEvent:R,type:"taphold",position:{x:Ee[0],y:Ee[1]}})}},r.tapholdDuration)};if(R.which==3){r.hoverData.cxtStarted=!0;var wt={originalEvent:R,type:"cxttapstart",position:{x:Ee[0],y:Ee[1]}};Me?(Me.activate(),Me.emit(wt),r.hoverData.down=Me):ve.emit(wt),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(R.which==1){Me&&Me.activate();{if(Me!=null&&r.nodeIsGrabbable(Me)){var lt=function(Bt){return{originalEvent:R,type:Bt,position:{x:Ee[0],y:Ee[1]}}},mt=function(Bt){Bt.emit(lt("grab"))};if(u(Me),!Me.selected())Ue=r.dragData.possibleDragElements=ve.collection(),h(Me,{addToList:Ue}),Me.emit(lt("grabon")).emit(lt("grab"));else{Ue=r.dragData.possibleDragElements=ve.collection();var st=ve.$(function(ft){return ft.isNode()&&ft.selected()&&r.nodeIsGrabbable(ft)});c(st,{addToList:Ue}),Me.emit(lt("grabon")),st.forEach(mt)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Me,r.hoverData.downs=ot,r.hoverData.downTime=new Date().getTime()}t(Me,["mousedown","tapstart","vmousedown"],R,{x:Ee[0],y:Ee[1]}),Me==null?(Ce[4]=1,r.data.bgActivePosistion={x:Ee[0],y:Ee[1]},r.redrawHint("select",!0),r.redraw()):Me.pannable()&&(Ce[4]=1),ct()}Ce[0]=Ce[2]=Ee[0],Ce[1]=Ce[3]=Ee[1]}},!1),r.registerBinding(window,"mousemove",function(R){var ve=r.hoverData.capture;if(!(!ve&&!F(R))){var Be=!1,Ee=r.cy,Ce=Ee.zoom(),ot=[R.clientX,R.clientY],Me=r.projectIntoViewport(ot[0],ot[1]),Ue=r.hoverData.mdownPos,ct=r.hoverData.mdownGPos,wt=r.selection,lt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(lt=r.findNearestElement(Me[0],Me[1],!0,!1));var mt=r.hoverData.last,st=r.hoverData.down,ft=[Me[0]-wt[2],Me[1]-wt[3]],Bt=r.dragData.possibleDragElements,Gt;if(ct){var ur=ot[0]-ct[0],lr=ur*ur,Ht=ot[1]-ct[1],ar=Ht*Ht,Qt=lr+ar;r.hoverData.isOverThresholdDrag=Gt=Qt>=r.desktopTapThreshold2}var Sr=n(R);Gt&&(r.hoverData.tapholdCancelled=!0);var zr=function(){var yr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];yr.length===0?(yr.push(ft[0]),yr.push(ft[1])):(yr[0]+=ft[0],yr[1]+=ft[1])};Be=!0,t(lt,["mousemove","vmousemove","tapdrag"],R,{x:Me[0],y:Me[1]});var wn=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||Ee.emit({originalEvent:R,type:"boxstart",position:{x:Me[0],y:Me[1]}}),wt[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Gt){var Qr={originalEvent:R,type:"cxtdrag",position:{x:Me[0],y:Me[1]}};st?st.emit(Qr):Ee.emit(Qr),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||lt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:Me[0],y:Me[1]}}),r.hoverData.cxtOver=lt,lt&&lt.emit({originalEvent:R,type:"cxtdragover",position:{x:Me[0],y:Me[1]}}))}}else if(r.hoverData.dragging){if(Be=!0,Ee.panningEnabled()&&Ee.userPanningEnabled()){var xn;if(r.hoverData.justStartedPan){var Na=r.hoverData.mdownPos;xn={x:(Me[0]-Na[0])*Ce,y:(Me[1]-Na[1])*Ce},r.hoverData.justStartedPan=!1}else xn={x:ft[0]*Ce,y:ft[1]*Ce};Ee.panBy(xn),Ee.emit("dragpan"),r.hoverData.dragged=!0}Me=r.projectIntoViewport(R.clientX,R.clientY)}else if(wt[4]==1&&(st==null||st.pannable())){if(Gt){if(!r.hoverData.dragging&&Ee.boxSelectionEnabled()&&(Sr||!Ee.panningEnabled()||!Ee.userPanningEnabled()))wn();else if(!r.hoverData.selecting&&Ee.panningEnabled()&&Ee.userPanningEnabled()){var qr=a(st,r.hoverData.downs);qr&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,wt[4]=0,r.data.bgActivePosistion=_r(Ue),r.redrawHint("select",!0),r.redraw())}st&&st.pannable()&&st.active()&&st.unactivate()}}else{if(st&&st.pannable()&&st.active()&&st.unactivate(),(!st||!st.grabbed())&&lt!=mt&&(mt&&t(mt,["mouseout","tapdragout"],R,{x:Me[0],y:Me[1]}),lt&&t(lt,["mouseover","tapdragover"],R,{x:Me[0],y:Me[1]}),r.hoverData.last=lt),st)if(Gt){if(Ee.boxSelectionEnabled()&&Sr)st&&st.grabbed()&&(g(Bt),st.emit("freeon"),Bt.emit("free"),r.dragData.didDrag&&(st.emit("dragfreeon"),Bt.emit("dragfree"))),wn();else if(st&&st.grabbed()&&r.nodeIsDraggable(st)){var _t=!r.dragData.didDrag;_t&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||c(Bt,{inDragLayer:!0});var Ut={x:0,y:0};if(be(ft[0])&&be(ft[1])&&(Ut.x+=ft[0],Ut.y+=ft[1],_t)){var er=r.hoverData.dragDelta;er&&be(er[0])&&be(er[1])&&(Ut.x+=er[0],Ut.y+=er[1])}r.hoverData.draggingEles=!0,Bt.silentShift(Ut).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else zr();Be=!0}if(wt[2]=Me[0],wt[3]=Me[1],Be)return R.stopPropagation&&R.stopPropagation(),R.preventDefault&&R.preventDefault(),!1}},!1);var L,$,W;r.registerBinding(window,"mouseup",function(R){var ve=r.hoverData.capture;if(ve){r.hoverData.capture=!1;var Be=r.cy,Ee=r.projectIntoViewport(R.clientX,R.clientY),Ce=r.selection,ot=r.findNearestElement(Ee[0],Ee[1],!0,!1),Me=r.dragData.possibleDragElements,Ue=r.hoverData.down,ct=n(R);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Ue&&Ue.unactivate(),r.hoverData.which===3){var wt={originalEvent:R,type:"cxttapend",position:{x:Ee[0],y:Ee[1]}};if(Ue?Ue.emit(wt):Be.emit(wt),!r.hoverData.cxtDragged){var lt={originalEvent:R,type:"cxttap",position:{x:Ee[0],y:Ee[1]}};Ue?Ue.emit(lt):Be.emit(lt)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(t(ot,["mouseup","tapend","vmouseup"],R,{x:Ee[0],y:Ee[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(t(Ue,["click","tap","vclick"],R,{x:Ee[0],y:Ee[1]}),$=!1,R.timeStamp-W<=Be.multiClickDebounceTime()?(L&&clearTimeout(L),$=!0,W=null,t(Ue,["dblclick","dbltap","vdblclick"],R,{x:Ee[0],y:Ee[1]})):(L=setTimeout(function(){$||t(Ue,["oneclick","onetap","voneclick"],R,{x:Ee[0],y:Ee[1]})},Be.multiClickDebounceTime()),W=R.timeStamp)),Ue==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!n(R)&&(Be.$(e).unselect(["tapunselect"]),Me.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Me=Be.collection()),ot==Ue&&!r.dragData.didDrag&&!r.hoverData.selecting&&ot!=null&&ot._private.selectable&&(r.hoverData.dragging||(Be.selectionType()==="additive"||ct?ot.selected()?ot.unselect(["tapunselect"]):ot.select(["tapselect"]):ct||(Be.$(e).unmerge(ot).unselect(["tapunselect"]),ot.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var mt=Be.collection(r.getAllInBox(Ce[0],Ce[1],Ce[2],Ce[3]));r.redrawHint("select",!0),mt.length>0&&r.redrawHint("eles",!0),Be.emit({type:"boxend",originalEvent:R,position:{x:Ee[0],y:Ee[1]}});var st=function(Gt){return Gt.selectable()&&!Gt.selected()};Be.selectionType()==="additive"||ct||Be.$(e).unmerge(mt).unselect(),mt.emit("box").stdFilter(st).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Ce[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var ft=Ue&&Ue.grabbed();g(Me),ft&&(Ue.emit("freeon"),Me.emit("free"),r.dragData.didDrag&&(Ue.emit("dragfreeon"),Me.emit("dragfree")))}}Ce[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var O=function(R){if(!r.scrollingPage){var ve=r.cy,Be=ve.zoom(),Ee=ve.pan(),Ce=r.projectIntoViewport(R.clientX,R.clientY),ot=[Ce[0]*Be+Ee.x,Ce[1]*Be+Ee.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||D()){R.preventDefault();return}if(ve.panningEnabled()&&ve.userPanningEnabled()&&ve.zoomingEnabled()&&ve.userZoomingEnabled()){R.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var Me;R.deltaY!=null?Me=R.deltaY/-250:R.wheelDeltaY!=null?Me=R.wheelDeltaY/1e3:Me=R.wheelDelta/1e3,Me=Me*r.wheelSensitivity;var Ue=R.deltaMode===1;Ue&&(Me*=33);var ct=ve.zoom()*Math.pow(10,Me);R.type==="gesturechange"&&(ct=r.gestureStartZoom*R.scale),ve.zoom({level:ct,renderedPosition:{x:ot[0],y:ot[1]}}),ve.emit(R.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",O,!0),r.registerBinding(window,"scroll",function(R){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(R){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||R.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(Le){r.hasTouchStarted||O(Le)},!0),r.registerBinding(r.container,"mouseout",function(R){var ve=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseout",position:{x:ve[0],y:ve[1]}})},!1),r.registerBinding(r.container,"mouseover",function(R){var ve=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseover",position:{x:ve[0],y:ve[1]}})},!1);var Q,H,ne,q,J,oe,le,me,ue,pe,Te,ke,Se,xe=function(R,ve,Be,Ee){return Math.sqrt((Be-R)*(Be-R)+(Ee-ve)*(Ee-ve))},ae=function(R,ve,Be,Ee){return(Be-R)*(Be-R)+(Ee-ve)*(Ee-ve)},De;r.registerBinding(r.container,"touchstart",De=function(R){if(r.hasTouchStarted=!0,!!F(R)){b(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var ve=r.cy,Be=r.touchData.now,Ee=r.touchData.earlier;if(R.touches[0]){var Ce=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);Be[0]=Ce[0],Be[1]=Ce[1]}if(R.touches[1]){var Ce=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);Be[2]=Ce[0],Be[3]=Ce[1]}if(R.touches[2]){var Ce=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);Be[4]=Ce[0],Be[5]=Ce[1]}if(R.touches[1]){r.touchData.singleTouchMoved=!0,g(r.dragData.touchDragEles);var ot=r.findContainerClientCoords();ue=ot[0],pe=ot[1],Te=ot[2],ke=ot[3],Q=R.touches[0].clientX-ue,H=R.touches[0].clientY-pe,ne=R.touches[1].clientX-ue,q=R.touches[1].clientY-pe,Se=0<=Q&&Q<=Te&&0<=ne&&ne<=Te&&0<=H&&H<=ke&&0<=q&&q<=ke;var Me=ve.pan(),Ue=ve.zoom();J=xe(Q,H,ne,q),oe=ae(Q,H,ne,q),le=[(Q+ne)/2,(H+q)/2],me=[(le[0]-Me.x)/Ue,(le[1]-Me.y)/Ue];var ct=200,wt=ct*ct;if(oe<wt&&!R.touches[2]){var lt=r.findNearestElement(Be[0],Be[1],!0,!0),mt=r.findNearestElement(Be[2],Be[3],!0,!0);lt&&lt.isNode()?(lt.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:Be[0],y:Be[1]}}),r.touchData.start=lt):mt&&mt.isNode()?(mt.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:Be[0],y:Be[1]}}),r.touchData.start=mt):ve.emit({originalEvent:R,type:"cxttapstart",position:{x:Be[0],y:Be[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(R.touches[2])ve.boxSelectionEnabled()&&R.preventDefault();else if(!R.touches[1]){if(R.touches[0]){var st=r.findNearestElements(Be[0],Be[1],!0,!0),ft=st[0];if(ft!=null&&(ft.activate(),r.touchData.start=ft,r.touchData.starts=st,r.nodeIsGrabbable(ft))){var Bt=r.dragData.touchDragEles=ve.collection(),Gt=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),ft.selected()?(Gt=ve.$(function(Qt){return Qt.selected()&&r.nodeIsGrabbable(Qt)}),c(Gt,{addToList:Bt})):h(ft,{addToList:Bt}),u(ft);var ur=function(Sr){return{originalEvent:R,type:Sr,position:{x:Be[0],y:Be[1]}}};ft.emit(ur("grabon")),Gt?Gt.forEach(function(Qt){Qt.emit(ur("grab"))}):ft.emit(ur("grab"))}t(ft,["touchstart","tapstart","vmousedown"],R,{x:Be[0],y:Be[1]}),ft==null&&(r.data.bgActivePosistion={x:Ce[0],y:Ce[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&t(r.touchData.start,["taphold"],R,{x:Be[0],y:Be[1]})},r.tapholdDuration)}}if(R.touches.length>=1){for(var lr=r.touchData.startPosition=[],Ht=0;Ht<Be.length;Ht++)lr[Ht]=Ee[Ht]=Be[Ht];var ar=R.touches[0];r.touchData.startGPosition=[ar.clientX,ar.clientY]}}},!1);var Pe;r.registerBinding(window,"touchmove",Pe=function(R){var ve=r.touchData.capture;if(!(!ve&&!F(R))){var Be=r.selection,Ee=r.cy,Ce=r.touchData.now,ot=r.touchData.earlier,Me=Ee.zoom();if(R.touches[0]){var Ue=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);Ce[0]=Ue[0],Ce[1]=Ue[1]}if(R.touches[1]){var Ue=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);Ce[2]=Ue[0],Ce[3]=Ue[1]}if(R.touches[2]){var Ue=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);Ce[4]=Ue[0],Ce[5]=Ue[1]}var ct=r.touchData.startGPosition,wt;if(ve&&R.touches[0]&&ct){for(var lt=[],mt=0;mt<Ce.length;mt++)lt[mt]=Ce[mt]-ot[mt];var st=R.touches[0].clientX-ct[0],ft=st*st,Bt=R.touches[0].clientY-ct[1],Gt=Bt*Bt,ur=ft+Gt;wt=ur>=r.touchTapThreshold2}if(ve&&r.touchData.cxt){R.preventDefault();var lr=R.touches[0].clientX-ue,Ht=R.touches[0].clientY-pe,ar=R.touches[1].clientX-ue,Qt=R.touches[1].clientY-pe,Sr=ae(lr,Ht,ar,Qt),zr=Sr/oe,wn=150,Qr=wn*wn,xn=1.5,Na=xn*xn;if(zr>=Na||Sr>=Qr){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var qr={originalEvent:R,type:"cxttapend",position:{x:Ce[0],y:Ce[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(qr),r.touchData.start=null):Ee.emit(qr)}}if(ve&&r.touchData.cxt){var qr={originalEvent:R,type:"cxtdrag",position:{x:Ce[0],y:Ce[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(qr):Ee.emit(qr),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var _t=r.findNearestElement(Ce[0],Ce[1],!0,!0);(!r.touchData.cxtOver||_t!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:Ce[0],y:Ce[1]}}),r.touchData.cxtOver=_t,_t&&_t.emit({originalEvent:R,type:"cxtdragover",position:{x:Ce[0],y:Ce[1]}}))}else if(ve&&R.touches[2]&&Ee.boxSelectionEnabled())R.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||Ee.emit({originalEvent:R,type:"boxstart",position:{x:Ce[0],y:Ce[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,Be[4]=1,!Be||Be.length===0||Be[0]===void 0?(Be[0]=(Ce[0]+Ce[2]+Ce[4])/3,Be[1]=(Ce[1]+Ce[3]+Ce[5])/3,Be[2]=(Ce[0]+Ce[2]+Ce[4])/3+1,Be[3]=(Ce[1]+Ce[3]+Ce[5])/3+1):(Be[2]=(Ce[0]+Ce[2]+Ce[4])/3,Be[3]=(Ce[1]+Ce[3]+Ce[5])/3),r.redrawHint("select",!0),r.redraw();else if(ve&&R.touches[1]&&!r.touchData.didSelect&&Ee.zoomingEnabled()&&Ee.panningEnabled()&&Ee.userZoomingEnabled()&&Ee.userPanningEnabled()){R.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Ut=r.dragData.touchDragEles;if(Ut){r.redrawHint("drag",!0);for(var er=0;er<Ut.length;er++){var za=Ut[er]._private;za.grabbed=!1,za.rscratch.inDragLayer=!1}}var yr=r.touchData.start,lr=R.touches[0].clientX-ue,Ht=R.touches[0].clientY-pe,ar=R.touches[1].clientX-ue,Qt=R.touches[1].clientY-pe,Us=xe(lr,Ht,ar,Qt),xd=Us/J;if(Se){var Ed=lr-Q,Cd=Ht-H,Sd=ar-ne,Td=Qt-q,Dd=(Ed+Sd)/2,kd=(Cd+Td)/2,Qn=Ee.zoom(),Si=Qn*xd,Fa=Ee.pan(),Xs=me[0]*Qn+Fa.x,Zs=me[1]*Qn+Fa.y,Pd={x:-Si/Qn*(Xs-Fa.x-Dd)+Xs,y:-Si/Qn*(Zs-Fa.y-kd)+Zs};if(yr&&yr.active()){var Ut=r.dragData.touchDragEles;g(Ut),r.redrawHint("drag",!0),r.redrawHint("eles",!0),yr.unactivate().emit("freeon"),Ut.emit("free"),r.dragData.didDrag&&(yr.emit("dragfreeon"),Ut.emit("dragfree"))}Ee.viewport({zoom:Si,pan:Pd,cancelOnFailedZoom:!0}),Ee.emit("pinchzoom"),J=Us,Q=lr,H=Ht,ne=ar,q=Qt,r.pinching=!0}if(R.touches[0]){var Ue=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);Ce[0]=Ue[0],Ce[1]=Ue[1]}if(R.touches[1]){var Ue=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);Ce[2]=Ue[0],Ce[3]=Ue[1]}if(R.touches[2]){var Ue=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);Ce[4]=Ue[0],Ce[5]=Ue[1]}}else if(R.touches[0]&&!r.touchData.didSelect){var fr=r.touchData.start,Ti=r.touchData.last,_t;if(!r.hoverData.draggingEles&&!r.swipePanning&&(_t=r.findNearestElement(Ce[0],Ce[1],!0,!0)),ve&&fr!=null&&R.preventDefault(),ve&&fr!=null&&r.nodeIsDraggable(fr))if(wt){var Ut=r.dragData.touchDragEles,Qs=!r.dragData.didDrag;Qs&&c(Ut,{inDragLayer:!0}),r.dragData.didDrag=!0;var qn={x:0,y:0};if(be(lt[0])&&be(lt[1])&&(qn.x+=lt[0],qn.y+=lt[1],Qs)){r.redrawHint("eles",!0);var vr=r.touchData.dragDelta;vr&&be(vr[0])&&be(vr[1])&&(qn.x+=vr[0],qn.y+=vr[1])}r.hoverData.draggingEles=!0,Ut.silentShift(qn).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==ot[0]&&r.touchData.startPosition[1]==ot[1]&&r.redrawHint("eles",!0),r.redraw()}else{var vr=r.touchData.dragDelta=r.touchData.dragDelta||[];vr.length===0?(vr.push(lt[0]),vr.push(lt[1])):(vr[0]+=lt[0],vr[1]+=lt[1])}if(t(fr||_t,["touchmove","tapdrag","vmousemove"],R,{x:Ce[0],y:Ce[1]}),(!fr||!fr.grabbed())&&_t!=Ti&&(Ti&&Ti.emit({originalEvent:R,type:"tapdragout",position:{x:Ce[0],y:Ce[1]}}),_t&&_t.emit({originalEvent:R,type:"tapdragover",position:{x:Ce[0],y:Ce[1]}})),r.touchData.last=_t,ve)for(var er=0;er<Ce.length;er++)Ce[er]&&r.touchData.startPosition[er]&&wt&&(r.touchData.singleTouchMoved=!0);if(ve&&(fr==null||fr.pannable())&&Ee.panningEnabled()&&Ee.userPanningEnabled()){var Bd=a(fr,r.touchData.starts);Bd&&(R.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=_r(r.touchData.startPosition)),r.swipePanning?(Ee.panBy({x:lt[0]*Me,y:lt[1]*Me}),Ee.emit("dragpan")):wt&&(r.swipePanning=!0,Ee.panBy({x:st*Me,y:Bt*Me}),Ee.emit("dragpan"),fr&&(fr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Ue=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);Ce[0]=Ue[0],Ce[1]=Ue[1]}}for(var mt=0;mt<Ce.length;mt++)ot[mt]=Ce[mt];ve&&R.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var Ie;r.registerBinding(window,"touchcancel",Ie=function(R){var ve=r.touchData.start;r.touchData.capture=!1,ve&&ve.unactivate()});var Ge,nt,at,He;if(r.registerBinding(window,"touchend",Ge=function(R){var ve=r.touchData.start,Be=r.touchData.capture;if(Be)R.touches.length===0&&(r.touchData.capture=!1),R.preventDefault();else return;var Ee=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Ce=r.cy,ot=Ce.zoom(),Me=r.touchData.now,Ue=r.touchData.earlier;if(R.touches[0]){var ct=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);Me[0]=ct[0],Me[1]=ct[1]}if(R.touches[1]){var ct=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);Me[2]=ct[0],Me[3]=ct[1]}if(R.touches[2]){var ct=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);Me[4]=ct[0],Me[5]=ct[1]}ve&&ve.unactivate();var wt;if(r.touchData.cxt){if(wt={originalEvent:R,type:"cxttapend",position:{x:Me[0],y:Me[1]}},ve?ve.emit(wt):Ce.emit(wt),!r.touchData.cxtDragged){var lt={originalEvent:R,type:"cxttap",position:{x:Me[0],y:Me[1]}};ve?ve.emit(lt):Ce.emit(lt)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!R.touches[2]&&Ce.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var mt=Ce.collection(r.getAllInBox(Ee[0],Ee[1],Ee[2],Ee[3]));Ee[0]=void 0,Ee[1]=void 0,Ee[2]=void 0,Ee[3]=void 0,Ee[4]=0,r.redrawHint("select",!0),Ce.emit({type:"boxend",originalEvent:R,position:{x:Me[0],y:Me[1]}});var st=function(Qr){return Qr.selectable()&&!Qr.selected()};mt.emit("box").stdFilter(st).select().emit("boxselect"),mt.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(ve?.unactivate(),R.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!R.touches[1]){if(!R.touches[0]){if(!R.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var ft=r.dragData.touchDragEles;if(ve!=null){var Bt=ve._private.grabbed;g(ft),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Bt&&(ve.emit("freeon"),ft.emit("free"),r.dragData.didDrag&&(ve.emit("dragfreeon"),ft.emit("dragfree"))),t(ve,["touchend","tapend","vmouseup","tapdragout"],R,{x:Me[0],y:Me[1]}),ve.unactivate(),r.touchData.start=null}else{var Gt=r.findNearestElement(Me[0],Me[1],!0,!0);t(Gt,["touchend","tapend","vmouseup","tapdragout"],R,{x:Me[0],y:Me[1]})}var ur=r.touchData.startPosition[0]-Me[0],lr=ur*ur,Ht=r.touchData.startPosition[1]-Me[1],ar=Ht*Ht,Qt=lr+ar,Sr=Qt*ot*ot;r.touchData.singleTouchMoved||(ve||Ce.$(":selected").unselect(["tapunselect"]),t(ve,["tap","vclick"],R,{x:Me[0],y:Me[1]}),nt=!1,R.timeStamp-He<=Ce.multiClickDebounceTime()?(at&&clearTimeout(at),nt=!0,He=null,t(ve,["dbltap","vdblclick"],R,{x:Me[0],y:Me[1]})):(at=setTimeout(function(){nt||t(ve,["onetap","voneclick"],R,{x:Me[0],y:Me[1]})},Ce.multiClickDebounceTime()),He=R.timeStamp)),ve!=null&&!r.dragData.didDrag&&ve._private.selectable&&Sr<r.touchTapThreshold2&&!r.pinching&&(Ce.selectionType()==="single"?(Ce.$(e).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"])):ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var zr=0;zr<Me.length;zr++)Ue[zr]=Me[zr];r.dragData.didDrag=!1,R.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=null,r.touchData.startGPosition=null,r.touchData.didSelect=!1),R.touches.length<2&&(R.touches.length===1&&(r.touchData.startGPosition=[R.touches[0].clientX,R.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var Fe=[],qe=function(R){return{clientX:R.clientX,clientY:R.clientY,force:1,identifier:R.pointerId,pageX:R.pageX,pageY:R.pageY,radiusX:R.width/2,radiusY:R.height/2,screenX:R.screenX,screenY:R.screenY,target:R.target}},Ye=function(R){return{event:R,touch:qe(R)}},We=function(R){Fe.push(Ye(R))},Ze=function(R){for(var ve=0;ve<Fe.length;ve++){var Be=Fe[ve];if(Be.event.pointerId===R.pointerId){Fe.splice(ve,1);return}}},vt=function(R){var ve=Fe.filter(function(Be){return Be.event.pointerId===R.pointerId})[0];ve.event=R,ve.touch=qe(R)},it=function(R){R.touches=Fe.map(function(ve){return ve.touch})},rt=function(R){return R.pointerType==="mouse"||R.pointerType===4};r.registerBinding(r.container,"pointerdown",function(Le){rt(Le)||(Le.preventDefault(),We(Le),it(Le),De(Le))}),r.registerBinding(r.container,"pointerup",function(Le){rt(Le)||(Ze(Le),it(Le),Ge(Le))}),r.registerBinding(r.container,"pointercancel",function(Le){rt(Le)||(Ze(Le),it(Le),Ie(Le))}),r.registerBinding(r.container,"pointermove",function(Le){rt(Le)||(Le.preventDefault(),vt(Le),it(Le),Pe(Le))})}};var Er={};Er.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,s){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u){return Ln(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u){return wr(n,a,this.points,l,u,o,s,[0,-1],i)}}},Er.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s){return el(i,o,e,t,n/2+s,a/2+s)},checkPoint:function(e,t,n,a,i,o,s){return Hr(e,t,a,i,o,s,n)}}},Er.generateRoundPolygon=function(r,e){for(var t=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,i=void 0;n<e.length/2-1?i=(n+1)*2:i=0,t[n*4]=e[a],t[n*4+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],l=Math.sqrt(o*o+s*s);t[n*4+2]=o/l,t[n*4+3]=s/l}return this.nodeShapes[r]={renderer:this,name:r,points:t,draw:function(f,v,d,c,h){this.renderer.nodeShapeImpl("round-polygon",f,v,d,c,h,this.points)},intersectLine:function(f,v,d,c,h,g,y){return tl(h,g,this.points,f,v,d,c)},checkPoint:function(f,v,d,c,h,g,y){return _u(f,v,this.points,g,y,c,h)}}},Er.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Xt(4,0),draw:function(e,t,n,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s){return Ki(i,o,e,t,n,a,s)},checkPoint:function(e,t,n,a,i,o,s){var l=Mn(a,i),u=l*2;return!!(wr(e,t,this.points,o,s,a,i-u,[0,-1],n)||wr(e,t,this.points,o,s,a-u,i,[0,-1],n)||Hr(e,t,u,u,o-a/2+l,s-i/2+l,n)||Hr(e,t,u,u,o+a/2-l,s-i/2+l,n)||Hr(e,t,u,u,o+a/2-l,s+i/2-l,n)||Hr(e,t,u,u,o-a/2+l,s+i/2-l,n))}}},Er.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Zi(),points:Xt(4,0),draw:function(e,t,n,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},generateCutTrianglePts:function(e,t,n,a){var i=this.cornerLength,o=t/2,s=e/2,l=n-s,u=n+s,f=a-o,v=a+o;return{topLeft:[l,f+i,l+i,f,l+i,f+i],topRight:[u-i,f,u,f+i,u-i,f+i],bottomRight:[u,v-i,u-i,v,u-i,v-i],bottomLeft:[l+i,v,l,v-i,l+i,v-i]}},intersectLine:function(e,t,n,a,i,o,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,t),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Ln(i,o,u,e,t)},checkPoint:function(e,t,n,a,i,o,s){if(wr(e,t,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n)||wr(e,t,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(a,i,o,s);return jt(e,t,l.topLeft)||jt(e,t,l.topRight)||jt(e,t,l.bottomRight)||jt(e,t,l.bottomLeft)}}},Er.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Xt(4,0),draw:function(e,t,n,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s){var l=.15,u=.5,f=.85,v=this.generateBarrelBezierPts(n+2*s,a+2*s,e,t),d=function(g){var y=en({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),b=en({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},u),w=en({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],y.x,y.y,b.x,b.y,w.x,w.y,g[4],g[5]]},c=[].concat(d(v.topLeft),d(v.topRight),d(v.bottomRight),d(v.bottomLeft));return Ln(i,o,c,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,s=n-o,l=n+o,u=a-i,f=a+i,v=qa(e,t),d=v.heightOffset,c=v.widthOffset,h=v.ctrlPtOffsetPct*e,g={topLeft:[s,u+d,s+h,u,s+c,u],topRight:[l-c,u,l-h,u,l,u+d],bottomRight:[l,f-d,l-h,f,l-c,f],bottomLeft:[s+c,f,s+h,f,s,f-d]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,t,n,a,i,o,s){var l=qa(a,i),u=l.heightOffset,f=l.widthOffset;if(wr(e,t,this.points,o,s,a,i-2*u,[0,-1],n)||wr(e,t,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var v=this.generateBarrelBezierPts(a,i,o,s),d=function(D,F,L){var $=L[4],W=L[2],O=L[0],Q=L[5],H=L[1],ne=Math.min($,O),q=Math.max($,O),J=Math.min(Q,H),oe=Math.max(Q,H);if(ne<=D&&D<=q&&J<=F&&F<=oe){var le=rl($,W,O),me=Qu(le[0],le[1],le[2],D),ue=me.filter(function(pe){return 0<=pe&&pe<=1});if(ue.length>0)return ue[0]}return null},c=Object.keys(v),h=0;h<c.length;h++){var g=c[h],y=v[g],b=d(e,t,y);if(b!=null){var w=y[5],x=y[3],P=y[1],V=It(w,x,P,b);if(y.isTop&&V<=t||y.isBottom&&t<=V)return!0}}return!1}}},Er.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Xt(4,0),draw:function(e,t,n,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s){var l=e-(n/2+s),u=t-(a/2+s),f=u,v=e+(n/2+s),d=Pr(i,o,e,t,l,u,v,f,!1);return d.length>0?d:Ki(i,o,e,t,n,a,s)},checkPoint:function(e,t,n,a,i,o,s){var l=Mn(a,i),u=2*l;if(wr(e,t,this.points,o,s,a,i-u,[0,-1],n)||wr(e,t,this.points,o,s,a-u,i,[0,-1],n))return!0;var f=a/2+2*n,v=i/2+2*n,d=[o-f,s-v,o-f,s,o+f,s,o+f,s-v];return!!(jt(e,t,d)||Hr(e,t,u,u,o+a/2-l,s+i/2-l,n)||Hr(e,t,u,u,o-a/2+l,s+i/2-l,n))}}},Er.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Xt(3,0)),this.generateRoundPolygon("round-triangle",Xt(3,0)),this.generatePolygon("rectangle",Xt(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Xt(5,0)),this.generateRoundPolygon("round-pentagon",Xt(5,0)),this.generatePolygon("hexagon",Xt(6,0)),this.generateRoundPolygon("round-hexagon",Xt(6,0)),this.generatePolygon("heptagon",Xt(7,0)),this.generateRoundPolygon("round-heptagon",Xt(7,0)),this.generatePolygon("octagon",Xt(8,0)),this.generateRoundPolygon("round-octagon",Xt(8,0));var n=new Array(20);{var a=Za(5,0),i=Za(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=Xi(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}r.makePolygon=function(u){var f=u.join("$"),v="polygon-"+f,d;return(d=this[v])?d:e.generatePolygon(v,u)}};var Yn={};Yn.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},Yn.redraw=function(r){r=r||Fi();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r},Yn.beforeRender=function(r,e){if(!this.destroyed){e==null&&kt("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var Es=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Yn.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){Es(r,!0,a);var i=br();r.render(r.renderOptions);var o=r.lastDrawTime=br();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-i;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else Es(r,!1,a);r.skipFrame=!1,jn(n)}};jn(t)}};var kv=function(e){this.init(e)},Cs=kv,pn=Cs.prototype;pn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],pn.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container();if(fe){var n=fe.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",s=n.getElementById(i)!=null;if(t.className.indexOf(o)<0&&(t.className=(t.className||"")+" "+o),!s){var l=n.createElement("style");l.id=i,l.innerHTML="."+o+" { position: relative; }",a.insertBefore(l,a.children[0])}var u=fe.getComputedStyle(t),f=u.getPropertyValue("position");f==="static"&&yt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=be(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},pn.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},pn.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}},pn.isHeadless=function(){return!1},[gi,ws,xs,gn,Er,Yn].forEach(function(r){tt(pn,r)});var mi=1e3/60,Ss={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=S.default(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,f){var v=br(),d=a.averageRedrawTime,c=a.lastRedrawTime,h=[],g=a.cy.extent(),y=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var b=br(),w=b-v,x=b-f;if(c<mi){var P=mi-(u?d:0);if(x>=e.deqFastCost*P)break}else if(u){if(w>=e.deqCost*c||w>=e.deqAvgCost*d)break}else if(x>=e.deqNoDrawCost*mi)break;var V=e.deq(n,y,g);if(V.length>0)for(var G=0;G<V.length;G++)h.push(V[G]);else break}h.length>0&&(e.onDeqd(n,h),!u&&e.shouldRedraw(n,h,y,g)&&i())},s=e.priority||Ha;a.beforeRender(o,s(n))}}}},Pv=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ea;_(this,r),this.idsByKey=new hr,this.keyForId=new hr,this.cachesByLvl=new hr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return te(r,[{key:"getIdsFor",value:function(t){t==null&&kt("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new jr,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new hr,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),r}(),Ts=25,Ra=50,Ia=-4,yi=3,Bv=7.99,Lv=8,Mv=1024,Av=1024,Rv=1024,Iv=.2,Ov=.8,Nv=10,zv=.15,Fv=.1,Vv=.9,Gv=.9,Hv=100,Wv=1,mn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},$v=Ot({getKey:null,doesEleInvalidateKey:ea,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ii,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Un=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=$v(t);tt(n,a),n.lookup=new Pv(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Mt=Un.prototype;Mt.reasons=mn,Mt.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]},Mt.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n},Mt.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new k.default(function(t,n){return n.reqs-t.reqs});return e},Mt.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e},Mt.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Ka(s*t))),n<Ia)n=Ia;else if(s>=Bv||n>yi)return null;var u=Math.pow(2,n),f=e.h*u,v=e.w*u,d=o.eleTextBiggerThanMin(r,u);if(!this.isVisible(r,d))return null;var c=l.get(r,n);if(c&&c.invalidated&&(c.invalidated=!1,c.texture.invalidatedWidth-=c.width),c)return c;var h;if(f<=Ts?h=Ts:f<=Ra?h=Ra:h=Math.ceil(f/Ra)*Ra,f>Rv||v>Av)return null;var g=i.getTextureQueue(h),y=g[g.length-2],b=function(){return i.recycleTexture(h,v)||i.addTexture(h,v)};y||(y=g[g.length-1]),y||(y=b()),y.width-y.usedWidth<v&&(y=b());for(var w=function(q){return q&&q.scaledLabelShown===d},x=a&&a===mn.dequeue,P=a&&a===mn.highQuality,V=a&&a===mn.downscale,G,D=n+1;D<=yi;D++){var F=l.get(r,D);if(F){G=F;break}}var L=G&&G.level===n+1?G:null,$=function(){y.context.drawImage(L.texture.canvas,L.x,0,L.width,L.height,y.usedWidth,0,v,f)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,v,h),w(L))$();else if(w(G))if(P){for(var W=G.level;W>n;W--)L=i.getElement(r,e,t,W,mn.downscale);$()}else return i.queueElement(r,G.level-1),G;else{var O;if(!x&&!P&&!V)for(var Q=n-1;Q>=Ia;Q--){var H=l.get(r,Q);if(H){O=H;break}}if(w(O))return i.queueElement(r,n),O;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,r,e,d,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return c={x:y.usedWidth,texture:y,level:n,scale:u,width:v,height:f,scaledLabelShown:d},y.usedWidth+=Math.ceil(v+Lv),y.eleCaches.push(c),l.set(r,n,c),i.checkTextureFullness(y),c},Mt.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])},Mt.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=Ia;i<=yi;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(r)}},Mt.checkTextureUtility=function(r){r.invalidatedWidth>=Iv*r.width&&this.retireTexture(r)},Mt.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>Ov&&r.fullnessChecks>=Nv?Dr(t,r):r.fullnessChecks++},Mt.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;Dr(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Wa(i);var l=e.getRetiredTextureQueue(t);l.push(r)},Mt.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(Mv,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a},Mt.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Wa(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Dr(a,o),n.push(o),o}},Mt.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(s),a[i]=s}},Mt.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<Wv&&t.size()>0;o++){var s=t.pop(),l=s.key,u=s.eles[0],f=i.hasCache(u,s.level);if(n[l]=null,f)continue;a.push(s);var v=e.getBoundingBox(u);e.getElement(u,v,r,s.level,mn.dequeue)}return a},Mt.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Ga,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))},Mt.onDequeue=function(r){this.onDequeues.push(r)},Mt.offDequeue=function(r){Dr(this.onDequeues,r)},Mt.setupDequeueing=Ss.setupDequeueing({deqRedrawThreshold:Hv,deqCost:zv,deqAvgCost:Fv,deqNoDrawCost:Vv,deqFastCost:Gv,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(Ua(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Kv=1,Xn=-4,Oa=2,Yv=3.99,Uv=50,Xv=50,Zv=.15,Qv=.1,qv=.9,Jv=.9,jv=1,Ds=250,_v=4e3*4e3,ed=!0,ks=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=br()-2*Ds,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=S.default(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},Xv),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=Ds?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};t.layersQueue=new k.default(i),t.setupDequeueing()},Vt=ks.prototype,Ps=0,td=Math.pow(2,53)-1;Vt.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:Ps=++Ps%td,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(t,t),s.translate(l,u),o},Vt.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Ka(o*e)),t<Xn)t=Xn;else if(o>=Yv||t>Oa)return null}n.validateLayersElesOrdering(t,r);var l=n.layersByLevel,u=Math.pow(2,t),f=l[t]=l[t]||[],v,d=n.levelIsComplete(t,r),c,h=function(){var $=function(ne){if(n.validateLayersElesOrdering(ne,r),n.levelIsComplete(ne,r))return c=l[ne],!0},W=function(ne){if(!c)for(var q=t+ne;Xn<=q&&q<=Oa&&!$(q);q+=ne);};W(1),W(-1);for(var O=f.length-1;O>=0;O--){var Q=f[O];Q.invalid&&Dr(f,Q)}};if(!d)h();else return f;var g=function(){if(!v){v=Jt();for(var $=0;$<r.length;$++)Ku(v,r[$].boundingBox())}return v},y=function($){$=$||{};var W=$.after;g();var O=v.w*u*(v.h*u);if(O>_v)return null;var Q=n.makeLayer(v,t);if(W!=null){var H=f.indexOf(W)+1;f.splice(H,0,Q)}else($.insert===void 0||$.insert)&&f.unshift(Q);return Q};if(n.skipping&&!s)return null;for(var b=null,w=r.length/Kv,x=!s,P=0;P<r.length;P++){var V=r[P],G=V._private.rscratch,D=G.imgLayerCaches=G.imgLayerCaches||{},F=D[t];if(F){b=F;continue}if((!b||b.eles.length>=w||!$i(b.bb,V.boundingBox()))&&(b=y({insert:!0,after:b}),!b))return null;c||x?n.queueLayer(b,V):n.drawEleInLayer(b,V,t,e),b.eles.push(V),D[t]=b}return c||(x?null:f)},Vt.getEleLevelForLayerLevel=function(r,e){return r},Vt.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,ed),i.setImgSmoothing(o,!0))},Vt.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length},Vt.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}},Vt.updateElementsInLayers=function(r,e){for(var t=this,n=Tt(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=Xn;u<=Oa;u++){var f=l[u];f&&(i&&t.getEleLevelForLayerLevel(f.level)!==i.level||e(f,o,i))}},Vt.haveLayers=function(){for(var r=this,e=!1,t=Xn;t<=Oa;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},Vt.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=br(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))},Vt.invalidateLayer=function(r){if(this.lastInvalidationTime=br(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Dr(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},Vt.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})},Vt.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()},Vt.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}},Vt.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<jv&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n},Vt.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}},Vt.requestRedraw=S.default(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100),Vt.setupDequeueing=Ss.setupDequeueing({deqRedrawThreshold:Uv,deqCost:Zv,deqAvgCost:Qv,deqNoDrawCost:qv,deqFastCost:Jv,deq:function(e,t){return e.dequeue(t)},onDeqd:Ha,shouldRedraw:Ii,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Bs={},Ls;function rd(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function nd(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Ms(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function ad(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];r.lineTo(l.x,l.y)}r.closePath&&r.closePath()}function id(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}Bs.arrowShapeImpl=function(r){return(Ls||(Ls={polygon:rd,"triangle-backcurve":nd,"triangle-tee":Ms,"circle-triangle":ad,"triangle-cross":Ms,circle:id}))[r]};var mr={};mr.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)},mr.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)},mr.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)},mr.drawCachedElementPortion=function(r,e,t,n,a,i,o,s){var l=this,u=t.getBoundingBox(e);if(!(u.w===0||u.h===0)){var f=t.getElement(e,u,n,a,i);if(f!=null){var v=s(l,e);if(v===0)return;var d=o(l,e),c=u.x1,h=u.y1,g=u.w,y=u.h,b,w,x,P,V;if(d!==0){var G=t.getRotationPoint(e);x=G.x,P=G.y,r.translate(x,P),r.rotate(d),V=l.getImgSmoothing(r),V||l.setImgSmoothing(r,!0);var D=t.getRotationOffset(e);b=D.x,w=D.y}else b=c,w=h;var F;v!==1&&(F=r.globalAlpha,r.globalAlpha=F*v),r.drawImage(f.texture.canvas,f.x,0,f.width,f.height,b,w,g,y),v!==1&&(r.globalAlpha=F),d!==0&&(r.rotate(-d),r.translate(-x,-P),V||l.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var od=function(){return 0},sd=function(e,t){return e.getTextAngle(t,null)},ud=function(e,t){return e.getTextAngle(t,"source")},ld=function(e,t){return e.getTextAngle(t,"target")},fd=function(e,t){return t.effectiveOpacity()},bi=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};mr.drawCachedElement=function(r,e,t,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,v=s.tlbTxrCache,d=e.boundingBox(),c=i===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Ua(d,n))){var h=e.isEdge(),g=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,l,t,a,c,od,fd),(!h||!g)&&o.drawCachedElementPortion(r,e,u,t,a,c,sd,bi),h&&!g&&(o.drawCachedElementPortion(r,e,f,t,a,c,ud,bi),o.drawCachedElementPortion(r,e,v,t,a,c,ld,bi)),o.drawElementOverlay(r,e)}},mr.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}},mr.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}},mr.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(r,o,t,n)}},mr.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||r.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(r,e,t,n)};var Cr={};Cr.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;t&&(l=t,r.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,v=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,c=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,g=u*f,y=u*f,b=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;v==="straight-triangle"?(o.eleStrokeStyle(r,e,O),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=c,r.lineCap=h,o.eleStrokeStyle(r,e,O),o.drawEdgePath(e,r,s.allpts,d),r.lineCap="butt")},w=function(){a&&o.drawEdgeOverlay(r,e)},x=function(){a&&o.drawEdgeUnderlay(r,e)},P=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;o.drawArrowheads(r,e,O)},V=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var G=e.pstyle("ghost").value==="yes";if(G){var D=e.pstyle("ghost-offset-x").pfValue,F=e.pstyle("ghost-offset-y").pfValue,L=e.pstyle("ghost-opacity").value,$=g*L;r.translate(D,F),b($),P($),r.translate(-D,-F)}x(),b(),P(),w(),V(),t&&r.translate(l.x1,l.y1)}};var As=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,f=n.pstyle("".concat(e,"-color")).value;t.lineWidth=u,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,f[0],f[1],f[2],a),i.drawEdgePath(n,t,s.allpts,"solid")}}}};Cr.drawEdgeOverlay=As("overlay"),Cr.drawEdgeUnderlay=As("underlay"),Cr.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=r.pstyle("line-dash-pattern").pfValue,f=r.pstyle("line-dash-offset").pfValue;if(l){var v=t.join("$"),d=a.pathCacheKey&&a.pathCacheKey===v;d?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=v,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var c=2;c+3<t.length;c+=4)e.quadraticCurveTo(t[c],t[c+1],t[c+2],t[c+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<t.length;h+=2)e.lineTo(t[h],t[h+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])},Cr.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[a]-l[0],t[a+1]-l[1]),e.lineTo(t[a]+l[0],t[a+1]+l[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}},Cr.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)},Cr.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(t+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(t+"-arrow-fill").value,v=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;o===void 0&&(o=d);var c=r.globalCompositeOperation;(o!==1||f==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,u,v,l,n,a,i),r.globalCompositeOperation=c);var h=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,h[0],h[1],h[2],o),s.colorStrokeStyle(r,h[0],h[1],h[2],o),s.drawArrowShape(e,r,f,v,l,n,a,i)}}},Cr.drawArrowShape=function(r,e,t,n,a,i,o,s){var l=this,u=this.usePaths()&&a!=="triangle-cross",f=!1,v,d=e,c={x:i,y:o},h=r.pstyle("arrow-scale").value,g=this.getArrowWidth(n,h),y=l.arrowShapes[a];if(u){var b=l.arrowPathCache=l.arrowPathCache||[],w=Fr(a),x=b[w];x!=null?(v=e=x,f=!0):(v=e=new Path2D,b[w]=v)}f||(e.beginPath&&e.beginPath(),u?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,s,c,n),e.closePath&&e.closePath()),e=d,u&&(e.translate(i,o),e.rotate(s),e.scale(g,g)),(t==="filled"||t==="both")&&(u?e.fill(v):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=(y.matchEdgeWidth?n:1)/(u?g:1),e.lineJoin="miter",u?e.stroke(v):e.stroke()),u&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-i,-o))};var wi={};wi.safeDrawImage=function(r,e,t,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{r.drawImage(e,t,n,a,i,o,s,l,u)}catch(f){yt(f)}},wi.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),s=o.x,l=o.y,u=t.cy().style(),f=u.getIndexedStyle.bind(u),v=f(t,"background-fit","value",n),d=f(t,"background-repeat","value",n),c=t.width(),h=t.height(),g=t.padding()*2,y=c+(f(t,"background-width-relative-to","value",n)==="inner"?0:g),b=h+(f(t,"background-height-relative-to","value",n)==="inner"?0:g),w=t._private.rscratch,x=f(t,"background-clip","value",n),P=x==="node",V=f(t,"background-image-opacity","value",n)*a,G=f(t,"background-image-smoothing","value",n),D=e.width||e.cachedW,F=e.height||e.cachedH;(D==null||F==null)&&(document.body.appendChild(e),D=e.cachedW=e.width||e.offsetWidth,F=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var L=D,$=F;if(f(t,"background-width","value",n)!=="auto"&&(f(t,"background-width","units",n)==="%"?L=f(t,"background-width","pfValue",n)*y:L=f(t,"background-width","pfValue",n)),f(t,"background-height","value",n)!=="auto"&&(f(t,"background-height","units",n)==="%"?$=f(t,"background-height","pfValue",n)*b:$=f(t,"background-height","pfValue",n)),!(L===0||$===0)){if(v==="contain"){var W=Math.min(y/L,b/$);L*=W,$*=W}else if(v==="cover"){var W=Math.max(y/L,b/$);L*=W,$*=W}var O=s-y/2,Q=f(t,"background-position-x","units",n),H=f(t,"background-position-x","pfValue",n);Q==="%"?O+=(y-L)*H:O+=H;var ne=f(t,"background-offset-x","units",n),q=f(t,"background-offset-x","pfValue",n);ne==="%"?O+=(y-L)*q:O+=q;var J=l-b/2,oe=f(t,"background-position-y","units",n),le=f(t,"background-position-y","pfValue",n);oe==="%"?J+=(b-$)*le:J+=le;var me=f(t,"background-offset-y","units",n),ue=f(t,"background-offset-y","pfValue",n);me==="%"?J+=(b-$)*ue:J+=ue,w.pathCache&&(O-=s,J-=l,s=0,l=0);var pe=r.globalAlpha;r.globalAlpha=V;var Te=i.getImgSmoothing(r),ke=!1;if(G==="no"&&Te?(i.setImgSmoothing(r,!1),ke=!0):G==="yes"&&!Te&&(i.setImgSmoothing(r,!0),ke=!0),d==="no-repeat")P&&(r.save(),w.pathCache?r.clip(w.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,y,b),r.clip())),i.safeDrawImage(r,e,0,0,D,F,O,J,L,$),P&&r.restore();else{var Se=r.createPattern(e,d);r.fillStyle=Se,i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,y,b),r.translate(O,J),r.fill(),r.translate(-O,-J)}r.globalAlpha=pe,ke&&i.setImgSmoothing(r,Te)}};var Ur={};Ur.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Ka(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)},Ur.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);r.textAlign=l,r.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),v=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!f||!f.value)&&(!v||!v.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var c=!t,h;t&&(h=t,r.translate(-h.x1,-h.y1)),a==null?(o.drawText(r,e,null,c,i),e.isEdge()&&(o.drawText(r,e,"source",c,i),o.drawText(r,e,"target",c,i))):o.drawText(r,e,a,c,i),t&&r.translate(h.x1,h.y1)},Ur.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e},Ur.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,u[0],u[1],u[2],s),this.colorStrokeStyle(r,f[0],f[1],f[2],l)};function vd(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;r.beginPath(),r.moveTo(e+i,t),r.lineTo(e+n-i,t),r.quadraticCurveTo(e+n,t,e+n,t+i),r.lineTo(e+n,t+a-i),r.quadraticCurveTo(e+n,t+a,e+n-i,t+a),r.lineTo(e+i,t+a),r.quadraticCurveTo(e,t+a,e,t+a-i),r.lineTo(e,t+i),r.quadraticCurveTo(e,t,e+i,t),r.closePath(),r.fill()}Ur.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=ir(a,"labelAngle",e);return o.strValue==="autorotate"?t=r.isEdge()?s:0:o.strValue==="none"?t=0:t=o.pfValue,t},Ur.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var l=ir(o,"labelX",t),u=ir(o,"labelY",t),f,v,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(r,e,a);var c=t?t+"-":"",h=ir(o,"labelWidth",t),g=ir(o,"labelHeight",t),y=e.pstyle(c+"text-margin-x").pfValue,b=e.pstyle(c+"text-margin-y").pfValue,w=e.isEdge(),x=e.pstyle("text-halign").value,P=e.pstyle("text-valign").value;w&&(x="center",P="center"),l+=y,u+=b;var V;switch(n?V=this.getTextAngle(e,t):V=0,V!==0&&(f=l,v=u,r.translate(f,v),r.rotate(V),l=0,u=0),P){case"top":break;case"center":u+=g/2;break;case"bottom":u+=g;break}var G=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,F=e.pstyle("text-border-width").pfValue,L=e.pstyle("text-background-padding").pfValue;if(G>0||F>0&&D>0){var $=l-L;switch(x){case"left":$-=h;break;case"center":$-=h/2;break}var W=u-g-L,O=h+2*L,Q=g+2*L;if(G>0){var H=r.fillStyle,ne=e.pstyle("text-background-color").value;r.fillStyle="rgba("+ne[0]+","+ne[1]+","+ne[2]+","+G*s+")";var q=e.pstyle("text-background-shape").strValue;q.indexOf("round")===0?vd(r,$,W,O,Q,2):r.fillRect($,W,O,Q),r.fillStyle=H}if(F>0&&D>0){var J=r.strokeStyle,oe=r.lineWidth,le=e.pstyle("text-border-color").value,me=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+le[0]+","+le[1]+","+le[2]+","+D*s+")",r.lineWidth=F,r.setLineDash)switch(me){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=F/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(r.strokeRect($,W,O,Q),me==="double"){var ue=F/2;r.strokeRect($+ue,W+ue,O-ue*2,Q-ue*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=oe,r.strokeStyle=J}}var pe=2*e.pstyle("text-outline-width").pfValue;if(pe>0&&(r.lineWidth=pe),e.pstyle("text-wrap").value==="wrap"){var Te=ir(o,"labelWrapCachedLines",t),ke=ir(o,"labelLineHeight",t),Se=h/2,xe=this.getLabelJustification(e);switch(xe==="auto"||(x==="left"?xe==="left"?l+=-h:xe==="center"&&(l+=-Se):x==="center"?xe==="left"?l+=-Se:xe==="right"&&(l+=Se):x==="right"&&(xe==="center"?l+=Se:xe==="right"&&(l+=h))),P){case"top":u-=(Te.length-1)*ke;break;case"center":case"bottom":u-=(Te.length-1)*ke;break}for(var ae=0;ae<Te.length;ae++)pe>0&&r.strokeText(Te[ae],l,u),r.fillText(Te[ae],l,u),u+=ke}else pe>0&&r.strokeText(d,l,u),r.fillText(d,l,u);V!==0&&(r.rotate(-V),r.translate(-f,-v))}}};var yn={};yn.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,f=u.rscratch,v=e.position();if(!(!be(v.x)||!be(v.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,c=o.usePaths(),h,g=!1,y=e.padding();s=e.width()+2*y,l=e.height()+2*y;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var w=e.pstyle("background-image"),x=w.value,P=new Array(x.length),V=new Array(x.length),G=0,D=0;D<x.length;D++){var F=x[D],L=P[D]=F!=null&&F!=="none";if(L){var $=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);G++,V[D]=o.getCachedImage(F,$,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var W=e.pstyle("background-blacken").value,O=e.pstyle("border-width").pfValue,Q=e.pstyle("background-opacity").value*d,H=e.pstyle("border-color").value,ne=e.pstyle("border-style").value,q=e.pstyle("border-opacity").value*d;r.lineJoin="miter";var J=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q;o.eleFillStyle(r,e,We)},oe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;o.colorStrokeStyle(r,H[0],H[1],H[2],We)},le=e.pstyle("shape").strValue,me=e.pstyle("shape-polygon-points").pfValue;if(c){r.translate(v.x,v.y);var ue=o.nodePathCache=o.nodePathCache||[],pe=Ai(le==="polygon"?le+","+me.join(","):le,""+l,""+s),Te=ue[pe];Te!=null?(h=Te,g=!0,f.pathCache=h):(h=new Path2D,ue[pe]=f.pathCache=h)}var ke=function(){if(!g){var We=v;c&&(We={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||r,We.x,We.y,s,l)}c?r.fill(h):r.fill()},Se=function(){for(var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,vt=u.backgrounding,it=0,rt=0;rt<V.length;rt++){var Le=e.cy().style().getIndexedStyle(e,"background-image-containment","value",rt);if(Ze&&Le==="over"||!Ze&&Le==="inside"){it++;continue}P[rt]&&V[rt].complete&&!V[rt].error&&(it++,o.drawInscribedImage(r,V[rt],e,rt,We))}u.backgrounding=it!==G,vt!==u.backgrounding&&e.updateStyle(!1)},xe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(r,e,Ze),We&&(c||o.nodeShapes[o.getNodeShape(e)].draw(r,v.x,v.y,s,l)))},ae=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Ze=(W>0?W:-W)*We,vt=W>0?0:255;W!==0&&(o.colorFillStyle(r,vt,vt,vt,Ze),c?r.fill(h):r.fill())},De=function(){if(O>0){if(r.lineWidth=O,r.lineCap="butt",r.setLineDash)switch(ne){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}if(c?r.stroke(h):r.stroke(),ne==="double"){r.lineWidth=O/3;var We=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",c?r.stroke(h):r.stroke(),r.globalCompositeOperation=We}r.setLineDash&&r.setLineDash([])}},Pe=function(){a&&o.drawNodeOverlay(r,e,v,s,l)},Ie=function(){a&&o.drawNodeUnderlay(r,e,v,s,l)},Ge=function(){o.drawElementText(r,e,null,n)},nt=e.pstyle("ghost").value==="yes";if(nt){var at=e.pstyle("ghost-offset-x").pfValue,He=e.pstyle("ghost-offset-y").pfValue,Fe=e.pstyle("ghost-opacity").value,qe=Fe*d;r.translate(at,He),J(Fe*Q),ke(),Se(qe,!0),oe(Fe*q),De(),xe(W!==0||O!==0),Se(qe,!1),ae(qe),r.translate(-at,-He)}c&&r.translate(-v.x,-v.y),Ie(),c&&r.translate(v.x,v.y),J(),ke(),Se(d,!0),oe(),De(),xe(W!==0||O!==0),Se(d,!1),ae(),c&&r.translate(-v.x,-v.y),Ge(),Pe(),t&&r.translate(b.x1,b.y1)}};var Rs=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var s=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,v=n.pstyle("".concat(e,"-shape")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var d=n.padding();i=n.width()+2*d,o=n.height()+2*d}s.colorFillStyle(t,f[0],f[1],f[2],u),s.nodeShapes[v].draw(t,a.x,a.y,i+l*2,o+l*2),t.fill()}}}};yn.drawNodeOverlay=Rs("overlay"),yn.drawNodeUnderlay=Rs("underlay"),yn.hasPie=function(r){return r=r[0],r._private.hasPie},yn.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,v=0,d=this.usePaths();d&&(o=0,s=0),i.units==="%"?f=f*i.pfValue:i.pfValue!==void 0&&(f=i.pfValue/2);for(var c=1;c<=a.pieBackgroundN;c++){var h=e.pstyle("pie-"+c+"-background-size").value,g=e.pstyle("pie-"+c+"-background-color").value,y=e.pstyle("pie-"+c+"-background-opacity").value*t,b=h/100;b+v>1&&(b=1-v);var w=1.5*Math.PI+2*Math.PI*v,x=2*Math.PI*b,P=w+x;h===0||v>=1||v+b>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,f,w,P),r.closePath(),this.colorFillStyle(r,g[0],g[1],g[2],y),r.fill(),v+=b)}};var tr={},dd=100;tr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},tr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n},tr.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,l=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var u=t.sourceEndpoint(),f=t.targetEndpoint(),v=t.midpoint(),d=Vr(u,v),c=Vr(f,v);i=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(d,c))}else{var h=o?{x:0,y:0}:t.position(),g=t.paddedWidth(),y=t.paddedHeight();i=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,y))}else if(t.isEdge()){var b=t.sourceEndpoint(),w=t.targetEndpoint();i=r.createLinearGradient(b.x,b.y,w.x,w.y)}else{var x=o?{x:0,y:0}:t.position(),P=t.paddedWidth(),V=t.paddedHeight(),G=P/2,D=V/2,F=t.pstyle("background-gradient-direction").value;switch(F){case"to-bottom":i=r.createLinearGradient(x.x,x.y-D,x.x,x.y+D);break;case"to-top":i=r.createLinearGradient(x.x,x.y+D,x.x,x.y-D);break;case"to-left":i=r.createLinearGradient(x.x+G,x.y,x.x-G,x.y);break;case"to-right":i=r.createLinearGradient(x.x-G,x.y,x.x+G,x.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(x.x-G,x.y-D,x.x+G,x.y+D);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(x.x-G,x.y+D,x.x+G,x.y-D);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(x.x+G,x.y-D,x.x-G,x.y+D);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(x.x+G,x.y+D,x.x-G,x.y-D);break}}if(!i)return null;for(var L=l.length===s.length,$=s.length,W=0;W<$;W++)i.addColorStop(L?l[W]:W/($-1),"rgba("+s[W][0]+","+s[W][1]+","+s[W][2]+","+a+")");return i},tr.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a},tr.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"},tr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}},tr.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a},tr.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"},tr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}},tr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,f;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var v=t.canvasContainer;v.style.width=a+"px",v.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)f=t.canvases[d],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)f=t.bufferCanvases[d],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,o<=1&&(f=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}},tr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})},tr.render=function(r){r=r||Fi();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,a=r.forcedZoom,i=r.forcedPan,o=this,s=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=o.cy,u=o.data,f=u.canvasNeedsRedraw,v=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:o.motionBlur,c=o.motionBlurPxRatio,h=l.hasCompoundNodes(),g=o.hoverData.draggingEles,y=!!(o.hoverData.selecting||o.touchData.selecting);d=d&&!e&&o.motionBlurEnabled&&!y;var b=d;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(b=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!v&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var w=l.style(),x=l.zoom(),P=a!==void 0?a:x,V=l.pan(),G={x:V.x,y:V.y},D={zoom:x,pan:{x:V.x,y:V.y}},F=o.prevViewport,L=F===void 0||D.zoom!==F.zoom||D.pan.x!==F.pan.x||D.pan.y!==F.pan.y;!L&&!(g&&!h)&&(o.motionBlurPxRatio=1),i&&(G=i),P*=s,G.x*=s,G.y*=s;var $=o.getCachedZSortedEles();function W(He,Fe,qe,Ye,We){var Ze=He.globalCompositeOperation;He.globalCompositeOperation="destination-out",o.colorFillStyle(He,255,255,255,o.motionBlurTransparency),He.fillRect(Fe,qe,Ye,We),He.globalCompositeOperation=Ze}function O(He,Fe){var qe,Ye,We,Ze;!o.clearingMotionBlur&&(He===u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||He===u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(qe={x:V.x*c,y:V.y*c},Ye=x*c,We=o.canvasWidth*c,Ze=o.canvasHeight*c):(qe=G,Ye=P,We=o.canvasWidth,Ze=o.canvasHeight),He.setTransform(1,0,0,1,0,0),Fe==="motionBlur"?W(He,0,0,We,Ze):!e&&(Fe===void 0||Fe)&&He.clearRect(0,0,We,Ze),t||(He.translate(qe.x,qe.y),He.scale(Ye,Ye)),i&&He.translate(i.x,i.y),a&&He.scale(a,a)}if(v||(o.textureDrawLastFrame=!1),v){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var Q=o.data.bufferContexts[o.TEXTURE_BUFFER];Q.setTransform(1,0,0,1,0,0),Q.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:Q,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var D=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var H=u.contexts[o.NODE],ne=o.textureCache.texture,D=o.textureCache.viewport;H.setTransform(1,0,0,1,0,0),d?W(H,0,0,D.width,D.height):H.clearRect(0,0,D.width,D.height);var q=w.core("outside-texture-bg-color").value,J=w.core("outside-texture-bg-opacity").value;o.colorFillStyle(H,q[0],q[1],q[2],J),H.fillRect(0,0,D.width,D.height);var x=l.zoom();O(H,!1),H.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/s,D.height/D.zoom/s),H.drawImage(ne,D.mpan.x,D.mpan.y,D.width/D.zoom/s,D.height/D.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var oe=l.extent(),le=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),me=o.hideEdgesOnViewport&&le,ue=[];if(ue[o.NODE]=!f[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,ue[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),ue[o.DRAG]=!f[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,ue[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||t||n||ue[o.NODE]){var pe=d&&!ue[o.NODE]&&c!==1,H=e||(pe?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),Te=d&&!pe?"motionBlur":void 0;O(H,Te),me?o.drawCachedNodes(H,$.nondrag,s,oe):o.drawLayeredElements(H,$.nondrag,s,oe),o.debug&&o.drawDebugPoints(H,$.nondrag),!t&&!d&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||t||ue[o.DRAG])){var pe=d&&!ue[o.DRAG]&&c!==1,H=e||(pe?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);O(H,d&&!pe?"motionBlur":void 0),me?o.drawCachedNodes(H,$.drag,s,oe):o.drawCachedElements(H,$.drag,s,oe),o.debug&&o.drawDebugPoints(H,$.drag),!t&&!d&&(f[o.DRAG]=!1)}if(o.showFps||!n&&f[o.SELECT_BOX]&&!t){var H=e||u.contexts[o.SELECT_BOX];if(O(H),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var x=o.cy.zoom(),ke=w.core("selection-box-border-width").value/x;H.lineWidth=ke,H.fillStyle="rgba("+w.core("selection-box-color").value[0]+","+w.core("selection-box-color").value[1]+","+w.core("selection-box-color").value[2]+","+w.core("selection-box-opacity").value+")",H.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),ke>0&&(H.strokeStyle="rgba("+w.core("selection-box-border-color").value[0]+","+w.core("selection-box-border-color").value[1]+","+w.core("selection-box-border-color").value[2]+","+w.core("selection-box-opacity").value+")",H.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var x=o.cy.zoom(),Se=u.bgActivePosistion;H.fillStyle="rgba("+w.core("active-bg-color").value[0]+","+w.core("active-bg-color").value[1]+","+w.core("active-bg-color").value[2]+","+w.core("active-bg-opacity").value+")",H.beginPath(),H.arc(Se.x,Se.y,w.core("active-bg-size").pfValue/x,0,2*Math.PI),H.fill()}var xe=o.lastRedrawTime;if(o.showFps&&xe){xe=Math.round(xe);var ae=Math.round(1e3/xe);H.setTransform(1,0,0,1,0,0),H.fillStyle="rgba(255, 0, 0, 0.75)",H.strokeStyle="rgba(255, 0, 0, 0.75)",H.lineWidth=1,H.fillText("1 frame = "+xe+" ms = "+ae+" fps",0,20);var De=60;H.strokeRect(0,30,250,20),H.fillRect(0,30,250*Math.min(ae/De,1),20)}t||(f[o.SELECT_BOX]=!1)}if(d&&c!==1){var Pe=u.contexts[o.NODE],Ie=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],Ge=u.contexts[o.DRAG],nt=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],at=function(Fe,qe,Ye){Fe.setTransform(1,0,0,1,0,0),Ye||!b?Fe.clearRect(0,0,o.canvasWidth,o.canvasHeight):W(Fe,0,0,o.canvasWidth,o.canvasHeight);var We=c;Fe.drawImage(qe,0,0,o.canvasWidth*We,o.canvasHeight*We,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||ue[o.NODE])&&(at(Pe,Ie,ue[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||ue[o.DRAG])&&(at(Ge,nt,ue[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=D,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!v,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},dd)),e||l.emit("render")};var Nr={};Nr.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,s=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+s*i[1]);for(var l=1;l<i.length/2;l++)r.lineTo(e+o*i[l*2],t+s*i[l*2+1]);r.closePath()},Nr.drawRoundPolygonPath=function(r,e,t,n,a,i){var o=n/2,s=a/2,l=Qa(n,a);r.beginPath&&r.beginPath();for(var u=0;u<i.length/4;u++){var f=void 0,v=void 0;u===0?f=i.length-2:f=u*4-2,v=u*4+2;var d=e+o*i[u*4],c=t+s*i[u*4+1],h=-i[f]*i[v]-i[f+1]*i[v+1],g=l/Math.tan(Math.acos(h)/2),y=d-g*i[f],b=c-g*i[f+1],w=d+g*i[v],x=c+g*i[v+1];u===0?r.moveTo(y,b):r.lineTo(y,b),r.arcTo(d,c,w,x,l)}r.closePath()},Nr.drawRoundRectanglePath=function(r,e,t,n,a){var i=n/2,o=a/2,s=Mn(n,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.arcTo(e+i,t-o,e+i,t,s),r.arcTo(e+i,t+o,e,t+o,s),r.arcTo(e-i,t+o,e-i,t,s),r.arcTo(e-i,t-o,e,t-o,s),r.lineTo(e,t-o),r.closePath()},Nr.drawBottomRoundRectanglePath=function(r,e,t,n,a){var i=n/2,o=a/2,s=Mn(n,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.lineTo(e+i,t-o),r.lineTo(e+i,t),r.arcTo(e+i,t+o,e,t+o,s),r.arcTo(e-i,t+o,e-i,t,s),r.lineTo(e-i,t-o),r.lineTo(e,t-o),r.closePath()},Nr.drawCutRectanglePath=function(r,e,t,n,a){var i=n/2,o=a/2,s=Zi();r.beginPath&&r.beginPath(),r.moveTo(e-i+s,t-o),r.lineTo(e+i-s,t-o),r.lineTo(e+i,t-o+s),r.lineTo(e+i,t+o-s),r.lineTo(e+i-s,t+o),r.lineTo(e-i+s,t+o),r.lineTo(e-i,t+o-s),r.lineTo(e-i,t-o+s),r.closePath()},Nr.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=t-o,f=t+o,v=qa(n,a),d=v.widthOffset,c=v.heightOffset,h=v.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(s,u+c),r.lineTo(s,f-c),r.quadraticCurveTo(s+h,f,s+d,f),r.lineTo(l-d,f),r.quadraticCurveTo(l-h,f,l,f-c),r.lineTo(l,u+c),r.quadraticCurveTo(l-h,u,l-d,u),r.lineTo(s+d,u),r.quadraticCurveTo(s+h,u,s,u+c),r.closePath()};for(var Is=Math.sin(0),Os=Math.cos(0),xi={},Ei={},Ns=Math.PI/40,bn=0*Math.PI;bn<2*Math.PI;bn+=Ns)xi[bn]=Math.sin(bn),Ei[bn]=Math.cos(bn);Nr.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=Ns)i=e-s*xi[u]*Is+s*Ei[u]*Os,o=t+l*Ei[u]*Is+l*xi[u]*Os,u===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var Zn={};Zn.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]},Zn.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],s=be(r.maxWidth)||be(r.maxHeight),l=this.getPixelRatio(),u=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,u=r.scale;else if(s){var f=1/0,v=1/0;be(r.maxWidth)&&(f=u*r.maxWidth/i),be(r.maxHeight)&&(v=u*r.maxHeight/o),u=Math.min(f,v),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var d=document.createElement("canvas");d.width=i,d.height=o,d.style.width=i+"px",d.style.height=o+"px";var c=d.getContext("2d");if(i>0&&o>0){c.clearRect(0,0,i,o),c.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(r.full)c.translate(-n.x1*u,-n.y1*u),c.scale(u,u),this.drawElements(c,h),c.scale(1/u,1/u),c.translate(n.x1*u,n.y1*u);else{var g=e.pan(),y={x:g.x*u,y:g.y*u};u*=e.zoom(),c.translate(y.x,y.y),c.scale(u,u),this.drawElements(c,h),c.scale(1/u,1/u),c.translate(-y.x,-y.y)}r.bg&&(c.globalCompositeOperation="destination-over",c.fillStyle=r.bg,c.rect(0,0,i,o),c.fill())}return d};function cd(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function zs(r){var e=r.indexOf(",");return r.substr(e+1)}function Fs(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new on(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return cd(zs(n()),t);case"base64":return zs(n());case"base64uri":default:return n()}}Zn.png=function(r){return Fs(r,this.bufferCanvasImage(r),"image/png")},Zn.jpg=function(r){return Fs(r,this.bufferCanvasImage(r),"image/jpeg")};var Vs={};Vs.nodeShapeImpl=function(r,e,t,n,a,i,o){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var hd=Gs,pt=Gs.prototype;pt.CANVAS_LAYERS=3,pt.SELECT_BOX=0,pt.DRAG=1,pt.NODE=2,pt.BUFFER_COUNT=3,pt.TEXTURE_BUFFER=0,pt.MOTIONBLUR_BUFFER_NODE=1,pt.MOTIONBLUR_BUFFER_DRAG=2;function Gs(r){var e=this;e.data={canvases:new Array(pt.CANVAS_LAYERS),contexts:new Array(pt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(pt.CANVAS_LAYERS),bufferCanvases:new Array(pt.BUFFER_COUNT),bufferContexts:new Array(pt.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=r.cy.container();i.appendChild(e.data.canvasContainer),i.style[t]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Jn()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<pt.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(xe){l.style[xe]=o[xe]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(pt.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[pt.NODE].setAttribute("data-id","layer"+pt.NODE+"-node"),e.data.canvases[pt.SELECT_BOX].setAttribute("data-id","layer"+pt.SELECT_BOX+"-selectbox"),e.data.canvases[pt.DRAG].setAttribute("data-id","layer"+pt.DRAG+"-drag");for(var s=0;s<pt.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=Jt(),f=function(ae){return{x:(ae.x1+ae.x2)/2,y:(ae.y1+ae.y2)/2}},v=function(ae){return{x:-ae.w/2,y:-ae.h/2}},d=function(ae){var De=ae[0]._private,Pe=De.oldBackgroundTimestamp===De.backgroundTimestamp;return!Pe},c=function(ae){return ae[0]._private.nodeKey},h=function(ae){return ae[0]._private.labelStyleKey},g=function(ae){return ae[0]._private.sourceLabelStyleKey},y=function(ae){return ae[0]._private.targetLabelStyleKey},b=function(ae,De,Pe,Ie,Ge){return e.drawElement(ae,De,Pe,!1,!1,Ge)},w=function(ae,De,Pe,Ie,Ge){return e.drawElementText(ae,De,Pe,Ie,"main",Ge)},x=function(ae,De,Pe,Ie,Ge){return e.drawElementText(ae,De,Pe,Ie,"source",Ge)},P=function(ae,De,Pe,Ie,Ge){return e.drawElementText(ae,De,Pe,Ie,"target",Ge)},V=function(ae){return ae.boundingBox(),ae[0]._private.bodyBounds},G=function(ae){return ae.boundingBox(),ae[0]._private.labelBounds.main||u},D=function(ae){return ae.boundingBox(),ae[0]._private.labelBounds.source||u},F=function(ae){return ae.boundingBox(),ae[0]._private.labelBounds.target||u},L=function(ae,De){return De},$=function(ae){return f(V(ae))},W=function(ae,De,Pe){var Ie=ae?ae+"-":"";return{x:De.x+Pe.pstyle(Ie+"text-margin-x").pfValue,y:De.y+Pe.pstyle(Ie+"text-margin-y").pfValue}},O=function(ae,De,Pe){var Ie=ae[0]._private.rscratch;return{x:Ie[De],y:Ie[Pe]}},Q=function(ae){return W("",O(ae,"labelX","labelY"),ae)},H=function(ae){return W("source",O(ae,"sourceLabelX","sourceLabelY"),ae)},ne=function(ae){return W("target",O(ae,"targetLabelX","targetLabelY"),ae)},q=function(ae){return v(V(ae))},J=function(ae){return v(D(ae))},oe=function(ae){return v(F(ae))},le=function(ae){var De=G(ae),Pe=v(G(ae));if(ae.isNode()){switch(ae.pstyle("text-halign").value){case"left":Pe.x=-De.w;break;case"right":Pe.x=0;break}switch(ae.pstyle("text-valign").value){case"top":Pe.y=-De.h;break;case"bottom":Pe.y=0;break}}return Pe},me=e.data.eleTxrCache=new Un(e,{getKey:c,doesEleInvalidateKey:d,drawElement:b,getBoundingBox:V,getRotationPoint:$,getRotationOffset:q,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ue=e.data.lblTxrCache=new Un(e,{getKey:h,drawElement:w,getBoundingBox:G,getRotationPoint:Q,getRotationOffset:le,isVisible:L}),pe=e.data.slbTxrCache=new Un(e,{getKey:g,drawElement:x,getBoundingBox:D,getRotationPoint:H,getRotationOffset:J,isVisible:L}),Te=e.data.tlbTxrCache=new Un(e,{getKey:y,drawElement:P,getBoundingBox:F,getRotationPoint:ne,getRotationOffset:oe,isVisible:L}),ke=e.data.lyrTxrCache=new ks(e);e.onUpdateEleCalcs(function(ae,De){me.invalidateElements(De),ue.invalidateElements(De),pe.invalidateElements(De),Te.invalidateElements(De),ke.invalidateElements(De);for(var Pe=0;Pe<De.length;Pe++){var Ie=De[Pe]._private;Ie.oldBackgroundTimestamp=Ie.backgroundTimestamp}});var Se=function(ae){for(var De=0;De<ae.length;De++)ke.enqueueElementRefinement(ae[De].ele)};me.onDequeue(Se),ue.onDequeue(Se),pe.onDequeue(Se),Te.onDequeue(Se)}pt.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[pt.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[pt.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[pt.SELECT_BOX]=e;break}};var gd=typeof Path2D<"u";pt.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r},pt.usePaths=function(){return gd&&this.pathsEnabled},pt.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)},pt.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled},pt.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas>"u"?"undefined":K(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t},[Bs,mr,Cr,wi,Ur,yn,tr,Nr,Zn,Vs].forEach(function(r){tt(pt,r)});var pd=[{name:"null",impl:vs},{name:"base",impl:Cs},{name:"canvas",impl:hd}],md=[{type:"layout",extensions:Sv},{type:"renderer",extensions:pd}],Hs={},Ws={};function $s(r,e,t){var n=t,a=function(F){yt("Can not register `"+e+"` for `"+r+"` since `"+F+"` already exists in the prototype and can not be overridden")};if(r==="core"){if($n.prototype[e])return a(e);$n.prototype[e]=t}else if(r==="collection"){if(zt.prototype[e])return a(e);zt.prototype[e]=t}else if(r==="layout"){for(var i=function(F){this.options=F,t.call(this,F),Ne(this._private)||(this._private={}),this._private.cy=F.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=t.prototype.stop;o.stop=function(){var D=this.options;if(D&&D.animate){var F=this.animations;if(F)for(var L=0;L<F.length;L++)F[L].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var v=function(F){return F._private.cy},d={addEventFields:function(F,L){L.layout=F,L.cy=v(F),L.target=F},bubble:function(){return!0},parent:function(F){return v(F)}};tt(o,{createEmitter:function(){return this._private.emitter=new ga(d,this),this},emitter:function(){return this._private.emitter},on:function(F,L){return this.emitter().on(F,L),this},one:function(F,L){return this.emitter().one(F,L),this},once:function(F,L){return this.emitter().one(F,L),this},removeListener:function(F,L){return this.emitter().removeListener(F,L),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(F,L){return this.emitter().emit(F,L),this}}),bt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var c=Ks("renderer","base"),h=c.prototype,g=t,y=t.prototype,b=function(){c.apply(this,arguments),g.apply(this,arguments)},w=b.prototype;for(var x in h){var P=h[x],V=y[x]!=null;if(V)return a(x);w[x]=P}for(var G in y)w[G]=y[G];h.clientFunctions.forEach(function(D){w[D]=w[D]||function(){kt("Renderer does not implement `renderer."+D+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return kt(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return ki({map:Hs,keys:[r,e],value:n})}function Ks(r,e){return Pi({map:Hs,keys:[r,e]})}function yd(r,e,t,n,a){return ki({map:Ws,keys:[r,e,t,n],value:a})}function bd(r,e,t,n){return Pi({map:Ws,keys:[r,e,t,n]})}var Ci=function(){if(arguments.length===2)return Ks.apply(null,arguments);if(arguments.length===3)return $s.apply(null,arguments);if(arguments.length===4)return bd.apply(null,arguments);if(arguments.length===5)return yd.apply(null,arguments);kt("Invalid extension access syntax")};$n.prototype.extension=Ci,md.forEach(function(r){r.extensions.forEach(function(e){$s(r.type,e.name,e.impl)})});var Ys=function r(){if(!(this instanceof r))return new r;this.length=0},Xr=Ys.prototype;Xr.instanceString=function(){return"stylesheet"},Xr.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this},Xr.css=function(r,e){var t=this.length-1;if(re(r))this[t].properties.push({name:r,value:e});else if(Ne(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=Kt.properties[o]||Kt.properties[dr(o)];if(l!=null){var u=l.name,f=s;this[t].properties.push({name:u,value:f})}}}return this},Xr.style=Xr.css,Xr.generateStyle=function(r){var e=new Kt(r);return this.appendToStyle(e)},Xr.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var wd="3.23.0",Zr=function(e){if(e===void 0&&(e={}),Ne(e))return new $n(e);if(re(e))return Ci.apply(Ci,arguments)};Zr.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Zr),r.apply(null,e),this},Zr.warnings=function(r){return Ni(r)},Zr.version=wd,Zr.stylesheet=Zr.Stylesheet=Ys,U.exports=Zr},46506:(U,de,m)=>{U.exports={graphlib:m(71310),layout:m(42529),debug:m(5512),util:{time:m(8783).time,notime:m(8783).notime},version:m(57589)}},85247:(U,de,m)=>{"use strict";var p=m(43294),N=m(38757);U.exports={run:I,undo:E};function I(T){var B=T.graph().acyclicer==="greedy"?N(T,S(T)):A(T);p.forEach(B,function(k){var M=T.edge(k);T.removeEdge(k),M.forwardName=k.name,M.reversed=!0,T.setEdge(k.w,k.v,M,p.uniqueId("rev"))});function S(k){return function(M){return k.edge(M).weight}}}function A(T){var B=[],S={},k={};function M(C){p.has(k,C)||(k[C]=!0,S[C]=!0,p.forEach(T.outEdges(C),function(z){p.has(S,z.w)?B.push(z):M(z.w)}),delete S[C])}return p.forEach(T.nodes(),M),B}function E(T){p.forEach(T.edges(),function(B){var S=T.edge(B);if(S.reversed){T.removeEdge(B);var k=S.forwardName;delete S.reversed,delete S.forwardName,T.setEdge(B.w,B.v,S,k)}})}},49654:(U,de,m)=>{var p=m(43294),N=m(8783);U.exports=I;function I(E){function T(B){var S=E.children(B),k=E.node(B);if(S.length&&p.forEach(S,T),p.has(k,"minRank")){k.borderLeft=[],k.borderRight=[];for(var M=k.minRank,C=k.maxRank+1;M<C;++M)A(E,"borderLeft","_bl",B,k,M),A(E,"borderRight","_br",B,k,M)}}p.forEach(E.children(),T)}function A(E,T,B,S,k,M){var C={width:0,height:0,rank:M,borderType:T},z=k[T][M-1],K=N.addDummyNode(E,"border",C,B);k[T][M]=K,E.setParent(K,S),z&&E.setEdge(z,K,{weight:1})}},25128:(U,de,m)=>{"use strict";var p=m(43294);U.exports={adjust:N,undo:I};function N(M){var C=M.graph().rankdir.toLowerCase();(C==="lr"||C==="rl")&&A(M)}function I(M){var C=M.graph().rankdir.toLowerCase();(C==="bt"||C==="rl")&&T(M),(C==="lr"||C==="rl")&&(S(M),A(M))}function A(M){p.forEach(M.nodes(),function(C){E(M.node(C))}),p.forEach(M.edges(),function(C){E(M.edge(C))})}function E(M){var C=M.width;M.width=M.height,M.height=C}function T(M){p.forEach(M.nodes(),function(C){B(M.node(C))}),p.forEach(M.edges(),function(C){var z=M.edge(C);p.forEach(z.points,B),p.has(z,"y")&&B(z)})}function B(M){M.y=-M.y}function S(M){p.forEach(M.nodes(),function(C){k(M.node(C))}),p.forEach(M.edges(),function(C){var z=M.edge(C);p.forEach(z.points,k),p.has(z,"x")&&k(z)})}function k(M){var C=M.x;M.x=M.y,M.y=C}},65199:U=>{U.exports=de;function de(){var N={};N._next=N._prev=N,this._sentinel=N}de.prototype.dequeue=function(){var N=this._sentinel,I=N._prev;if(I!==N)return m(I),I},de.prototype.enqueue=function(N){var I=this._sentinel;N._prev&&N._next&&m(N),N._next=I._next,I._next._prev=N,I._next=N,N._prev=I},de.prototype.toString=function(){for(var N=[],I=this._sentinel,A=I._prev;A!==I;)N.push(JSON.stringify(A,p)),A=A._prev;return"["+N.join(", ")+"]"};function m(N){N._prev._next=N._next,N._next._prev=N._prev,delete N._next,delete N._prev}function p(N,I){if(N!=="_next"&&N!=="_prev")return I}},5512:(U,de,m)=>{var p=m(43294),N=m(8783),I=m(71310).Graph;U.exports={debugOrdering:A};function A(E){var T=N.buildLayerMatrix(E),B=new I({compound:!0,multigraph:!0}).setGraph({});return p.forEach(E.nodes(),function(S){B.setNode(S,{label:S}),B.setParent(S,"layer"+E.node(S).rank)}),p.forEach(E.edges(),function(S){B.setEdge(S.v,S.w,{},S.name)}),p.forEach(T,function(S,k){var M="layer"+k;B.setNode(M,{rank:"same"}),p.reduce(S,function(C,z){return B.setEdge(C,z,{style:"invis"}),z})}),B}},71310:(U,de,m)=>{var p;try{p=m(87377)}catch{}p||(p=window.graphlib),U.exports=p},38757:(U,de,m)=>{var p=m(43294),N=m(71310).Graph,I=m(65199);U.exports=E;var A=p.constant(1);function E(M,C){if(M.nodeCount()<=1)return[];var z=S(M,C||A),K=T(z.graph,z.buckets,z.zeroIdx);return p.flatten(p.map(K,function(_){return M.outEdges(_.v,_.w)}),!0)}function T(M,C,z){for(var K=[],_=C[C.length-1],he=C[0],te;M.nodeCount();){for(;te=he.dequeue();)B(M,C,z,te);for(;te=_.dequeue();)B(M,C,z,te);if(M.nodeCount()){for(var j=C.length-2;j>0;--j)if(te=C[j].dequeue(),te){K=K.concat(B(M,C,z,te,!0));break}}}return K}function B(M,C,z,K,_){var he=_?[]:void 0;return p.forEach(M.inEdges(K.v),function(te){var j=M.edge(te),Y=M.node(te.v);_&&he.push({v:te.v,w:te.w}),Y.out-=j,k(C,z,Y)}),p.forEach(M.outEdges(K.v),function(te){var j=M.edge(te),Y=te.w,X=M.node(Y);X.in-=j,k(C,z,X)}),M.removeNode(K.v),he}function S(M,C){var z=new N,K=0,_=0;p.forEach(M.nodes(),function(j){z.setNode(j,{v:j,in:0,out:0})}),p.forEach(M.edges(),function(j){var Y=z.edge(j.v,j.w)||0,X=C(j),Z=Y+X;z.setEdge(j.v,j.w,Z),_=Math.max(_,z.node(j.v).out+=X),K=Math.max(K,z.node(j.w).in+=X)});var he=p.range(_+K+3).map(function(){return new I}),te=K+1;return p.forEach(z.nodes(),function(j){k(he,te,z.node(j))}),{graph:z,buckets:he,zeroIdx:te}}function k(M,C,z){z.out?z.in?M[z.out-z.in+C].enqueue(z):M[M.length-1].enqueue(z):M[0].enqueue(z)}},42529:(U,de,m)=>{"use strict";var p=m(43294),N=m(85247),I=m(20450),A=m(64618),E=m(8783).normalizeRanks,T=m(77908),B=m(8783).removeEmptyRanks,S=m(96820),k=m(49654),M=m(25128),C=m(73641),z=m(65784),K=m(8783),_=m(71310).Graph;U.exports=he;function he(se,we){var Ae=we&&we.debugTiming?K.time:K.notime;Ae("layout",function(){var ze=Ae("  buildLayoutGraph",function(){return Ve(se)});Ae("  runLayout",function(){te(ze,Ae)}),Ae("  updateInputGraph",function(){j(se,ze)})})}function te(se,we){we("    makeSpaceForEdgeLabels",function(){Oe(se)}),we("    removeSelfEdges",function(){be(se)}),we("    acyclic",function(){N.run(se)}),we("    nestingGraph.run",function(){S.run(se)}),we("    rank",function(){A(K.asNonCompoundGraph(se))}),we("    injectEdgeLabelProxies",function(){$e(se)}),we("    removeEmptyRanks",function(){B(se)}),we("    nestingGraph.cleanup",function(){S.cleanup(se)}),we("    normalizeRanks",function(){E(se)}),we("    assignRankMinMax",function(){Xe(se)}),we("    removeEdgeLabelProxies",function(){je(se)}),we("    normalize.run",function(){I.run(se)}),we("    parentDummyChains",function(){T(se)}),we("    addBorderSegments",function(){k(se)}),we("    order",function(){C(se)}),we("    insertSelfEdges",function(){dt(se)}),we("    adjustCoordinateSystem",function(){M.adjust(se)}),we("    position",function(){z(se)}),we("    positionSelfEdges",function(){_e(se)}),we("    removeBorderNodes",function(){Je(se)}),we("    normalize.undo",function(){I.undo(se)}),we("    fixupEdgeLabelCoords",function(){ge(se)}),we("    undoCoordinateSystem",function(){M.undo(se)}),we("    translateGraph",function(){re(se)}),we("    assignNodeIntersects",function(){ce(se)}),we("    reversePoints",function(){Ne(se)}),we("    acyclic.undo",function(){N.undo(se)})}function j(se,we){p.forEach(se.nodes(),function(Ae){var ze=se.node(Ae),et=we.node(Ae);ze&&(ze.x=et.x,ze.y=et.y,we.children(Ae).length&&(ze.width=et.width,ze.height=et.height))}),p.forEach(se.edges(),function(Ae){var ze=se.edge(Ae),et=we.edge(Ae);ze.points=et.points,p.has(et,"x")&&(ze.x=et.x,ze.y=et.y)}),se.graph().width=we.graph().width,se.graph().height=we.graph().height}var Y=["nodesep","edgesep","ranksep","marginx","marginy"],X={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Z=["acyclicer","ranker","rankdir","align"],ee=["width","height"],ie={width:0,height:0},ye=["minlen","weight","width","height","labeloffset"],fe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Re=["labelpos"];function Ve(se){var we=new _({multigraph:!0,compound:!0}),Ae=Tt(se.graph());return we.setGraph(p.merge({},X,Qe(Ae,Y),p.pick(Ae,Z))),p.forEach(se.nodes(),function(ze){var et=Tt(se.node(ze));we.setNode(ze,p.defaults(Qe(et,ee),ie)),we.setParent(ze,se.parent(ze))}),p.forEach(se.edges(),function(ze){var et=Tt(se.edge(ze));we.setEdge(ze,p.merge({},fe,Qe(et,ye),p.pick(et,Re)))}),we}function Oe(se){var we=se.graph();we.ranksep/=2,p.forEach(se.edges(),function(Ae){var ze=se.edge(Ae);ze.minlen*=2,ze.labelpos.toLowerCase()!=="c"&&(we.rankdir==="TB"||we.rankdir==="BT"?ze.width+=ze.labeloffset:ze.height+=ze.labeloffset)})}function $e(se){p.forEach(se.edges(),function(we){var Ae=se.edge(we);if(Ae.width&&Ae.height){var ze=se.node(we.v),et=se.node(we.w),ut={rank:(et.rank-ze.rank)/2+ze.rank,e:we};K.addDummyNode(se,"edge-proxy",ut,"_ep")}})}function Xe(se){var we=0;p.forEach(se.nodes(),function(Ae){var ze=se.node(Ae);ze.borderTop&&(ze.minRank=se.node(ze.borderTop).rank,ze.maxRank=se.node(ze.borderBottom).rank,we=p.max(we,ze.maxRank))}),se.graph().maxRank=we}function je(se){p.forEach(se.nodes(),function(we){var Ae=se.node(we);Ae.dummy==="edge-proxy"&&(se.edge(Ae.e).labelRank=Ae.rank,se.removeNode(we))})}function re(se){var we=Number.POSITIVE_INFINITY,Ae=0,ze=Number.POSITIVE_INFINITY,et=0,ut=se.graph(),Dt=ut.marginx||0,qt=ut.marginy||0;function Jn(At){var Rt=At.x,dr=At.y,En=At.width,Cn=At.height;we=Math.min(we,Rt-En/2),Ae=Math.max(Ae,Rt+En/2),ze=Math.min(ze,dr-Cn/2),et=Math.max(et,dr+Cn/2)}p.forEach(se.nodes(),function(At){Jn(se.node(At))}),p.forEach(se.edges(),function(At){var Rt=se.edge(At);p.has(Rt,"x")&&Jn(Rt)}),we-=Dt,ze-=qt,p.forEach(se.nodes(),function(At){var Rt=se.node(At);Rt.x-=we,Rt.y-=ze}),p.forEach(se.edges(),function(At){var Rt=se.edge(At);p.forEach(Rt.points,function(dr){dr.x-=we,dr.y-=ze}),p.has(Rt,"x")&&(Rt.x-=we),p.has(Rt,"y")&&(Rt.y-=ze)}),ut.width=Ae-we+Dt,ut.height=et-ze+qt}function ce(se){p.forEach(se.edges(),function(we){var Ae=se.edge(we),ze=se.node(we.v),et=se.node(we.w),ut,Dt;Ae.points?(ut=Ae.points[0],Dt=Ae.points[Ae.points.length-1]):(Ae.points=[],ut=et,Dt=ze),Ae.points.unshift(K.intersectRect(ze,ut)),Ae.points.push(K.intersectRect(et,Dt))})}function ge(se){p.forEach(se.edges(),function(we){var Ae=se.edge(we);if(p.has(Ae,"x"))switch((Ae.labelpos==="l"||Ae.labelpos==="r")&&(Ae.width-=Ae.labeloffset),Ae.labelpos){case"l":Ae.x-=Ae.width/2+Ae.labeloffset;break;case"r":Ae.x+=Ae.width/2+Ae.labeloffset;break}})}function Ne(se){p.forEach(se.edges(),function(we){var Ae=se.edge(we);Ae.reversed&&Ae.points.reverse()})}function Je(se){p.forEach(se.nodes(),function(we){if(se.children(we).length){var Ae=se.node(we),ze=se.node(Ae.borderTop),et=se.node(Ae.borderBottom),ut=se.node(p.last(Ae.borderLeft)),Dt=se.node(p.last(Ae.borderRight));Ae.width=Math.abs(Dt.x-ut.x),Ae.height=Math.abs(et.y-ze.y),Ae.x=ut.x+Ae.width/2,Ae.y=ze.y+Ae.height/2}}),p.forEach(se.nodes(),function(we){se.node(we).dummy==="border"&&se.removeNode(we)})}function be(se){p.forEach(se.edges(),function(we){if(we.v===we.w){var Ae=se.node(we.v);Ae.selfEdges||(Ae.selfEdges=[]),Ae.selfEdges.push({e:we,label:se.edge(we)}),se.removeEdge(we)}})}function dt(se){var we=K.buildLayerMatrix(se);p.forEach(we,function(Ae){var ze=0;p.forEach(Ae,function(et,ut){var Dt=se.node(et);Dt.order=ut+ze,p.forEach(Dt.selfEdges,function(qt){K.addDummyNode(se,"selfedge",{width:qt.label.width,height:qt.label.height,rank:Dt.rank,order:ut+ ++ze,e:qt.e,label:qt.label},"_se")}),delete Dt.selfEdges})})}function _e(se){p.forEach(se.nodes(),function(we){var Ae=se.node(we);if(Ae.dummy==="selfedge"){var ze=se.node(Ae.e.v),et=ze.x+ze.width/2,ut=ze.y,Dt=Ae.x-et,qt=ze.height/2;se.setEdge(Ae.e,Ae.label),se.removeNode(we),Ae.label.points=[{x:et+2*Dt/3,y:ut-qt},{x:et+5*Dt/6,y:ut-qt},{x:et+Dt,y:ut},{x:et+5*Dt/6,y:ut+qt},{x:et+2*Dt/3,y:ut+qt}],Ae.label.x=Ae.x,Ae.label.y=Ae.y}})}function Qe(se,we){return p.mapValues(p.pick(se,we),Number)}function Tt(se){var we={};return p.forEach(se,function(Ae,ze){we[ze.toLowerCase()]=Ae}),we}},43294:(U,de,m)=>{var p;try{p={cloneDeep:m(9850),constant:m(86874),defaults:m(84573),each:m(79421),filter:m(90882),find:m(55281),flatten:m(35676),forEach:m(59756),forIn:m(20792),has:m(93352),isUndefined:m(84336),last:m(56974),map:m(16760),mapValues:m(34519),max:m(71644),merge:m(98537),min:m(65680),minBy:m(10937),now:m(61100),pick:m(13888),range:m(2689),reduce:m(58215),sortBy:m(829),uniqueId:m(74930),values:m(98346),zipObject:m(46150)}}catch{}p||(p=window._),U.exports=p},96820:(U,de,m)=>{var p=m(43294),N=m(8783);U.exports={run:I,cleanup:B};function I(S){var k=N.addDummyNode(S,"root",{},"_root"),M=E(S),C=p.max(p.values(M))-1,z=2*C+1;S.graph().nestingRoot=k,p.forEach(S.edges(),function(_){S.edge(_).minlen*=z});var K=T(S)+1;p.forEach(S.children(),function(_){A(S,k,z,K,C,M,_)}),S.graph().nodeRankFactor=z}function A(S,k,M,C,z,K,_){var he=S.children(_);if(!he.length){_!==k&&S.setEdge(k,_,{weight:0,minlen:M});return}var te=N.addBorderNode(S,"_bt"),j=N.addBorderNode(S,"_bb"),Y=S.node(_);S.setParent(te,_),Y.borderTop=te,S.setParent(j,_),Y.borderBottom=j,p.forEach(he,function(X){A(S,k,M,C,z,K,X);var Z=S.node(X),ee=Z.borderTop?Z.borderTop:X,ie=Z.borderBottom?Z.borderBottom:X,ye=Z.borderTop?C:2*C,fe=ee!==ie?1:z-K[_]+1;S.setEdge(te,ee,{weight:ye,minlen:fe,nestingEdge:!0}),S.setEdge(ie,j,{weight:ye,minlen:fe,nestingEdge:!0})}),S.parent(_)||S.setEdge(k,te,{weight:0,minlen:z+K[_]})}function E(S){var k={};function M(C,z){var K=S.children(C);K&&K.length&&p.forEach(K,function(_){M(_,z+1)}),k[C]=z}return p.forEach(S.children(),function(C){M(C,1)}),k}function T(S){return p.reduce(S.edges(),function(k,M){return k+S.edge(M).weight},0)}function B(S){var k=S.graph();S.removeNode(k.nestingRoot),delete k.nestingRoot,p.forEach(S.edges(),function(M){var C=S.edge(M);C.nestingEdge&&S.removeEdge(M)})}},20450:(U,de,m)=>{"use strict";var p=m(43294),N=m(8783);U.exports={run:I,undo:E};function I(T){T.graph().dummyChains=[],p.forEach(T.edges(),function(B){A(T,B)})}function A(T,B){var S=B.v,k=T.node(S).rank,M=B.w,C=T.node(M).rank,z=B.name,K=T.edge(B),_=K.labelRank;if(C!==k+1){T.removeEdge(B);var he,te,j;for(j=0,++k;k<C;++j,++k)K.points=[],te={width:0,height:0,edgeLabel:K,edgeObj:B,rank:k},he=N.addDummyNode(T,"edge",te,"_d"),k===_&&(te.width=K.width,te.height=K.height,te.dummy="edge-label",te.labelpos=K.labelpos),T.setEdge(S,he,{weight:K.weight},z),j===0&&T.graph().dummyChains.push(he),S=he;T.setEdge(S,M,{weight:K.weight},z)}}function E(T){p.forEach(T.graph().dummyChains,function(B){var S=T.node(B),k=S.edgeLabel,M;for(T.setEdge(S.edgeObj,k);S.dummy;)M=T.successors(B)[0],T.removeNode(B),k.points.push({x:S.x,y:S.y}),S.dummy==="edge-label"&&(k.x=S.x,k.y=S.y,k.width=S.width,k.height=S.height),B=M,S=T.node(B)})}},47897:(U,de,m)=>{var p=m(43294);U.exports=N;function N(I,A,E){var T={},B;p.forEach(E,function(S){for(var k=I.parent(S),M,C;k;){if(M=I.parent(k),M?(C=T[M],T[M]=k):(C=B,B=k),C&&C!==k){A.setEdge(C,k);return}k=M}})}},29533:(U,de,m)=>{var p=m(43294);U.exports=N;function N(I,A){return p.map(A,function(E){var T=I.inEdges(E);if(T.length){var B=p.reduce(T,function(S,k){var M=I.edge(k),C=I.node(k.v);return{sum:S.sum+M.weight*C.order,weight:S.weight+M.weight}},{sum:0,weight:0});return{v:E,barycenter:B.sum/B.weight,weight:B.weight}}else return{v:E}})}},64622:(U,de,m)=>{var p=m(43294),N=m(71310).Graph;U.exports=I;function I(E,T,B){var S=A(E),k=new N({compound:!0}).setGraph({root:S}).setDefaultNodeLabel(function(M){return E.node(M)});return p.forEach(E.nodes(),function(M){var C=E.node(M),z=E.parent(M);(C.rank===T||C.minRank<=T&&T<=C.maxRank)&&(k.setNode(M),k.setParent(M,z||S),p.forEach(E[B](M),function(K){var _=K.v===M?K.w:K.v,he=k.edge(_,M),te=p.isUndefined(he)?0:he.weight;k.setEdge(_,M,{weight:E.edge(K).weight+te})}),p.has(C,"minRank")&&k.setNode(M,{borderLeft:C.borderLeft[T],borderRight:C.borderRight[T]}))}),k}function A(E){for(var T;E.hasNode(T=p.uniqueId("_root")););return T}},6254:(U,de,m)=>{"use strict";var p=m(43294);U.exports=N;function N(A,E){for(var T=0,B=1;B<E.length;++B)T+=I(A,E[B-1],E[B]);return T}function I(A,E,T){for(var B=p.zipObject(T,p.map(T,function(K,_){return _})),S=p.flatten(p.map(E,function(K){return p.sortBy(p.map(A.outEdges(K),function(_){return{pos:B[_.w],weight:A.edge(_).weight}}),"pos")}),!0),k=1;k<T.length;)k<<=1;var M=2*k-1;k-=1;var C=p.map(new Array(M),function(){return 0}),z=0;return p.forEach(S.forEach(function(K){var _=K.pos+k;C[_]+=K.weight;for(var he=0;_>0;)_%2&&(he+=C[_+1]),_=_-1>>1,C[_]+=K.weight;z+=K.weight*he})),z}},73641:(U,de,m)=>{"use strict";var p=m(43294),N=m(65036),I=m(6254),A=m(83956),E=m(64622),T=m(47897),B=m(71310).Graph,S=m(8783);U.exports=k;function k(K){var _=S.maxRank(K),he=M(K,p.range(1,_+1),"inEdges"),te=M(K,p.range(_-1,-1,-1),"outEdges"),j=N(K);z(K,j);for(var Y=Number.POSITIVE_INFINITY,X,Z=0,ee=0;ee<4;++Z,++ee){C(Z%2?he:te,Z%4>=2),j=S.buildLayerMatrix(K);var ie=I(K,j);ie<Y&&(ee=0,X=p.cloneDeep(j),Y=ie)}z(K,X)}function M(K,_,he){return p.map(_,function(te){return E(K,te,he)})}function C(K,_){var he=new B;p.forEach(K,function(te){var j=te.graph().root,Y=A(te,j,he,_);p.forEach(Y.vs,function(X,Z){te.node(X).order=Z}),T(te,he,Y.vs)})}function z(K,_){p.forEach(_,function(he){p.forEach(he,function(te,j){K.node(te).order=j})})}},65036:(U,de,m)=>{"use strict";var p=m(43294);U.exports=N;function N(I){var A={},E=p.filter(I.nodes(),function(M){return!I.children(M).length}),T=p.max(p.map(E,function(M){return I.node(M).rank})),B=p.map(p.range(T+1),function(){return[]});function S(M){if(!p.has(A,M)){A[M]=!0;var C=I.node(M);B[C.rank].push(M),p.forEach(I.successors(M),S)}}var k=p.sortBy(E,function(M){return I.node(M).rank});return p.forEach(k,S),B}},39953:(U,de,m)=>{"use strict";var p=m(43294);U.exports=N;function N(E,T){var B={};p.forEach(E,function(k,M){var C=B[k.v]={indegree:0,in:[],out:[],vs:[k.v],i:M};p.isUndefined(k.barycenter)||(C.barycenter=k.barycenter,C.weight=k.weight)}),p.forEach(T.edges(),function(k){var M=B[k.v],C=B[k.w];!p.isUndefined(M)&&!p.isUndefined(C)&&(C.indegree++,M.out.push(B[k.w]))});var S=p.filter(B,function(k){return!k.indegree});return I(S)}function I(E){var T=[];function B(M){return function(C){C.merged||(p.isUndefined(C.barycenter)||p.isUndefined(M.barycenter)||C.barycenter>=M.barycenter)&&A(M,C)}}function S(M){return function(C){C.in.push(M),--C.indegree===0&&E.push(C)}}for(;E.length;){var k=E.pop();T.push(k),p.forEach(k.in.reverse(),B(k)),p.forEach(k.out,S(k))}return p.map(p.filter(T,function(M){return!M.merged}),function(M){return p.pick(M,["vs","i","barycenter","weight"])})}function A(E,T){var B=0,S=0;E.weight&&(B+=E.barycenter*E.weight,S+=E.weight),T.weight&&(B+=T.barycenter*T.weight,S+=T.weight),E.vs=T.vs.concat(E.vs),E.barycenter=B/S,E.weight=S,E.i=Math.min(T.i,E.i),T.merged=!0}},83956:(U,de,m)=>{var p=m(43294),N=m(29533),I=m(39953),A=m(11957);U.exports=E;function E(S,k,M,C){var z=S.children(k),K=S.node(k),_=K?K.borderLeft:void 0,he=K?K.borderRight:void 0,te={};_&&(z=p.filter(z,function(ie){return ie!==_&&ie!==he}));var j=N(S,z);p.forEach(j,function(ie){if(S.children(ie.v).length){var ye=E(S,ie.v,M,C);te[ie.v]=ye,p.has(ye,"barycenter")&&B(ie,ye)}});var Y=I(j,M);T(Y,te);var X=A(Y,C);if(_&&(X.vs=p.flatten([_,X.vs,he],!0),S.predecessors(_).length)){var Z=S.node(S.predecessors(_)[0]),ee=S.node(S.predecessors(he)[0]);p.has(X,"barycenter")||(X.barycenter=0,X.weight=0),X.barycenter=(X.barycenter*X.weight+Z.order+ee.order)/(X.weight+2),X.weight+=2}return X}function T(S,k){p.forEach(S,function(M){M.vs=p.flatten(M.vs.map(function(C){return k[C]?k[C].vs:C}),!0)})}function B(S,k){p.isUndefined(S.barycenter)?(S.barycenter=k.barycenter,S.weight=k.weight):(S.barycenter=(S.barycenter*S.weight+k.barycenter*k.weight)/(S.weight+k.weight),S.weight+=k.weight)}},11957:(U,de,m)=>{var p=m(43294),N=m(8783);U.exports=I;function I(T,B){var S=N.partition(T,function(te){return p.has(te,"barycenter")}),k=S.lhs,M=p.sortBy(S.rhs,function(te){return-te.i}),C=[],z=0,K=0,_=0;k.sort(E(!!B)),_=A(C,M,_),p.forEach(k,function(te){_+=te.vs.length,C.push(te.vs),z+=te.barycenter*te.weight,K+=te.weight,_=A(C,M,_)});var he={vs:p.flatten(C,!0)};return K&&(he.barycenter=z/K,he.weight=K),he}function A(T,B,S){for(var k;B.length&&(k=p.last(B)).i<=S;)B.pop(),T.push(k.vs),S++;return S}function E(T){return function(B,S){return B.barycenter<S.barycenter?-1:B.barycenter>S.barycenter?1:T?S.i-B.i:B.i-S.i}}},77908:(U,de,m)=>{var p=m(43294);U.exports=N;function N(E){var T=A(E);p.forEach(E.graph().dummyChains,function(B){for(var S=E.node(B),k=S.edgeObj,M=I(E,T,k.v,k.w),C=M.path,z=M.lca,K=0,_=C[K],he=!0;B!==k.w;){if(S=E.node(B),he){for(;(_=C[K])!==z&&E.node(_).maxRank<S.rank;)K++;_===z&&(he=!1)}if(!he){for(;K<C.length-1&&E.node(_=C[K+1]).minRank<=S.rank;)K++;_=C[K]}E.setParent(B,_),B=E.successors(B)[0]}})}function I(E,T,B,S){var k=[],M=[],C=Math.min(T[B].low,T[S].low),z=Math.max(T[B].lim,T[S].lim),K,_;K=B;do K=E.parent(K),k.push(K);while(K&&(T[K].low>C||z>T[K].lim));for(_=K,K=S;(K=E.parent(K))!==_;)M.push(K);return{path:k.concat(M.reverse()),lca:_}}function A(E){var T={},B=0;function S(k){var M=B;p.forEach(E.children(k),S),T[k]={low:M,lim:B++}}return p.forEach(E.children(),S),T}},91753:(U,de,m)=>{"use strict";var p=m(43294),N=m(71310).Graph,I=m(8783);U.exports={positionX:he,findType1Conflicts:A,findType2Conflicts:E,addConflict:B,hasConflict:S,verticalAlignment:k,horizontalCompaction:M,alignCoordinates:K,findSmallestWidthAlignment:z,balance:_};function A(Y,X){var Z={};function ee(ie,ye){var fe=0,Re=0,Ve=ie.length,Oe=p.last(ye);return p.forEach(ye,function($e,Xe){var je=T(Y,$e),re=je?Y.node(je).order:Ve;(je||$e===Oe)&&(p.forEach(ye.slice(Re,Xe+1),function(ce){p.forEach(Y.predecessors(ce),function(ge){var Ne=Y.node(ge),Je=Ne.order;(Je<fe||re<Je)&&!(Ne.dummy&&Y.node(ce).dummy)&&B(Z,ge,ce)})}),Re=Xe+1,fe=re)}),ye}return p.reduce(X,ee),Z}function E(Y,X){var Z={};function ee(ye,fe,Re,Ve,Oe){var $e;p.forEach(p.range(fe,Re),function(Xe){$e=ye[Xe],Y.node($e).dummy&&p.forEach(Y.predecessors($e),function(je){var re=Y.node(je);re.dummy&&(re.order<Ve||re.order>Oe)&&B(Z,je,$e)})})}function ie(ye,fe){var Re=-1,Ve,Oe=0;return p.forEach(fe,function($e,Xe){if(Y.node($e).dummy==="border"){var je=Y.predecessors($e);je.length&&(Ve=Y.node(je[0]).order,ee(fe,Oe,Xe,Re,Ve),Oe=Xe,Re=Ve)}ee(fe,Oe,fe.length,Ve,ye.length)}),fe}return p.reduce(X,ie),Z}function T(Y,X){if(Y.node(X).dummy)return p.find(Y.predecessors(X),function(Z){return Y.node(Z).dummy})}function B(Y,X,Z){if(X>Z){var ee=X;X=Z,Z=ee}var ie=Y[X];ie||(Y[X]=ie={}),ie[Z]=!0}function S(Y,X,Z){if(X>Z){var ee=X;X=Z,Z=ee}return p.has(Y[X],Z)}function k(Y,X,Z,ee){var ie={},ye={},fe={};return p.forEach(X,function(Re){p.forEach(Re,function(Ve,Oe){ie[Ve]=Ve,ye[Ve]=Ve,fe[Ve]=Oe})}),p.forEach(X,function(Re){var Ve=-1;p.forEach(Re,function(Oe){var $e=ee(Oe);if($e.length){$e=p.sortBy($e,function(ge){return fe[ge]});for(var Xe=($e.length-1)/2,je=Math.floor(Xe),re=Math.ceil(Xe);je<=re;++je){var ce=$e[je];ye[Oe]===Oe&&Ve<fe[ce]&&!S(Z,Oe,ce)&&(ye[ce]=Oe,ye[Oe]=ie[Oe]=ie[ce],Ve=fe[ce])}}})}),{root:ie,align:ye}}function M(Y,X,Z,ee,ie){var ye={},fe=C(Y,X,Z,ie),Re=ie?"borderLeft":"borderRight";function Ve(Xe,je){for(var re=fe.nodes(),ce=re.pop(),ge={};ce;)ge[ce]?Xe(ce):(ge[ce]=!0,re.push(ce),re=re.concat(je(ce))),ce=re.pop()}function Oe(Xe){ye[Xe]=fe.inEdges(Xe).reduce(function(je,re){return Math.max(je,ye[re.v]+fe.edge(re))},0)}function $e(Xe){var je=fe.outEdges(Xe).reduce(function(ce,ge){return Math.min(ce,ye[ge.w]-fe.edge(ge))},Number.POSITIVE_INFINITY),re=Y.node(Xe);je!==Number.POSITIVE_INFINITY&&re.borderType!==Re&&(ye[Xe]=Math.max(ye[Xe],je))}return Ve(Oe,fe.predecessors.bind(fe)),Ve($e,fe.successors.bind(fe)),p.forEach(ee,function(Xe){ye[Xe]=ye[Z[Xe]]}),ye}function C(Y,X,Z,ee){var ie=new N,ye=Y.graph(),fe=te(ye.nodesep,ye.edgesep,ee);return p.forEach(X,function(Re){var Ve;p.forEach(Re,function(Oe){var $e=Z[Oe];if(ie.setNode($e),Ve){var Xe=Z[Ve],je=ie.edge(Xe,$e);ie.setEdge(Xe,$e,Math.max(fe(Y,Oe,Ve),je||0))}Ve=Oe})}),ie}function z(Y,X){return p.minBy(p.values(X),function(Z){var ee=Number.NEGATIVE_INFINITY,ie=Number.POSITIVE_INFINITY;return p.forIn(Z,function(ye,fe){var Re=j(Y,fe)/2;ee=Math.max(ye+Re,ee),ie=Math.min(ye-Re,ie)}),ee-ie})}function K(Y,X){var Z=p.values(X),ee=p.min(Z),ie=p.max(Z);p.forEach(["u","d"],function(ye){p.forEach(["l","r"],function(fe){var Re=ye+fe,Ve=Y[Re],Oe;if(Ve!==X){var $e=p.values(Ve);Oe=fe==="l"?ee-p.min($e):ie-p.max($e),Oe&&(Y[Re]=p.mapValues(Ve,function(Xe){return Xe+Oe}))}})})}function _(Y,X){return p.mapValues(Y.ul,function(Z,ee){if(X)return Y[X.toLowerCase()][ee];var ie=p.sortBy(p.map(Y,ee));return(ie[1]+ie[2])/2})}function he(Y){var X=I.buildLayerMatrix(Y),Z=p.merge(A(Y,X),E(Y,X)),ee={},ie;p.forEach(["u","d"],function(fe){ie=fe==="u"?X:p.values(X).reverse(),p.forEach(["l","r"],function(Re){Re==="r"&&(ie=p.map(ie,function(Xe){return p.values(Xe).reverse()}));var Ve=(fe==="u"?Y.predecessors:Y.successors).bind(Y),Oe=k(Y,ie,Z,Ve),$e=M(Y,ie,Oe.root,Oe.align,Re==="r");Re==="r"&&($e=p.mapValues($e,function(Xe){return-Xe})),ee[fe+Re]=$e})});var ye=z(Y,ee);return K(ee,ye),_(ee,Y.graph().align)}function te(Y,X,Z){return function(ee,ie,ye){var fe=ee.node(ie),Re=ee.node(ye),Ve=0,Oe;if(Ve+=fe.width/2,p.has(fe,"labelpos"))switch(fe.labelpos.toLowerCase()){case"l":Oe=-fe.width/2;break;case"r":Oe=fe.width/2;break}if(Oe&&(Ve+=Z?Oe:-Oe),Oe=0,Ve+=(fe.dummy?X:Y)/2,Ve+=(Re.dummy?X:Y)/2,Ve+=Re.width/2,p.has(Re,"labelpos"))switch(Re.labelpos.toLowerCase()){case"l":Oe=Re.width/2;break;case"r":Oe=-Re.width/2;break}return Oe&&(Ve+=Z?Oe:-Oe),Oe=0,Ve}}function j(Y,X){return Y.node(X).width}},65784:(U,de,m)=>{"use strict";var p=m(43294),N=m(8783),I=m(91753).positionX;U.exports=A;function A(T){T=N.asNonCompoundGraph(T),E(T),p.forEach(I(T),function(B,S){T.node(S).x=B})}function E(T){var B=N.buildLayerMatrix(T),S=T.graph().ranksep,k=0;p.forEach(B,function(M){var C=p.max(p.map(M,function(z){return T.node(z).height}));p.forEach(M,function(z){T.node(z).y=k+C/2}),k+=C+S})}},49154:(U,de,m)=>{"use strict";var p=m(43294),N=m(71310).Graph,I=m(85986).slack;U.exports=A;function A(S){var k=new N({directed:!1}),M=S.nodes()[0],C=S.nodeCount();k.setNode(M,{});for(var z,K;E(k,S)<C;)z=T(k,S),K=k.hasNode(z.v)?I(S,z):-I(S,z),B(k,S,K);return k}function E(S,k){function M(C){p.forEach(k.nodeEdges(C),function(z){var K=z.v,_=C===K?z.w:K;!S.hasNode(_)&&!I(k,z)&&(S.setNode(_,{}),S.setEdge(C,_,{}),M(_))})}return p.forEach(S.nodes(),M),S.nodeCount()}function T(S,k){return p.minBy(k.edges(),function(M){if(S.hasNode(M.v)!==S.hasNode(M.w))return I(k,M)})}function B(S,k,M){p.forEach(S.nodes(),function(C){k.node(C).rank+=M})}},64618:(U,de,m)=>{"use strict";var p=m(85986),N=p.longestPath,I=m(49154),A=m(57310);U.exports=E;function E(k){switch(k.graph().ranker){case"network-simplex":S(k);break;case"tight-tree":B(k);break;case"longest-path":T(k);break;default:S(k)}}var T=N;function B(k){N(k),I(k)}function S(k){A(k)}},57310:(U,de,m)=>{"use strict";var p=m(43294),N=m(49154),I=m(85986).slack,A=m(85986).longestPath,E=m(71310).alg.preorder,T=m(71310).alg.postorder,B=m(8783).simplify;U.exports=S,S.initLowLimValues=z,S.initCutValues=k,S.calcCutValue=C,S.leaveEdge=_,S.enterEdge=he,S.exchangeEdges=te;function S(Z){Z=B(Z),A(Z);var ee=N(Z);z(ee),k(ee,Z);for(var ie,ye;ie=_(ee);)ye=he(ee,Z,ie),te(ee,Z,ie,ye)}function k(Z,ee){var ie=T(Z,Z.nodes());ie=ie.slice(0,ie.length-1),p.forEach(ie,function(ye){M(Z,ee,ye)})}function M(Z,ee,ie){var ye=Z.node(ie),fe=ye.parent;Z.edge(ie,fe).cutvalue=C(Z,ee,ie)}function C(Z,ee,ie){var ye=Z.node(ie),fe=ye.parent,Re=!0,Ve=ee.edge(ie,fe),Oe=0;return Ve||(Re=!1,Ve=ee.edge(fe,ie)),Oe=Ve.weight,p.forEach(ee.nodeEdges(ie),function($e){var Xe=$e.v===ie,je=Xe?$e.w:$e.v;if(je!==fe){var re=Xe===Re,ce=ee.edge($e).weight;if(Oe+=re?ce:-ce,Y(Z,ie,je)){var ge=Z.edge(ie,je).cutvalue;Oe+=re?-ge:ge}}}),Oe}function z(Z,ee){arguments.length<2&&(ee=Z.nodes()[0]),K(Z,{},1,ee)}function K(Z,ee,ie,ye,fe){var Re=ie,Ve=Z.node(ye);return ee[ye]=!0,p.forEach(Z.neighbors(ye),function(Oe){p.has(ee,Oe)||(ie=K(Z,ee,ie,Oe,ye))}),Ve.low=Re,Ve.lim=ie++,fe?Ve.parent=fe:delete Ve.parent,ie}function _(Z){return p.find(Z.edges(),function(ee){return Z.edge(ee).cutvalue<0})}function he(Z,ee,ie){var ye=ie.v,fe=ie.w;ee.hasEdge(ye,fe)||(ye=ie.w,fe=ie.v);var Re=Z.node(ye),Ve=Z.node(fe),Oe=Re,$e=!1;Re.lim>Ve.lim&&(Oe=Ve,$e=!0);var Xe=p.filter(ee.edges(),function(je){return $e===X(Z,Z.node(je.v),Oe)&&$e!==X(Z,Z.node(je.w),Oe)});return p.minBy(Xe,function(je){return I(ee,je)})}function te(Z,ee,ie,ye){var fe=ie.v,Re=ie.w;Z.removeEdge(fe,Re),Z.setEdge(ye.v,ye.w,{}),z(Z),k(Z,ee),j(Z,ee)}function j(Z,ee){var ie=p.find(Z.nodes(),function(fe){return!ee.node(fe).parent}),ye=E(Z,ie);ye=ye.slice(1),p.forEach(ye,function(fe){var Re=Z.node(fe).parent,Ve=ee.edge(fe,Re),Oe=!1;Ve||(Ve=ee.edge(Re,fe),Oe=!0),ee.node(fe).rank=ee.node(Re).rank+(Oe?Ve.minlen:-Ve.minlen)})}function Y(Z,ee,ie){return Z.hasEdge(ee,ie)}function X(Z,ee,ie){return ie.low<=ee.lim&&ee.lim<=ie.lim}},85986:(U,de,m)=>{"use strict";var p=m(43294);U.exports={longestPath:N,slack:I};function N(A){var E={};function T(B){var S=A.node(B);if(p.has(E,B))return S.rank;E[B]=!0;var k=p.min(p.map(A.outEdges(B),function(M){return T(M.w)-A.edge(M).minlen}));return(k===Number.POSITIVE_INFINITY||k===void 0||k===null)&&(k=0),S.rank=k}p.forEach(A.sources(),T)}function I(A,E){return A.node(E.w).rank-A.node(E.v).rank-A.edge(E).minlen}},8783:(U,de,m)=>{"use strict";var p=m(43294),N=m(71310).Graph;U.exports={addDummyNode:I,simplify:A,asNonCompoundGraph:E,successorWeights:T,predecessorWeights:B,intersectRect:S,buildLayerMatrix:k,normalizeRanks:M,removeEmptyRanks:C,addBorderNode:z,maxRank:K,partition:_,time:he,notime:te};function I(j,Y,X,Z){var ee;do ee=p.uniqueId(Z);while(j.hasNode(ee));return X.dummy=Y,j.setNode(ee,X),ee}function A(j){var Y=new N().setGraph(j.graph());return p.forEach(j.nodes(),function(X){Y.setNode(X,j.node(X))}),p.forEach(j.edges(),function(X){var Z=Y.edge(X.v,X.w)||{weight:0,minlen:1},ee=j.edge(X);Y.setEdge(X.v,X.w,{weight:Z.weight+ee.weight,minlen:Math.max(Z.minlen,ee.minlen)})}),Y}function E(j){var Y=new N({multigraph:j.isMultigraph()}).setGraph(j.graph());return p.forEach(j.nodes(),function(X){j.children(X).length||Y.setNode(X,j.node(X))}),p.forEach(j.edges(),function(X){Y.setEdge(X,j.edge(X))}),Y}function T(j){var Y=p.map(j.nodes(),function(X){var Z={};return p.forEach(j.outEdges(X),function(ee){Z[ee.w]=(Z[ee.w]||0)+j.edge(ee).weight}),Z});return p.zipObject(j.nodes(),Y)}function B(j){var Y=p.map(j.nodes(),function(X){var Z={};return p.forEach(j.inEdges(X),function(ee){Z[ee.v]=(Z[ee.v]||0)+j.edge(ee).weight}),Z});return p.zipObject(j.nodes(),Y)}function S(j,Y){var X=j.x,Z=j.y,ee=Y.x-X,ie=Y.y-Z,ye=j.width/2,fe=j.height/2;if(!ee&&!ie)throw new Error("Not possible to find intersection inside of the rectangle");var Re,Ve;return Math.abs(ie)*ye>Math.abs(ee)*fe?(ie<0&&(fe=-fe),Re=fe*ee/ie,Ve=fe):(ee<0&&(ye=-ye),Re=ye,Ve=ye*ie/ee),{x:X+Re,y:Z+Ve}}function k(j){var Y=p.map(p.range(K(j)+1),function(){return[]});return p.forEach(j.nodes(),function(X){var Z=j.node(X),ee=Z.rank;p.isUndefined(ee)||(Y[ee][Z.order]=X)}),Y}function M(j){var Y=p.min(p.map(j.nodes(),function(X){return j.node(X).rank}));p.forEach(j.nodes(),function(X){var Z=j.node(X);p.has(Z,"rank")&&(Z.rank-=Y)})}function C(j){var Y=p.min(p.map(j.nodes(),function(ie){return j.node(ie).rank})),X=[];p.forEach(j.nodes(),function(ie){var ye=j.node(ie).rank-Y;X[ye]||(X[ye]=[]),X[ye].push(ie)});var Z=0,ee=j.graph().nodeRankFactor;p.forEach(X,function(ie,ye){p.isUndefined(ie)&&ye%ee!==0?--Z:Z&&p.forEach(ie,function(fe){j.node(fe).rank+=Z})})}function z(j,Y,X,Z){var ee={width:0,height:0};return arguments.length>=4&&(ee.rank=X,ee.order=Z),I(j,"border",ee,Y)}function K(j){return p.max(p.map(j.nodes(),function(Y){var X=j.node(Y).rank;if(!p.isUndefined(X))return X}))}function _(j,Y){var X={lhs:[],rhs:[]};return p.forEach(j,function(Z){Y(Z)?X.lhs.push(Z):X.rhs.push(Z)}),X}function he(j,Y){var X=p.now();try{return Y()}finally{console.log(j+" time: "+(p.now()-X)+"ms")}}function te(j,Y){return Y()}},57589:U=>{U.exports="0.8.5"},87377:(U,de,m)=>{var p=m(89);U.exports={Graph:p.Graph,json:m(80109),alg:m(577),version:p.version}},95189:(U,de,m)=>{var p=m(60274);U.exports=N;function N(I){var A={},E=[],T;function B(S){p.has(A,S)||(A[S]=!0,T.push(S),p.each(I.successors(S),B),p.each(I.predecessors(S),B))}return p.each(I.nodes(),function(S){T=[],B(S),T.length&&E.push(T)}),E}},70223:(U,de,m)=>{var p=m(60274);U.exports=N;function N(A,E,T){p.isArray(E)||(E=[E]);var B=(A.isDirected()?A.successors:A.neighbors).bind(A),S=[],k={};return p.each(E,function(M){if(!A.hasNode(M))throw new Error("Graph does not have node: "+M);I(A,M,T==="post",k,B,S)}),S}function I(A,E,T,B,S,k){p.has(B,E)||(B[E]=!0,T||k.push(E),p.each(S(E),function(M){I(A,M,T,B,S,k)}),T&&k.push(E))}},19487:(U,de,m)=>{var p=m(16493),N=m(60274);U.exports=I;function I(A,E,T){return N.transform(A.nodes(),function(B,S){B[S]=p(A,S,E,T)},{})}},16493:(U,de,m)=>{var p=m(60274),N=m(70905);U.exports=A;var I=p.constant(1);function A(T,B,S,k){return E(T,String(B),S||I,k||function(M){return T.outEdges(M)})}function E(T,B,S,k){var M={},C=new N,z,K,_=function(he){var te=he.v!==z?he.v:he.w,j=M[te],Y=S(he),X=K.distance+Y;if(Y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+he+" Weight: "+Y);X<j.distance&&(j.distance=X,j.predecessor=z,C.decrease(te,X))};for(T.nodes().forEach(function(he){var te=he===B?0:Number.POSITIVE_INFINITY;M[he]={distance:te},C.add(he,te)});C.size()>0&&(z=C.removeMin(),K=M[z],K.distance!==Number.POSITIVE_INFINITY);)k(z).forEach(_);return M}},24395:(U,de,m)=>{var p=m(60274),N=m(99289);U.exports=I;function I(A){return p.filter(N(A),function(E){return E.length>1||E.length===1&&A.hasEdge(E[0],E[0])})}},92077:(U,de,m)=>{var p=m(60274);U.exports=I;var N=p.constant(1);function I(E,T,B){return A(E,T||N,B||function(S){return E.outEdges(S)})}function A(E,T,B){var S={},k=E.nodes();return k.forEach(function(M){S[M]={},S[M][M]={distance:0},k.forEach(function(C){M!==C&&(S[M][C]={distance:Number.POSITIVE_INFINITY})}),B(M).forEach(function(C){var z=C.v===M?C.w:C.v,K=T(C);S[M][z]={distance:K,predecessor:M}})}),k.forEach(function(M){var C=S[M];k.forEach(function(z){var K=S[z];k.forEach(function(_){var he=K[M],te=C[_],j=K[_],Y=he.distance+te.distance;Y<j.distance&&(j.distance=Y,j.predecessor=te.predecessor)})})}),S}},577:(U,de,m)=>{U.exports={components:m(95189),dijkstra:m(16493),dijkstraAll:m(19487),findCycles:m(24395),floydWarshall:m(92077),isAcyclic:m(67141),postorder:m(34825),preorder:m(78852),prim:m(78492),tarjan:m(99289),topsort:m(69176)}},67141:(U,de,m)=>{var p=m(69176);U.exports=N;function N(I){try{p(I)}catch(A){if(A instanceof p.CycleException)return!1;throw A}return!0}},34825:(U,de,m)=>{var p=m(70223);U.exports=N;function N(I,A){return p(I,A,"post")}},78852:(U,de,m)=>{var p=m(70223);U.exports=N;function N(I,A){return p(I,A,"pre")}},78492:(U,de,m)=>{var p=m(60274),N=m(53099),I=m(70905);U.exports=A;function A(E,T){var B=new N,S={},k=new I,M;function C(K){var _=K.v===M?K.w:K.v,he=k.priority(_);if(he!==void 0){var te=T(K);te<he&&(S[_]=M,k.decrease(_,te))}}if(E.nodeCount()===0)return B;p.each(E.nodes(),function(K){k.add(K,Number.POSITIVE_INFINITY),B.setNode(K)}),k.decrease(E.nodes()[0],0);for(var z=!1;k.size()>0;){if(M=k.removeMin(),p.has(S,M))B.setEdge(M,S[M]);else{if(z)throw new Error("Input graph is not connected: "+E);z=!0}E.nodeEdges(M).forEach(C)}return B}},99289:(U,de,m)=>{var p=m(60274);U.exports=N;function N(I){var A=0,E=[],T={},B=[];function S(k){var M=T[k]={onStack:!0,lowlink:A,index:A++};if(E.push(k),I.successors(k).forEach(function(K){p.has(T,K)?T[K].onStack&&(M.lowlink=Math.min(M.lowlink,T[K].index)):(S(K),M.lowlink=Math.min(M.lowlink,T[K].lowlink))}),M.lowlink===M.index){var C=[],z;do z=E.pop(),T[z].onStack=!1,C.push(z);while(k!==z);B.push(C)}}return I.nodes().forEach(function(k){p.has(T,k)||S(k)}),B}},69176:(U,de,m)=>{var p=m(60274);U.exports=N,N.CycleException=I;function N(A){var E={},T={},B=[];function S(k){if(p.has(T,k))throw new I;p.has(E,k)||(T[k]=!0,E[k]=!0,p.each(A.predecessors(k),S),delete T[k],B.push(k))}if(p.each(A.sinks(),S),p.size(E)!==A.nodeCount())throw new I;return B}function I(){}I.prototype=new Error},70905:(U,de,m)=>{var p=m(60274);U.exports=N;function N(){this._arr=[],this._keyIndices={}}N.prototype.size=function(){return this._arr.length},N.prototype.keys=function(){return this._arr.map(function(I){return I.key})},N.prototype.has=function(I){return p.has(this._keyIndices,I)},N.prototype.priority=function(I){var A=this._keyIndices[I];if(A!==void 0)return this._arr[A].priority},N.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},N.prototype.add=function(I,A){var E=this._keyIndices;if(I=String(I),!p.has(E,I)){var T=this._arr,B=T.length;return E[I]=B,T.push({key:I,priority:A}),this._decrease(B),!0}return!1},N.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var I=this._arr.pop();return delete this._keyIndices[I.key],this._heapify(0),I.key},N.prototype.decrease=function(I,A){var E=this._keyIndices[I];if(A>this._arr[E].priority)throw new Error("New priority is greater than current priority. Key: "+I+" Old: "+this._arr[E].priority+" New: "+A);this._arr[E].priority=A,this._decrease(E)},N.prototype._heapify=function(I){var A=this._arr,E=2*I,T=E+1,B=I;E<A.length&&(B=A[E].priority<A[B].priority?E:B,T<A.length&&(B=A[T].priority<A[B].priority?T:B),B!==I&&(this._swap(I,B),this._heapify(B)))},N.prototype._decrease=function(I){for(var A=this._arr,E=A[I].priority,T;I!==0&&(T=I>>1,!(A[T].priority<E));)this._swap(I,T),I=T},N.prototype._swap=function(I,A){var E=this._arr,T=this._keyIndices,B=E[I],S=E[A];E[I]=S,E[A]=B,T[S.key]=I,T[B.key]=A}},53099:(U,de,m)=>{"use strict";var p=m(60274);U.exports=E;var N="\0",I="\0",A="";function E(C){this._isDirected=p.has(C,"directed")?C.directed:!0,this._isMultigraph=p.has(C,"multigraph")?C.multigraph:!1,this._isCompound=p.has(C,"compound")?C.compound:!1,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[I]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}E.prototype._nodeCount=0,E.prototype._edgeCount=0,E.prototype.isDirected=function(){return this._isDirected},E.prototype.isMultigraph=function(){return this._isMultigraph},E.prototype.isCompound=function(){return this._isCompound},E.prototype.setGraph=function(C){return this._label=C,this},E.prototype.graph=function(){return this._label},E.prototype.setDefaultNodeLabel=function(C){return p.isFunction(C)||(C=p.constant(C)),this._defaultNodeLabelFn=C,this},E.prototype.nodeCount=function(){return this._nodeCount},E.prototype.nodes=function(){return p.keys(this._nodes)},E.prototype.sources=function(){var C=this;return p.filter(this.nodes(),function(z){return p.isEmpty(C._in[z])})},E.prototype.sinks=function(){var C=this;return p.filter(this.nodes(),function(z){return p.isEmpty(C._out[z])})},E.prototype.setNodes=function(C,z){var K=arguments,_=this;return p.each(C,function(he){K.length>1?_.setNode(he,z):_.setNode(he)}),this},E.prototype.setNode=function(C,z){return p.has(this._nodes,C)?(arguments.length>1&&(this._nodes[C]=z),this):(this._nodes[C]=arguments.length>1?z:this._defaultNodeLabelFn(C),this._isCompound&&(this._parent[C]=I,this._children[C]={},this._children[I][C]=!0),this._in[C]={},this._preds[C]={},this._out[C]={},this._sucs[C]={},++this._nodeCount,this)},E.prototype.node=function(C){return this._nodes[C]},E.prototype.hasNode=function(C){return p.has(this._nodes,C)},E.prototype.removeNode=function(C){var z=this;if(p.has(this._nodes,C)){var K=function(_){z.removeEdge(z._edgeObjs[_])};delete this._nodes[C],this._isCompound&&(this._removeFromParentsChildList(C),delete this._parent[C],p.each(this.children(C),function(_){z.setParent(_)}),delete this._children[C]),p.each(p.keys(this._in[C]),K),delete this._in[C],delete this._preds[C],p.each(p.keys(this._out[C]),K),delete this._out[C],delete this._sucs[C],--this._nodeCount}return this},E.prototype.setParent=function(C,z){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(z))z=I;else{z+="";for(var K=z;!p.isUndefined(K);K=this.parent(K))if(K===C)throw new Error("Setting "+z+" as parent of "+C+" would create a cycle");this.setNode(z)}return this.setNode(C),this._removeFromParentsChildList(C),this._parent[C]=z,this._children[z][C]=!0,this},E.prototype._removeFromParentsChildList=function(C){delete this._children[this._parent[C]][C]},E.prototype.parent=function(C){if(this._isCompound){var z=this._parent[C];if(z!==I)return z}},E.prototype.children=function(C){if(p.isUndefined(C)&&(C=I),this._isCompound){var z=this._children[C];if(z)return p.keys(z)}else{if(C===I)return this.nodes();if(this.hasNode(C))return[]}},E.prototype.predecessors=function(C){var z=this._preds[C];if(z)return p.keys(z)},E.prototype.successors=function(C){var z=this._sucs[C];if(z)return p.keys(z)},E.prototype.neighbors=function(C){var z=this.predecessors(C);if(z)return p.union(z,this.successors(C))},E.prototype.isLeaf=function(C){var z;return this.isDirected()?z=this.successors(C):z=this.neighbors(C),z.length===0},E.prototype.filterNodes=function(C){var z=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});z.setGraph(this.graph());var K=this;p.each(this._nodes,function(te,j){C(j)&&z.setNode(j,te)}),p.each(this._edgeObjs,function(te){z.hasNode(te.v)&&z.hasNode(te.w)&&z.setEdge(te,K.edge(te))});var _={};function he(te){var j=K.parent(te);return j===void 0||z.hasNode(j)?(_[te]=j,j):j in _?_[j]:he(j)}return this._isCompound&&p.each(z.nodes(),function(te){z.setParent(te,he(te))}),z},E.prototype.setDefaultEdgeLabel=function(C){return p.isFunction(C)||(C=p.constant(C)),this._defaultEdgeLabelFn=C,this},E.prototype.edgeCount=function(){return this._edgeCount},E.prototype.edges=function(){return p.values(this._edgeObjs)},E.prototype.setPath=function(C,z){var K=this,_=arguments;return p.reduce(C,function(he,te){return _.length>1?K.setEdge(he,te,z):K.setEdge(he,te),te}),this},E.prototype.setEdge=function(){var C,z,K,_,he=!1,te=arguments[0];typeof te=="object"&&te!==null&&"v"in te?(C=te.v,z=te.w,K=te.name,arguments.length===2&&(_=arguments[1],he=!0)):(C=te,z=arguments[1],K=arguments[3],arguments.length>2&&(_=arguments[2],he=!0)),C=""+C,z=""+z,p.isUndefined(K)||(K=""+K);var j=S(this._isDirected,C,z,K);if(p.has(this._edgeLabels,j))return he&&(this._edgeLabels[j]=_),this;if(!p.isUndefined(K)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(C),this.setNode(z),this._edgeLabels[j]=he?_:this._defaultEdgeLabelFn(C,z,K);var Y=k(this._isDirected,C,z,K);return C=Y.v,z=Y.w,Object.freeze(Y),this._edgeObjs[j]=Y,T(this._preds[z],C),T(this._sucs[C],z),this._in[z][j]=Y,this._out[C][j]=Y,this._edgeCount++,this},E.prototype.edge=function(C,z,K){var _=arguments.length===1?M(this._isDirected,arguments[0]):S(this._isDirected,C,z,K);return this._edgeLabels[_]},E.prototype.hasEdge=function(C,z,K){var _=arguments.length===1?M(this._isDirected,arguments[0]):S(this._isDirected,C,z,K);return p.has(this._edgeLabels,_)},E.prototype.removeEdge=function(C,z,K){var _=arguments.length===1?M(this._isDirected,arguments[0]):S(this._isDirected,C,z,K),he=this._edgeObjs[_];return he&&(C=he.v,z=he.w,delete this._edgeLabels[_],delete this._edgeObjs[_],B(this._preds[z],C),B(this._sucs[C],z),delete this._in[z][_],delete this._out[C][_],this._edgeCount--),this},E.prototype.inEdges=function(C,z){var K=this._in[C];if(K){var _=p.values(K);return z?p.filter(_,function(he){return he.v===z}):_}},E.prototype.outEdges=function(C,z){var K=this._out[C];if(K){var _=p.values(K);return z?p.filter(_,function(he){return he.w===z}):_}},E.prototype.nodeEdges=function(C,z){var K=this.inEdges(C,z);if(K)return K.concat(this.outEdges(C,z))};function T(C,z){C[z]?C[z]++:C[z]=1}function B(C,z){--C[z]||delete C[z]}function S(C,z,K,_){var he=""+z,te=""+K;if(!C&&he>te){var j=he;he=te,te=j}return he+A+te+A+(p.isUndefined(_)?N:_)}function k(C,z,K,_){var he=""+z,te=""+K;if(!C&&he>te){var j=he;he=te,te=j}var Y={v:he,w:te};return _&&(Y.name=_),Y}function M(C,z){return S(C,z.v,z.w,z.name)}},89:(U,de,m)=>{U.exports={Graph:m(53099),version:m(90702)}},80109:(U,de,m)=>{var p=m(60274),N=m(53099);U.exports={write:I,read:T};function I(B){var S={options:{directed:B.isDirected(),multigraph:B.isMultigraph(),compound:B.isCompound()},nodes:A(B),edges:E(B)};return p.isUndefined(B.graph())||(S.value=p.clone(B.graph())),S}function A(B){return p.map(B.nodes(),function(S){var k=B.node(S),M=B.parent(S),C={v:S};return p.isUndefined(k)||(C.value=k),p.isUndefined(M)||(C.parent=M),C})}function E(B){return p.map(B.edges(),function(S){var k=B.edge(S),M={v:S.v,w:S.w};return p.isUndefined(S.name)||(M.name=S.name),p.isUndefined(k)||(M.value=k),M})}function T(B){var S=new N(B.options).setGraph(B.value);return p.each(B.nodes,function(k){S.setNode(k.v,k.value),k.parent&&S.setParent(k.v,k.parent)}),p.each(B.edges,function(k){S.setEdge({v:k.v,w:k.w,name:k.name},k.value)}),S}},60274:(U,de,m)=>{var p;try{p={clone:m(54004),constant:m(86874),each:m(79421),filter:m(90882),has:m(93352),isArray:m(86152),isEmpty:m(45455),isFunction:m(61049),isUndefined:m(84336),keys:m(90249),map:m(16760),reduce:m(58215),size:m(36402),transform:m(89466),union:m(26139),values:m(98346)}}catch{}p||(p=window._),U.exports=p},90702:U=>{U.exports="2.1.8"},71254:(U,de,m)=>{U.exports=m(38397)},38397:function(U,de){var m,p,N;(function(){var I,A,E,T,B,S,k,M,C,z,K,_,he,te,j;E=Math.floor,z=Math.min,A=function(Y,X){return Y<X?-1:Y>X?1:0},C=function(Y,X,Z,ee,ie){var ye;if(Z==null&&(Z=0),ie==null&&(ie=A),Z<0)throw new Error("lo must be non-negative");for(ee==null&&(ee=Y.length);Z<ee;)ye=E((Z+ee)/2),ie(X,Y[ye])<0?ee=ye:Z=ye+1;return[].splice.apply(Y,[Z,Z-Z].concat(X)),X},S=function(Y,X,Z){return Z==null&&(Z=A),Y.push(X),te(Y,0,Y.length-1,Z)},B=function(Y,X){var Z,ee;return X==null&&(X=A),Z=Y.pop(),Y.length?(ee=Y[0],Y[0]=Z,j(Y,0,X)):ee=Z,ee},M=function(Y,X,Z){var ee;return Z==null&&(Z=A),ee=Y[0],Y[0]=X,j(Y,0,Z),ee},k=function(Y,X,Z){var ee;return Z==null&&(Z=A),Y.length&&Z(Y[0],X)<0&&(ee=[Y[0],X],X=ee[0],Y[0]=ee[1],j(Y,0,Z)),X},T=function(Y,X){var Z,ee,ie,ye,fe,Re,Ve,Oe;for(X==null&&(X=A),Re=function(){Oe=[];for(var $e=0,Xe=E(Y.length/2);0<=Xe?$e<Xe:$e>Xe;0<=Xe?$e++:$e--)Oe.push($e);return Oe}.apply(this).reverse(),Ve=[],ee=0,ye=Re.length;ee<ye;ee++)Z=Re[ee],Ve.push(j(Y,Z,X));return Ve},he=function(Y,X,Z){var ee;if(Z==null&&(Z=A),ee=Y.indexOf(X),ee!==-1)return te(Y,0,ee,Z),j(Y,ee,Z)},K=function(Y,X,Z){var ee,ie,ye,fe,Re;if(Z==null&&(Z=A),ie=Y.slice(0,X),!ie.length)return ie;for(T(ie,Z),Re=Y.slice(X),ye=0,fe=Re.length;ye<fe;ye++)ee=Re[ye],k(ie,ee,Z);return ie.sort(Z).reverse()},_=function(Y,X,Z){var ee,ie,ye,fe,Re,Ve,Oe,$e,Xe,je;if(Z==null&&(Z=A),X*10<=Y.length){if(fe=Y.slice(0,X).sort(Z),!fe.length)return fe;for(ye=fe[fe.length-1],$e=Y.slice(X),Re=0,Oe=$e.length;Re<Oe;Re++)ee=$e[Re],Z(ee,ye)<0&&(C(fe,ee,0,null,Z),fe.pop(),ye=fe[fe.length-1]);return fe}for(T(Y,Z),je=[],ie=Ve=0,Xe=z(X,Y.length);0<=Xe?Ve<Xe:Ve>Xe;ie=0<=Xe?++Ve:--Ve)je.push(B(Y,Z));return je},te=function(Y,X,Z,ee){var ie,ye,fe;for(ee==null&&(ee=A),ie=Y[Z];Z>X;){if(fe=Z-1>>1,ye=Y[fe],ee(ie,ye)<0){Y[Z]=ye,Z=fe;continue}break}return Y[Z]=ie},j=function(Y,X,Z){var ee,ie,ye,fe,Re;for(Z==null&&(Z=A),ie=Y.length,Re=X,ye=Y[X],ee=2*X+1;ee<ie;)fe=ee+1,fe<ie&&!(Z(Y[ee],Y[fe])<0)&&(ee=fe),Y[X]=Y[ee],X=ee,ee=2*X+1;return Y[X]=ye,te(Y,Re,X,Z)},I=function(){Y.push=S,Y.pop=B,Y.replace=M,Y.pushpop=k,Y.heapify=T,Y.updateItem=he,Y.nlargest=K,Y.nsmallest=_;function Y(X){this.cmp=X??A,this.nodes=[]}return Y.prototype.push=function(X){return S(this.nodes,X,this.cmp)},Y.prototype.pop=function(){return B(this.nodes,this.cmp)},Y.prototype.peek=function(){return this.nodes[0]},Y.prototype.contains=function(X){return this.nodes.indexOf(X)!==-1},Y.prototype.replace=function(X){return M(this.nodes,X,this.cmp)},Y.prototype.pushpop=function(X){return k(this.nodes,X,this.cmp)},Y.prototype.heapify=function(){return T(this.nodes,this.cmp)},Y.prototype.updateItem=function(X){return he(this.nodes,X,this.cmp)},Y.prototype.clear=function(){return this.nodes=[]},Y.prototype.empty=function(){return this.nodes.length===0},Y.prototype.size=function(){return this.nodes.length},Y.prototype.clone=function(){var X;return X=new Y,X.nodes=this.nodes.slice(0),X},Y.prototype.toArray=function(){return this.nodes.slice(0)},Y.prototype.insert=Y.prototype.push,Y.prototype.top=Y.prototype.peek,Y.prototype.front=Y.prototype.peek,Y.prototype.has=Y.prototype.contains,Y.prototype.copy=Y.prototype.clone,Y}(),function(Y,X){return p=[],m=X,N=typeof m=="function"?m.apply(de,p):m,!(N!==void 0&&(U.exports=N))}(this,function(){return I})}).call(this)},38333:(U,de,m)=>{var p=m(77832);function N(I,A){var E=I==null?0:I.length;return!!E&&p(I,A,0)>-1}U.exports=N},34893:U=>{function de(m,p,N){for(var I=-1,A=m==null?0:m.length;++I<A;)if(N(p,m[I]))return!0;return!1}U.exports=de},81207:U=>{function de(m,p,N,I){var A=-1,E=m==null?0:m.length;for(I&&E&&(N=m[++A]);++A<E;)N=p(N,m[A],A,m);return N}U.exports=de},8589:(U,de,m)=>{var p=m(20256),N=p("length");U.exports=N},28582:(U,de,m)=>{var p=m(13940),N=m(41225);function I(A,E,T){(T!==void 0&&!N(A[E],T)||T===void 0&&!(E in A))&&p(A,E,T)}U.exports=I},2229:(U,de,m)=>{var p=m(4795);function N(I,A,E){for(var T=-1,B=I.length;++T<B;){var S=I[T],k=A(S);if(k!=null&&(M===void 0?k===k&&!p(k):E(k,M)))var M=k,C=S}return C}U.exports=N},53117:(U,de,m)=>{var p=m(24303);function N(I,A){var E=[];return p(I,function(T,B,S){A(T,B,S)&&E.push(T)}),E}U.exports=N},21359:U=>{function de(m,p,N,I){for(var A=m.length,E=N+(I?1:-1);I?E--:++E<A;)if(p(m[E],E,m))return E;return-1}U.exports=de},84134:U=>{function de(m,p){return m>p}U.exports=de},32726:U=>{var de=Object.prototype,m=de.hasOwnProperty;function p(N,I){return N!=null&&m.call(N,I)}U.exports=p},77832:(U,de,m)=>{var p=m(21359),N=m(22195),I=m(66024);function A(E,T,B){return T===T?I(E,T,B):p(E,N,B)}U.exports=A},22195:U=>{function de(m){return m!==m}U.exports=de},17606:U=>{function de(m,p){return m<p}U.exports=de},93401:(U,de,m)=>{var p=m(24303),N=m(67878);function I(A,E){var T=-1,B=N(A)?Array(A.length):[];return p(A,function(S,k,M){B[++T]=E(S,k,M)}),B}U.exports=I},84565:(U,de,m)=>{var p=m(86571),N=m(28582),I=m(15308),A=m(25561),E=m(29259),T=m(18582),B=m(52434);function S(k,M,C,z,K){k!==M&&I(M,function(_,he){if(K||(K=new p),E(_))A(k,M,he,C,S,z,K);else{var te=z?z(B(k,he),_,he+"",k,M,K):void 0;te===void 0&&(te=_),N(k,he,te)}},T)}U.exports=S},25561:(U,de,m)=>{var p=m(28582),N=m(92175),I=m(6190),A=m(51522),E=m(78725),T=m(79631),B=m(86152),S=m(93746),k=m(73226),M=m(61049),C=m(29259),z=m(97030),K=m(77598),_=m(52434),he=m(63329);function te(j,Y,X,Z,ee,ie,ye){var fe=_(j,X),Re=_(Y,X),Ve=ye.get(Re);if(Ve){p(j,X,Ve);return}var Oe=ie?ie(fe,Re,X+"",j,Y,ye):void 0,$e=Oe===void 0;if($e){var Xe=B(Re),je=!Xe&&k(Re),re=!Xe&&!je&&K(Re);Oe=Re,Xe||je||re?B(fe)?Oe=fe:S(fe)?Oe=A(fe):je?($e=!1,Oe=N(Re,!0)):re?($e=!1,Oe=I(Re,!0)):Oe=[]:z(Re)||T(Re)?(Oe=fe,T(fe)?Oe=he(fe):(!C(fe)||M(fe))&&(Oe=E(Re))):$e=!1}$e&&(ye.set(Re,Oe),ee(Oe,Re,Z,ie,ye),ye.delete(Re)),p(j,X,Oe)}U.exports=te},23813:(U,de,m)=>{var p=m(50343),N=m(13324),I=m(68286),A=m(93401),E=m(27095),T=m(47826),B=m(18477),S=m(23059),k=m(86152);function M(C,z,K){z.length?z=p(z,function(te){return k(te)?function(j){return N(j,te.length===1?te[0]:te)}:te}):z=[S];var _=-1;z=p(z,T(I));var he=A(C,function(te,j,Y){var X=p(z,function(Z){return Z(te)});return{criteria:X,index:++_,value:te}});return E(he,function(te,j){return B(te,j,K)})}U.exports=M},92602:(U,de,m)=>{var p=m(93759),N=m(95041);function I(A,E){return p(A,E,function(T,B){return N(A,B)})}U.exports=I},93228:U=>{var de=Math.ceil,m=Math.max;function p(N,I,A,E){for(var T=-1,B=m(de((I-N)/(A||1)),0),S=Array(B);B--;)S[E?B:++T]=N,N+=A;return S}U.exports=p},5877:U=>{function de(m,p,N,I,A){return A(m,function(E,T,B){N=I?(I=!1,E):p(N,E,T,B)}),N}U.exports=de},27095:U=>{function de(m,p){var N=m.length;for(m.sort(p);N--;)m[N]=m[N].value;return m}U.exports=de},67326:(U,de,m)=>{var p=m(45386),N=m(38333),I=m(34893),A=m(59950),E=m(78803),T=m(16909),B=200;function S(k,M,C){var z=-1,K=N,_=k.length,he=!0,te=[],j=te;if(C)he=!1,K=I;else if(_>=B){var Y=M?null:E(k);if(Y)return T(Y);he=!1,K=A,j=new p}else j=M?[]:te;e:for(;++z<_;){var X=k[z],Z=M?M(X):X;if(X=C||X!==0?X:0,he&&Z===Z){for(var ee=j.length;ee--;)if(j[ee]===Z)continue e;M&&j.push(Z),te.push(X)}else K(j,Z,C)||(j!==te&&j.push(Z),te.push(X))}return te}U.exports=S},40509:U=>{function de(m,p,N){for(var I=-1,A=m.length,E=p.length,T={};++I<A;){var B=I<E?p[I]:void 0;N(T,m[I],B)}return T}U.exports=de},89419:(U,de,m)=>{var p=m(23059);function N(I){return typeof I=="function"?I:p}U.exports=N},27520:(U,de,m)=>{var p=m(4795);function N(I,A){if(I!==A){var E=I!==void 0,T=I===null,B=I===I,S=p(I),k=A!==void 0,M=A===null,C=A===A,z=p(A);if(!M&&!z&&!S&&I>A||S&&k&&C&&!M&&!z||T&&k&&C||!E&&C||!B)return 1;if(!T&&!S&&!z&&I<A||z&&E&&B&&!T&&!S||M&&E&&B||!k&&B||!C)return-1}return 0}U.exports=N},18477:(U,de,m)=>{var p=m(27520);function N(I,A,E){for(var T=-1,B=I.criteria,S=A.criteria,k=B.length,M=E.length;++T<k;){var C=p(B[T],S[T]);if(C){if(T>=M)return C;var z=E[T];return C*(z=="desc"?-1:1)}}return I.index-A.index}U.exports=N},97263:(U,de,m)=>{var p=m(36060),N=m(82406);function I(A){return p(function(E,T){var B=-1,S=T.length,k=S>1?T[S-1]:void 0,M=S>2?T[2]:void 0;for(k=A.length>3&&typeof k=="function"?(S--,k):void 0,M&&N(T[0],T[1],M)&&(k=S<3?void 0:k,S=1),E=Object(E);++B<S;){var C=T[B];C&&A(E,C,B,k)}return E})}U.exports=I},98776:(U,de,m)=>{var p=m(68286),N=m(67878),I=m(90249);function A(E){return function(T,B,S){var k=Object(T);if(!N(T)){var M=p(B,3);T=I(T),B=function(z){return M(k[z],z,k)}}var C=E(T,B,S);return C>-1?k[M?T[C]:C]:void 0}}U.exports=A},82941:(U,de,m)=>{var p=m(93228),N=m(82406),I=m(5707);function A(E){return function(T,B,S){return S&&typeof S!="number"&&N(T,B,S)&&(B=S=void 0),T=I(T),B===void 0?(B=T,T=0):B=I(B),S=S===void 0?T<B?1:-1:I(S),p(T,B,S,E)}}U.exports=A},78803:(U,de,m)=>{var p=m(2143),N=m(34291),I=m(16909),A=1/0,E=p&&1/I(new p([,-0]))[1]==A?function(T){return new p(T)}:N;U.exports=E},29097:(U,de,m)=>{var p=m(35676),N=m(43114),I=m(75251);function A(E){return I(N(E,void 0,p),E+"")}U.exports=A},99836:U=>{var de="\\ud800-\\udfff",m="\\u0300-\\u036f",p="\\ufe20-\\ufe2f",N="\\u20d0-\\u20ff",I=m+p+N,A="\\ufe0e\\ufe0f",E="\\u200d",T=RegExp("["+E+de+I+A+"]");function B(S){return T.test(S)}U.exports=B},82406:(U,de,m)=>{var p=m(41225),N=m(67878),I=m(39045),A=m(29259);function E(T,B,S){if(!A(S))return!1;var k=typeof B;return(k=="number"?N(S)&&I(B,S.length):k=="string"&&B in S)?p(S[B],T):!1}U.exports=E},52434:U=>{function de(m,p){if(!(p==="constructor"&&typeof m[p]=="function")&&p!="__proto__")return m[p]}U.exports=de},66024:U=>{function de(m,p,N){for(var I=N-1,A=m.length;++I<A;)if(m[I]===p)return I;return-1}U.exports=de},82302:(U,de,m)=>{var p=m(8589),N=m(99836),I=m(35555);function A(E){return N(E)?I(E):p(E)}U.exports=A},35555:U=>{var de="\\ud800-\\udfff",m="\\u0300-\\u036f",p="\\ufe20-\\ufe2f",N="\\u20d0-\\u20ff",I=m+p+N,A="\\ufe0e\\ufe0f",E="["+de+"]",T="["+I+"]",B="\\ud83c[\\udffb-\\udfff]",S="(?:"+T+"|"+B+")",k="[^"+de+"]",M="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",z="\\u200d",K=S+"?",_="["+A+"]?",he="(?:"+z+"(?:"+[k,M,C].join("|")+")"+_+K+")*",te=_+K+he,j="(?:"+[k+T+"?",T,M,C,E].join("|")+")",Y=RegExp(B+"(?="+B+")|"+j+te,"g");function X(Z){for(var ee=Y.lastIndex=0;Y.test(Z);)++ee;return ee}U.exports=X},9850:(U,de,m)=>{var p=m(18874),N=1,I=4;function A(E){return p(E,N|I)}U.exports=A},84573:(U,de,m)=>{var p=m(36060),N=m(41225),I=m(82406),A=m(18582),E=Object.prototype,T=E.hasOwnProperty,B=p(function(S,k){S=Object(S);var M=-1,C=k.length,z=C>2?k[2]:void 0;for(z&&I(k[0],k[1],z)&&(C=1);++M<C;)for(var K=k[M],_=A(K),he=-1,te=_.length;++he<te;){var j=_[he],Y=S[j];(Y===void 0||N(Y,E[j])&&!T.call(S,j))&&(S[j]=K[j])}return S});U.exports=B},79421:(U,de,m)=>{U.exports=m(59756)},90882:(U,de,m)=>{var p=m(67552),N=m(53117),I=m(68286),A=m(86152);function E(T,B){var S=A(T)?p:N;return S(T,I(B,3))}U.exports=E},55281:(U,de,m)=>{var p=m(98776),N=m(12982),I=p(N);U.exports=I},12982:(U,de,m)=>{var p=m(21359),N=m(68286),I=m(38101),A=Math.max;function E(T,B,S){var k=T==null?0:T.length;if(!k)return-1;var M=S==null?0:I(S);return M<0&&(M=A(k+M,0)),p(T,N(B,3),M)}U.exports=E},59756:(U,de,m)=>{var p=m(72517),N=m(24303),I=m(89419),A=m(86152);function E(T,B){var S=A(T)?p:N;return S(T,I(B))}U.exports=E},20792:(U,de,m)=>{var p=m(15308),N=m(89419),I=m(18582);function A(E,T){return E==null?E:p(E,N(T),I)}U.exports=A},93352:(U,de,m)=>{var p=m(32726),N=m(1369);function I(A,E){return A!=null&&N(A,E,p)}U.exports=I},93746:(U,de,m)=>{var p=m(67878),N=m(15125);function I(A){return N(A)&&p(A)}U.exports=I},97030:(U,de,m)=>{var p=m(53366),N=m(47353),I=m(15125),A="[object Object]",E=Function.prototype,T=Object.prototype,B=E.toString,S=T.hasOwnProperty,k=B.call(Object);function M(C){if(!I(C)||p(C)!=A)return!1;var z=N(C);if(z===null)return!0;var K=S.call(z,"constructor")&&z.constructor;return typeof K=="function"&&K instanceof K&&B.call(K)==k}U.exports=M},85505:(U,de,m)=>{var p=m(53366),N=m(86152),I=m(15125),A="[object String]";function E(T){return typeof T=="string"||!N(T)&&I(T)&&p(T)==A}U.exports=E},84336:U=>{function de(m){return m===void 0}U.exports=de},16760:(U,de,m)=>{var p=m(50343),N=m(68286),I=m(93401),A=m(86152);function E(T,B){var S=A(T)?p:I;return S(T,N(B,3))}U.exports=E},34519:(U,de,m)=>{var p=m(13940),N=m(26548),I=m(68286);function A(E,T){var B={};return T=I(T,3),N(E,function(S,k,M){p(B,k,T(S,k,M))}),B}U.exports=A},71644:(U,de,m)=>{var p=m(2229),N=m(84134),I=m(23059);function A(E){return E&&E.length?p(E,I,N):void 0}U.exports=A},98537:(U,de,m)=>{var p=m(84565),N=m(97263),I=N(function(A,E,T){p(A,E,T)});U.exports=I},65680:(U,de,m)=>{var p=m(2229),N=m(17606),I=m(23059);function A(E){return E&&E.length?p(E,I,N):void 0}U.exports=A},10937:(U,de,m)=>{var p=m(2229),N=m(68286),I=m(17606);function A(E,T){return E&&E.length?p(E,N(T,2),I):void 0}U.exports=A},13888:(U,de,m)=>{var p=m(92602),N=m(29097),I=N(function(A,E){return A==null?{}:p(A,E)});U.exports=I},2689:(U,de,m)=>{var p=m(82941),N=p();U.exports=N},58215:(U,de,m)=>{var p=m(81207),N=m(24303),I=m(68286),A=m(5877),E=m(86152);function T(B,S,k){var M=E(B)?p:A,C=arguments.length<3;return M(B,I(S,4),k,C,N)}U.exports=T},36402:(U,de,m)=>{var p=m(86411),N=m(70940),I=m(67878),A=m(85505),E=m(82302),T="[object Map]",B="[object Set]";function S(k){if(k==null)return 0;if(I(k))return A(k)?E(k):k.length;var M=N(k);return M==T||M==B?k.size:p(k).length}U.exports=S},829:(U,de,m)=>{var p=m(62034),N=m(23813),I=m(36060),A=m(82406),E=I(function(T,B){if(T==null)return[];var S=B.length;return S>1&&A(T,B[0],B[1])?B=[]:S>2&&A(B[0],B[1],B[2])&&(B=[B[0]]),N(T,p(B,1),[])});U.exports=E},25497:(U,de,m)=>{var p=m(50343),N=m(51522),I=m(86152),A=m(4795),E=m(54452),T=m(33812),B=m(66188);function S(k){return I(k)?p(k,T):A(k)?[k]:N(E(B(k)))}U.exports=S},63329:(U,de,m)=>{var p=m(752),N=m(18582);function I(A){return p(A,N(A))}U.exports=I},89466:(U,de,m)=>{var p=m(72517),N=m(39413),I=m(26548),A=m(68286),E=m(47353),T=m(86152),B=m(73226),S=m(61049),k=m(29259),M=m(77598);function C(z,K,_){var he=T(z),te=he||B(z)||M(z);if(K=A(K,4),_==null){var j=z&&z.constructor;te?_=he?new j:[]:k(z)?_=S(j)?N(E(z)):{}:_={}}return(te?p:I)(z,function(Y,X,Z){return K(_,Y,X,Z)}),_}U.exports=C},26139:(U,de,m)=>{var p=m(62034),N=m(36060),I=m(67326),A=m(93746),E=N(function(T){return I(p(T,1,A,!0))});U.exports=E},74930:(U,de,m)=>{var p=m(66188),N=0;function I(A){var E=++N;return p(A)+E}U.exports=I},46150:(U,de,m)=>{var p=m(60091),N=m(40509);function I(A,E){return N(A||[],E||[],p)}U.exports=I},14786:function(U,de){(function(m,p){p(de)})(this,function(m){function p(re,ce){var ge=Object.keys(re);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(re);ce&&(Ne=Ne.filter(function(Je){return Object.getOwnPropertyDescriptor(re,Je).enumerable})),ge.push.apply(ge,Ne)}return ge}function N(re){for(var ce=1;ce<arguments.length;ce++){var ge=arguments[ce]!=null?arguments[ce]:{};ce%2?p(Object(ge),!0).forEach(function(Ne){I(re,Ne,ge[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ge)):p(Object(ge)).forEach(function(Ne){Object.defineProperty(re,Ne,Object.getOwnPropertyDescriptor(ge,Ne))})}return re}function I(re,ce,ge){return ce in re?Object.defineProperty(re,ce,{value:ge,enumerable:!0,configurable:!0,writable:!0}):re[ce]=ge,re}const A=new Set(["\u2014"]),E=new Set(["\xAD"]),T=new Set([" ","\u1680","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2008","\u2009","\u200A","\u205F","\u3000","	","\u200B","\u2028","\u2029"]),B=new Set(["\u058A","\u2010","\u2012","\u2013","\u05BE","\u0F0B","\u1361","\u17D8","\u17DA","\u2027","|","\u16EB","\u16EC","\u16ED","\u2056","\u2058","\u2059","\u205A","\u205B","\u205D","\u205E","\u2E19","\u2E2A","\u2E2B","\u2E2C","\u2E2D","\u2E30","\u10100","\u10101","\u10102","\u1039F","\u103D0","\u1091F","\u12470"]),S=new Set(["\xB4","\u1FFD"]),k=new Set([`
`]);function M(re,ce){ce||(ce={});const ge=Number.parseInt(ie(ce,"base-font-size",16),10),Ne=Number.parseFloat(re),Je=re.replace(Ne,"");switch(Je){case"rem":case"em":return Ne*ge;case"pt":return Ne*(96/72);case"px":return Ne}throw new Error("The unit "+Je+" is not supported")}function C(re,ce){const ge=new Set(["inherit","initial","unset","normal"]);let Ne=0;re&&!ge.has(re)&&(Ne=M(re));let Je=0;return ce&&!ge.has(ce)&&(Je=M(ce)),be=>(be.trim().replace(/\s+/gi," ").split(" ").length-1)*Ne+be.length*Je}function z(re,ce){const ge=[],Ne=ie(ce,"font-weight",re.getPropertyValue("font-weight"))||"400";["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"].includes(Ne.toString())&&ge.push(Ne);const Je=ie(ce,"font-style",re.getPropertyValue("font-style"));["normal","italic","oblique"].includes(Je)&&ge.push(Je);const be=ie(ce,"font-variant",re.getPropertyValue("font-variant"));["normal","small-caps"].includes(be)&&ge.push(be);const dt=M(ie(ce,"font-size",re.getPropertyValue("font-size"))||"16px");ge.push(dt+"px");const _e=ie(ce,"font-family",re.getPropertyValue("font-family"))||"Helvetica, Arial, sans-serif";return ge.push(_e),ge.join(" ")}function K(re){return re&&typeof re.getPropertyValue=="function"}function _(re){return he(re)&&re.style&&typeof window<"u"&&typeof window.getComputedStyle=="function"}function he(re){return typeof HTMLElement=="object"?re instanceof HTMLElement:Boolean(re&&typeof re=="object"&&re!==null&&re.nodeType===1&&typeof re.nodeName=="string")}function te(re){return typeof re=="object"&&re!==null&&!Array.isArray(re)}function j(re,ce){const ge=N({},ce),{style:Ne}=ge;return ce||(ce={}),K(Ne)?Ne:_(re)?window.getComputedStyle(re,ie(ce,"pseudoElt",null)):{getPropertyValue:Je=>ie(ce,Je)}}function Y(re,ce){switch(ce){case"pre":case"pre-wrap":return re;case"pre-line":return(re||"").replace(/\s+/gm," ").trim();default:return(re||"").replace(/[\r\n]/gm," ").replace(/\s+/gm," ").trim()}}function X(re,ce){switch(ce.getPropertyValue("text-transform")){case"uppercase":return re.toUpperCase();case"lowercase":return re.toLowerCase();default:return re}}function Z(re){return re=(re||"").replace(/<wbr>/gi,"\u200B").replace(/<br\s*\/?>/gi,`
`).replace(/&shy;/gi,"\xAD").replace(/&mdash;/gi,"\u2014"),/&#(\d+)(;?)|&#[xX]([a-fA-F\d]+)(;?)|&([\da-zA-Z]+);/g.test(re)&&console&&console.error("text-metrics: Found encoded htmlenties. You may want to use https://mths.be/he to decode your text first."),re}function ee(re){return re&&(re.textContent||re.textContent)||""}function ie(re,ce,ge){return re&&re[ce]!==void 0&&re[ce]||ge}function ye(re){const ce={};for(const ge of Object.keys(re||{}))ce[ge.replace(/([A-Z])/g,Ne=>"-"+Ne.toLowerCase())]=re[ge];return ce}function fe(re){try{const ce=document.createElement("canvas").getContext("2d"),ge=window.devicePixelRatio||1,Ne=ce.webkitBackingStorePixelRatio||ce.mozBackingStorePixelRatio||ce.msBackingStorePixelRatio||ce.oBackingStorePixelRatio||ce.backingStorePixelRatio||1;return ce.font=re,ce.setTransform(ge/Ne,0,0,ge/Ne,0,0),ce}catch(ce){throw new Error("Canvas support required"+ce.message)}}function Re(re){return(A.has(re)?"B2":T.has(re)&&"BAI")||E.has(re)&&"SHY"||B.has(re)&&"BA"||S.has(re)&&"BB"||k.has(re)&&"BK"}function Ve(re){let{ctx:ce,text:ge,max:Ne,wordSpacing:Je,letterSpacing:be}=re;const dt=C(Je,be),_e=[],Qe=[],Tt=[];let se="",we="";if(!ge)return[];for(const Ae of ge){const ze=Re(Ae);we===""&&ze==="BAI"||(ze?(Tt.push({chr:Ae,type:ze}),Qe.push(we),we=""):we+=Ae)}we&&Qe.push(we);for(const[Ae,ze]of Qe.entries()){if(Ae===0){se=ze;continue}const et=Tt[Ae-1],ut=et.type==="SHY"?"":et.chr;if(et.type==="BK"){_e.push(se),se=ze;continue}const Dt=ce.measureText(se+ut+ze).width+dt(se+ut+ze);if(Math.round(Dt)<=Ne)se+=ut+ze;else switch(et.type){case"SHY":_e.push(se+"-"),se=ze;break;case"BA":_e.push(se+ut),se=ze;break;case"BAI":_e.push(se),se=ze;break;case"BB":_e.push(se),se=ut+ze;break;case"B2":Number.parseInt(ce.measureText(se+ut).width+dt(se+ut),10)<=Ne?(_e.push(se+ut),se=ze):Number.parseInt(ce.measureText(ut+ze).width+dt(ut+ze),10)<=Ne?(_e.push(se),se=ut+ze):(_e.push(se,ut),se=ze);break;default:throw new Error("Undefoined break")}}return[...se].length>0&&_e.push(se),_e}function Oe(re){let{ctx:ce,text:ge,max:Ne,wordSpacing:Je,letterSpacing:be}=re;const dt=C(Je,be),_e=[];let Qe="",Tt=0;if(!ge)return[];for(const se of ge){const we=Re(se);if(we==="BK"){_e.push(Qe),Qe="";continue}const Ae=Qe.length;if(T.has(se)&&(Ae===0||T.has(Qe[Ae-1])))continue;let ze=ce.measureText(Qe+se).width+dt(Qe+se),et=Math.ceil(ze);if(we==="SHY"){const ut=ge[Tt+1]||"";ze=ce.measureText(Qe+se+ut).width+dt(Qe+se+ut),et=Math.ceil(ze)}if(et>Ne&&[...Qe].length>0)switch(we){case"SHY":_e.push(Qe+"-"),Qe="";break;case"BA":_e.push(Qe+se),Qe="";break;case"BAI":_e.push(Qe),Qe="";break;default:_e.push(Qe),Qe=se}else se!=="\xAD"&&(Qe+=se);Tt++}return[...Qe].length>0&&_e.push(Qe),_e}var $e={__proto__:null,addWordAndLetterSpacing:C,getFont:z,isCSSStyleDeclaration:K,canGetComputedStyle:_,isElement:he,isObject:te,getStyle:j,normalizeWhitespace:Y,getStyledText:X,prepareText:Z,getText:ee,prop:ie,normalizeOptions:ye,getContext2d:fe,computeLinesDefault:Ve,computeLinesBreakAll:Oe};class Xe{constructor(ce,ge){ge===void 0&&(ge={}),!he(ce)&&te(ce)?(this.el=void 0,this.overwrites=ye(ce)):(this.el=ce,this.overwrites=ye(ge)),this.style=j(this.el,this.overwrites),this.font=ie(ge,"font",null)||z(this.style,this.overwrites)}padding(){return this.el?Number.parseInt(this.style.paddingLeft||0,10)+Number.parseInt(this.style.paddingRight||0,10):0}parseArgs(ce,ge,Ne){ge===void 0&&(ge={}),Ne===void 0&&(Ne={}),typeof ce=="object"&&ce&&(Ne=ge,ge=ce||{},ce=void 0);const Je=N(N({},this.overwrites),ye(Ne)),be=ie(Je,"white-space")||this.style.getPropertyValue("white-space");return ge||(ge={}),Ne||(ge={}),{text:ce=!ce&&this.el?Y(ee(this.el),be):Z(Y(ce,be)),options:ge,overwrites:Ne,styles:Je}}width(){const{text:ce,options:ge,overwrites:Ne,styles:Je}=this.parseArgs(...[].slice.call(arguments));if(!ce)return 0;const be=z(this.style,Je),dt=ie(Je,"letter-spacing")||this.style.getPropertyValue("letter-spacing"),_e=C(ie(Je,"word-spacing")||this.style.getPropertyValue("word-spacing"),dt),Qe=fe(be),Tt=X(ce,this.style);return ge.multiline?this.lines(Tt,ge,Ne).reduce((se,we)=>{const Ae=Qe.measureText(we).width+_e(we);return Math.max(se,Ae)},0):Qe.measureText(Tt).width+_e(Tt)}height(){const{text:ce,options:ge,styles:Ne}=this.parseArgs(...[].slice.call(arguments)),Je=Number.parseFloat(ie(Ne,"line-height")||this.style.getPropertyValue("line-height"));return Math.ceil(this.lines(ce,ge,Ne).length*Je||0)}lines(){const{text:ce,options:ge,overwrites:Ne,styles:Je}=this.parseArgs(...[].slice.call(arguments)),be=z(this.style,Je);let dt=Number.parseInt(ie(ge,"width")||ie(Ne,"width"),10)||ie(this.el,"offsetWidth",0)||Number.parseInt(ie(Je,"width",0),10)||Number.parseInt(this.style.width,10);dt-=this.padding();const _e=ie(Je,"word-break")||this.style.getPropertyValue("word-break"),Qe=ie(Je,"letter-spacing")||this.style.getPropertyValue("letter-spacing"),Tt=ie(Je,"word-spacing")||this.style.getPropertyValue("word-spacing"),se=fe(be),we=X(ce,this.style);return _e==="break-all"?Oe({ctx:se,text:we,max:dt,wordSpacing:Tt,letterSpacing:Qe}):Ve({ctx:se,text:we,max:dt,wordSpacing:Tt,letterSpacing:Qe})}maxFontSize(){const{text:ce,options:ge,overwrites:Ne,styles:Je}=this.parseArgs(...[].slice.call(arguments)),be=se=>Math.ceil(this.width(ce,ge,N(N({},Je),{},{"font-size":se+"px"})));let dt=Number.parseInt(ie(ge,"width")||ie(Ne,"width"),10)||ie(this.el,"offsetWidth",0)||Number.parseInt(ie(Je,"width",0),10)||Number.parseInt(this.style.width,10);dt-=this.padding();let _e=Math.floor(dt/2),Qe=be(_e);if(_e=Math.floor(_e/Qe*dt),Qe=be(_e),Math.ceil(Qe)===dt)return _e?_e+"px":void 0;const Tt=Qe>dt&&_e>0;for(;Qe>dt&&_e>0;)_e-=1,Qe=be(_e);if(!Tt)for(;Qe<dt;){if(Qe=be(_e+1),Qe>dt)return _e?_e+"px":void 0;_e+=1}return _e?_e+"px":void 0}}const je=N({},$e);m.init=(re,ce)=>new Xe(re,ce),m.utils=je})}}]);

//# sourceMappingURL=266.ea023e89b78c516bc68b.js.map