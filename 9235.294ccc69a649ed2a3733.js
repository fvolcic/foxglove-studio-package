"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9235],{14571:(R,m,a)=>{a.d(m,{o:()=>p});var i=a(52322),o=a(2784);class p extends o.Component{constructor(){super(...arguments),this.state={hadError:!1}}componentDidCatch(g){this.setState({hadError:!0}),this.props.onError(g)}render(){return this.state.hadError?(0,i.jsx)(i.Fragment,{}):this.props.children}}},96133:(R,m,a)=>{a.d(m,{J:()=>i});function i(o,p){if(typeof o.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(o.value==null)return!1;let u=p;for(const g of o.path)if(typeof u!="object"||u==null||(u=u[g],u==null))return!1;return u!=null&&u==o.value}},62273:(R,m,a)=>{a.d(m,{T:()=>o});var i=a(96133);function o(p,u){if(p.topic!==u.topicName)return[];const g=[];function P(h,E){const f=u.messagePath[E];if(f==null){g.push(h);return}if(h!=null)switch(f.type){case"slice":{if(!Array.isArray(h))return;if(typeof f.start=="object"||typeof f.end=="object")throw new Error("Variables in slices are not supported");const{start:T,end:w}=f;for(let b=T;b<h.length&&b<=w;b++)P(h[b],E+1);return}case"filter":return(0,i.J)(f,h)?P(h,E+1):void 0;case"name":return typeof h!="object"?void 0:P(h[f.name],E+1)}}return P(p.message,0),g}},9235:(R,m,a)=>{a.r(m),a.d(m,{default:()=>t0});var i=a(52322),o=a(2784),p=a(28316),u=a(57051),g=a(14571),P=a(14075),h=a(591),E=a(88724),f=a(76635),T=a(91004),w=a(1012),b=a(62273),U=a(96995);const G=[[.18995,.07176,.23217],[.19483,.08339,.26149],[.19956,.09498,.29024],[.20415,.10652,.31844],[.2086,.11802,.34607],[.21291,.12947,.37314],[.21708,.14087,.39964],[.22111,.15223,.42558],[.225,.16354,.45096],[.22875,.17481,.47578],[.23236,.18603,.50004],[.23582,.1972,.52373],[.23915,.20833,.54686],[.24234,.21941,.56942],[.24539,.23044,.59142],[.2483,.24143,.61286],[.25107,.25237,.63374],[.25369,.26327,.65406],[.25618,.27412,.67381],[.25853,.28492,.693],[.26074,.29568,.71162],[.2628,.30639,.72968],[.26473,.31706,.74718],[.26652,.32768,.76412],[.26816,.33825,.7805],[.26967,.34878,.79631],[.27103,.35926,.81156],[.27226,.3697,.82624],[.27334,.38008,.84037],[.27429,.39043,.85393],[.27509,.40072,.86692],[.27576,.41097,.87936],[.27628,.42118,.89123],[.27667,.43134,.90254],[.27691,.44145,.91328],[.27701,.45152,.92347],[.27698,.46153,.93309],[.2768,.47151,.94214],[.27648,.48144,.95064],[.27603,.49132,.95857],[.27543,.50115,.96594],[.27469,.51094,.97275],[.27381,.52069,.97899],[.27273,.5304,.98461],[.27106,.54015,.9893],[.26878,.54995,.99303],[.26592,.55979,.99583],[.26252,.56967,.99773],[.25862,.57958,.99876],[.25425,.5895,.99896],[.24946,.59943,.99835],[.24427,.60937,.99697],[.23874,.61931,.99485],[.23288,.62923,.99202],[.22676,.63913,.98851],[.22039,.64901,.98436],[.21382,.65886,.97959],[.20708,.66866,.97423],[.20021,.67842,.96833],[.19326,.68812,.9619],[.18625,.69775,.95498],[.17923,.70732,.94761],[.17223,.7168,.93981],[.16529,.7262,.93161],[.15844,.73551,.92305],[.15173,.74472,.91416],[.14519,.75381,.90496],[.13886,.76279,.8955],[.13278,.77165,.8858],[.12698,.78037,.8759],[.12151,.78896,.86581],[.11639,.7974,.85559],[.11167,.80569,.84525],[.10738,.81381,.83484],[.10357,.82177,.82437],[.10026,.82955,.81389],[.0975,.83714,.80342],[.09532,.84455,.79299],[.09377,.85175,.78264],[.09287,.85875,.7724],[.09267,.86554,.7623],[.0932,.87211,.75237],[.09451,.87844,.74265],[.09662,.88454,.73316],[.09958,.8904,.72393],[.10342,.896,.715],[.10815,.90142,.70599],[.11374,.90673,.69651],[.12014,.91193,.6866],[.12733,.91701,.67627],[.13526,.92197,.66556],[.14391,.9268,.65448],[.15323,.93151,.64308],[.16319,.93609,.63137],[.17377,.94053,.61938],[.18491,.94484,.60713],[.19659,.94901,.59466],[.20877,.95304,.58199],[.22142,.95692,.56914],[.23449,.96065,.55614],[.24797,.96423,.54303],[.2618,.96765,.52981],[.27597,.97092,.51653],[.29042,.97403,.50321],[.30513,.97697,.48987],[.32006,.97974,.47654],[.33517,.98234,.46325],[.35043,.98477,.45002],[.36581,.98702,.43688],[.38127,.98909,.42386],[.39678,.99098,.41098],[.41229,.99268,.39826],[.42778,.99419,.38575],[.44321,.99551,.37345],[.45854,.99663,.3614],[.47375,.99755,.34963],[.48879,.99828,.33816],[.50362,.99879,.32701],[.51822,.9991,.31622],[.53255,.99919,.30581],[.54658,.99907,.29581],[.56026,.99873,.28623],[.57357,.99817,.27712],[.58646,.99739,.26849],[.59891,.99638,.26038],[.61088,.99514,.2528],[.62233,.99366,.24579],[.63323,.99195,.23937],[.64362,.98999,.23356],[.65394,.98775,.22835],[.66428,.98524,.2237],[.67462,.98246,.2196],[.68494,.97941,.21602],[.69525,.9761,.21294],[.70553,.97255,.21032],[.71577,.96875,.20815],[.72596,.9647,.2064],[.7361,.96043,.20504],[.74617,.95593,.20406],[.75617,.95121,.20343],[.76608,.94627,.20311],[.77591,.94113,.2031],[.78563,.93579,.20336],[.79524,.93025,.20386],[.80473,.92452,.20459],[.8141,.91861,.20552],[.82333,.91253,.20663],[.83241,.90627,.20788],[.84133,.89986,.20926],[.8501,.89328,.21074],[.85868,.88655,.2123],[.86709,.87968,.21391],[.8753,.87267,.21555],[.88331,.86553,.21719],[.89112,.85826,.2188],[.8987,.85087,.22038],[.90605,.84337,.22188],[.91317,.83576,.22328],[.92004,.82806,.22456],[.92666,.82025,.2257],[.93301,.81236,.22667],[.93909,.80439,.22744],[.94489,.79634,.228],[.95039,.78823,.22831],[.9556,.78005,.22836],[.96049,.77181,.22811],[.96507,.76352,.22754],[.96931,.75519,.22663],[.97323,.74682,.22536],[.97679,.73842,.22369],[.98,.73,.22161],[.98289,.7214,.21918],[.98549,.7125,.2165],[.98781,.7033,.21358],[.98986,.69382,.21043],[.99163,.68408,.20706],[.99314,.67408,.20348],[.99438,.66386,.19971],[.99535,.65341,.19577],[.99607,.64277,.19165],[.99654,.63193,.18738],[.99675,.62093,.18297],[.99672,.60977,.17842],[.99644,.59846,.17376],[.99593,.58703,.16899],[.99517,.57549,.16412],[.99419,.56386,.15918],[.99297,.55214,.15417],[.99153,.54036,.1491],[.98987,.52854,.14398],[.98799,.51667,.13883],[.9859,.50479,.13367],[.9836,.49291,.12849],[.98108,.48104,.12332],[.97837,.4692,.11817],[.97545,.4574,.11305],[.97234,.44565,.10797],[.96904,.43399,.10294],[.96555,.42241,.09798],[.96187,.41093,.0931],[.95801,.39958,.08831],[.95398,.38836,.08362],[.94977,.37729,.07905],[.94538,.36638,.07461],[.94084,.35566,.07031],[.93612,.34513,.06616],[.93125,.33482,.06218],[.92623,.32473,.05837],[.92105,.31489,.05475],[.91572,.3053,.05134],[.91024,.29599,.04814],[.90463,.28696,.04516],[.89888,.27824,.04243],[.89298,.26981,.03993],[.88691,.26152,.03753],[.88066,.25334,.03521],[.87422,.24526,.03297],[.8676,.2373,.03082],[.86079,.22945,.02875],[.8538,.2217,.02677],[.84662,.21407,.02487],[.83926,.20654,.02305],[.83172,.19912,.02131],[.82399,.19182,.01966],[.81608,.18462,.01809],[.80799,.17753,.0166],[.79971,.17055,.0152],[.79125,.16368,.01387],[.7826,.15693,.01264],[.77377,.15028,.01148],[.76476,.14374,.01041],[.75556,.13731,.00942],[.74617,.13098,.00851],[.73661,.12477,.00769],[.72686,.11867,.00695],[.71692,.11268,.00629],[.7068,.1068,.00571],[.6965,.10102,.00522],[.68602,.09536,.00481],[.67535,.0898,.00449],[.66449,.08436,.00424],[.65345,.07902,.00408],[.64223,.0738,.00401],[.63082,.06868,.00401],[.61923,.06367,.0041],[.60746,.05878,.00427],[.5955,.05399,.00453],[.58336,.04931,.00486],[.57103,.04474,.00529],[.55852,.04028,.00579],[.54583,.03593,.00638],[.53295,.03169,.00705],[.51989,.02756,.0078],[.50664,.02354,.00863],[.49321,.01963,.00955],[.4796,.01583,.01055]].map(e=>new U.Pa4().fromArray(e));function F(e){e=Math.max(0,Math.min(1,e));const t=Math.trunc(e*255),s=Math.min(255,t+1),r=e*255-t,l=G[t],n=G[s];return l.clone().lerp(n,r).multiplyScalar(255)}function W(e){const t=F(e);return`rgb(${Math.round(t.x)}, ${Math.round(t.y)}, ${Math.round(t.z)})`}var H=a(76665);function K(e,t){return(0,H.ZP)(e,s=>{switch(t.action){case"perform-node-action":throw new Error(`Unhandled node action: ${t.payload.id}`);case"update":switch(t.payload.path[0]){case"general":(0,f.set)(s,[t.payload.path[1]],t.payload.value);break;default:throw new Error(`Unexpected payload.path[0]: ${t.payload.path[0]}`)}break}})}const Y=["int8","uint8","int16","uint16","int32","uint32","float32","float64","string"];function J(e,t,s){const r=(0,o.useMemo)(()=>({error:s,fields:{path:{label:"Message path",input:"messagepath",value:e.path,error:t,validTypes:Y},minValue:{label:"Min",input:"number",value:e.minValue},maxValue:{label:"Max",input:"number",value:e.maxValue},colorMode:{label:"Color mode",input:"select",value:e.colorMode,options:[{label:"Color map",value:"colormap"},{label:"Gradient",value:"gradient"}]},...e.colorMode==="colormap"&&{colorMap:{label:"Color map",input:"select",value:e.colorMap,options:[{label:"Red to green",value:"red-yellow-green"},{label:"Rainbow",value:"rainbow"},{label:"Turbo",value:"turbo"}]}},...e.colorMode==="gradient"&&{gradient:{label:"Gradient",input:"gradient",value:e.gradient}},reverse:{label:"Reverse",input:"boolean",value:e.reverse}}}),[s,e,t]);return(0,u.O4)({general:r})}const X={path:"",minValue:0,maxValue:1,colorMap:"red-yellow-green",colorMode:"colormap",gradient:["#0000ff","#ff00ff"],reverse:!1};function O(e){if(e.length<=1)return e[0];throw new Error("Message path produced multiple results")}function z(e,t){try{switch(t.type){case"frame":{if(e.pathParseError!=null)return{...e,latestMessage:(0,f.last)(t.messages),error:void 0};let s=e.latestMatchingQueriedData,r=e.latestMessage;if(e.parsedPath)for(const l of t.messages){if(l.topic!==e.parsedPath.topicName)continue;const n=O((0,b.T)(l,e.parsedPath));n!=null&&(s=n,r=l)}return{...e,latestMessage:r,latestMatchingQueriedData:s,error:void 0}}case"path":{const s=(0,w.ZP)(t.path);let r;s?.messagePath.some(c=>c.type==="filter"&&typeof c.value=="object"||c.type==="slice"&&(typeof c.start=="object"||typeof c.end=="object"))===!0&&(r="Message paths using variables are not currently supported");let l,n;try{l=s&&r==null&&e.latestMessage?O((0,b.T)(e.latestMessage,s)):void 0}catch(c){n=c}return{...e,path:t.path,parsedPath:s,latestMatchingQueriedData:l,error:n,pathParseError:r}}case"seek":return{...e,latestMessage:void 0,latestMatchingQueriedData:void 0,error:void 0}}}catch(s){return{...e,latestMatchingQueriedData:void 0,error:s}}}function q(e,t,s,r){let l;switch(e.colorMode){case"colormap":switch(e.colorMap){case"red-yellow-green":l=[{color:"#f00",location:0},{color:"#ff0",location:.5},{color:"#0c0",location:1}];break;case"rainbow":l=[{color:"#f0f",location:0},{color:"#00f",location:1/5},{color:"#0ff",location:2/5},{color:"#0f0",location:3/5},{color:"#ff0",location:4/5},{color:"#f00",location:5/5}];break;case"turbo":{l=new Array(20).fill(void 0).map((c,j)=>({color:W(j/(20-1)),location:j/(20-1)}));break}}break;case"gradient":l=[{color:e.gradient[0],location:0},{color:e.gradient[1],location:1}];break}return e.reverse&&(l=l.map(n=>({color:n.color,location:1-n.location})).reverse()),`conic-gradient(from ${-Math.PI/2+r}rad at 50% ${100*(t/2/s)}%, ${l.map(n=>`${n.color} ${n.location*2*(Math.PI/2-r)}rad`).join(",")}, ${l[0].color})`}function _({context:e}){const[t,s]=(0,o.useState)(()=>()=>{}),[r,l]=(0,o.useState)(()=>({...X,...e.initialState})),[n,c]=(0,o.useReducer)(z,r,({path:M})=>({path:M,parsedPath:(0,w.ZP)(M),latestMessage:void 0,latestMatchingQueriedData:void 0,pathParseError:void 0,error:void 0}));(0,o.useLayoutEffect)(()=>{c({type:"path",path:r.path})},[r.path]),(0,o.useEffect)(()=>{e.saveState(r),e.setDefaultPanelTitle(r.path===""?void 0:r.path)},[r,e]),(0,o.useEffect)(()=>(e.onRender=(M,B)=>{s(()=>B),M.didSeek===!0&&c({type:"seek"}),M.currentFrame&&c({type:"frame",messages:M.currentFrame})},e.watch("currentFrame"),e.watch("didSeek"),()=>{e.onRender=void 0}),[e]);const j=(0,o.useCallback)(M=>l(B=>K(B,M)),[l]),k=J(r,n.pathParseError,n.error?.message);(0,o.useEffect)(()=>{e.updatePanelSettingsEditor({actionHandler:j,nodes:k})},[e,j,k]),(0,o.useEffect)(()=>(n.parsedPath?.topicName!=null&&e.subscribe([n.parsedPath.topicName]),()=>e.unsubscribeAll()),[e,n.parsedPath?.topicName]),(0,o.useEffect)(()=>{t()},[t]);const I=typeof n.latestMatchingQueriedData=="number"||typeof n.latestMatchingQueriedData=="string"?Number(n.latestMatchingQueriedData):NaN,{minValue:C,maxValue:N}=r,Z=(Math.max(C,Math.min(I,N))-C)/(N-C),a0=I<C||I>N,S=.1,x=.5+S,y=.5+S,d=-Math.PI/8,$=.5,v=.4,Q=1+2*S,D=Math.max(y-$*Math.sin(d),y-v*Math.sin(d))+S,A=8,r0=.05,[L]=(0,o.useState)(()=>`gauge-clip-path-${(0,T.Z)()}`);return(0,i.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",overflow:"hidden",padding:8},children:(0,i.jsxs)("div",{style:{width:"100%",overflow:"hidden"},children:[(0,i.jsxs)("div",{style:{position:"relative",maxWidth:"100%",maxHeight:"100%",aspectRatio:`${Q} / ${D}`,margin:"0 auto",transform:"scale(1)"},children:[(0,i.jsx)("div",{style:{width:"100%",height:"100%",background:q(r,Q,D,d),clipPath:`url(#${L})`,opacity:n.latestMatchingQueriedData==null?.5:1}}),(0,i.jsx)("div",{style:{backgroundColor:a0?"orange":"white",width:A,height:`${100*($+r0)/D}%`,border:"2px solid black",borderRadius:A/2,position:"absolute",bottom:`${100*(1-y/D)}%`,left:"50%",transformOrigin:"bottom left",margin:"0 auto",transform:["scaleZ(1)",`rotate(${-Math.PI/2+d+Z*2*(Math.PI/2-d)}rad)`,`translateX(${-A/2}px)`,`translateY(${A/2}px)`].join(" "),display:Number.isFinite(Z)?"block":"none"}})]}),(0,i.jsx)("svg",{style:{position:"absolute"},children:(0,i.jsx)("clipPath",{id:L,clipPathUnits:"objectBoundingBox",children:(0,i.jsx)("path",{transform:`scale(${1/Q}, ${1/D})`,d:[`M ${x-$*Math.cos(d)},${y-$*Math.sin(d)}`,`A 0.5,0.5 0 ${d<0?1:0} 1 ${x+$*Math.cos(d)},${y-$*Math.sin(d)}`,`L ${x+v*Math.cos(d)},${y-v*Math.sin(d)}`,`A ${v},${v} 0 ${d<0?1:0} 0 ${x-v*Math.cos(d)},${y-v*Math.sin(d)}`,"Z"].join(" ")})})})]})})}function e0(e,t){return p.render((0,i.jsx)(o.StrictMode,{children:(0,i.jsx)(g.o,{onError:e,children:(0,i.jsx)(E.Z,{isDark:!0,children:(0,i.jsx)(_,{context:t})})})}),t.panelElement),()=>{p.unmountComponentAtNode(t.panelElement)}}function V(e){const t=(0,u.iY)(),s=(0,o.useMemo)(()=>e0.bind(void 0,t),[t]);return(0,i.jsx)(h._,{config:e.config,saveConfig:e.saveConfig,initPanel:s})}V.panelType="Gauge",V.defaultConfig={};const t0=(0,P.Z)(V)}}]);

//# sourceMappingURL=9235.294ccc69a649ed2a3733.js.map